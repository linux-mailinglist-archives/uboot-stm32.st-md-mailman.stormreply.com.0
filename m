Return-Path: <uboot-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+uboot-stm32@lfdr.de
Delivered-To: lists+uboot-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id E319B484F75
	for <lists+uboot-stm32@lfdr.de>; Wed,  5 Jan 2022 09:43:01 +0100 (CET)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 8D97BC5F1F5;
	Wed,  5 Jan 2022 08:43:01 +0000 (UTC)
Received: from mout-u-204.mailbox.org (mout-u-204.mailbox.org [91.198.250.253])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id D4942C5A4FD
 for <uboot-stm32@st-md-mailman.stormreply.com>;
 Wed,  5 Jan 2022 08:42:59 +0000 (UTC)
Received: from smtp1.mailbox.org (smtp1.mailbox.org
 [IPv6:2001:67c:2050:105:465:1:1:0])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
 key-exchange ECDHE (P-384) server-signature RSA-PSS (4096 bits) server-digest
 SHA256) (No client certificate requested)
 by mout-u-204.mailbox.org (Postfix) with ESMTPS id 4JTNKb3Q1CzQlHG;
 Wed,  5 Jan 2022 09:42:59 +0100 (CET)
X-Virus-Scanned: amavisd-new at heinlein-support.de
Message-ID: <c39c6f17-92b8-8a62-7ea9-7b5f797442ec@denx.de>
Date: Wed, 5 Jan 2022 09:42:54 +0100
MIME-Version: 1.0
Content-Language: en-US
To: Patrick Delaunay <patrick.delaunay@foss.st.com>, u-boot@lists.denx.de
References: <20220104132401.3573475-1-patrick.delaunay@foss.st.com>
 <20220104142328.v1.1.Iaa7c4564c1e7d57e198f7621d124cddaa3296c4a@changeid>
From: Stefan Roese <sr@denx.de>
In-Reply-To: <20220104142328.v1.1.Iaa7c4564c1e7d57e198f7621d124cddaa3296c4a@changeid>
Cc: Marek Vasut <marex@denx.de>,
 U-Boot STM32 <uboot-stm32@st-md-mailman.stormreply.com>,
 Simon Glass <sjg@chromium.org>
Subject: Re: [Uboot-stm32] [PATCH v1 1/5] cmd: Fix up warnings in flash.c
X-BeenThere: uboot-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <uboot-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/uboot-stm32>, 
 <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/uboot-stm32/>
List-Post: <mailto:uboot-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/uboot-stm32>, 
 <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: uboot-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Uboot-stm32" <uboot-stm32-bounces@st-md-mailman.stormreply.com>

T24gMS80LzIyIDE0OjIzLCBQYXRyaWNrIERlbGF1bmF5IHdyb3RlOgo+IFRpZHkgdXAgdGhlIHdh
cm5pbmdzIHJlcG9ydGVkIGJ5IGNoZWNrcGF0Y2gucGwgdG8gcHJlcGFyZSBuZXh0IHBhdGNoZXMK
PiAKPiBTaWduZWQtb2ZmLWJ5OiBQYXRyaWNrIERlbGF1bmF5IDxwYXRyaWNrLmRlbGF1bmF5QGZv
c3Muc3QuY29tPgo+IFJldmlld2VkLWJ5OiBTaW1vbiBHbGFzcyA8c2pnQGNocm9taXVtLm9yZz4K
ClJldmlld2VkLWJ5OiBTdGVmYW4gUm9lc2UgPHNyQGRlbnguZGU+CgpUaGFua3MsClN0ZWZhbgoK
PiAtLS0KPiAKPiAgIGNtZC9mbGFzaC5jIHwgMjM5ICsrKysrKysrKysrKysrKysrKysrKysrKyst
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiAgIDEgZmlsZSBjaGFuZ2VkLCAxMTcgaW5zZXJ0
aW9ucygrKSwgMTIyIGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9jbWQvZmxhc2guYyBi
L2NtZC9mbGFzaC5jCj4gaW5kZXggODE5ZmViYzEwZS4uNTk0ZTJjYWE1OSAxMDA2NDQKPiAtLS0g
YS9jbWQvZmxhc2guYwo+ICsrKyBiL2NtZC9mbGFzaC5jCj4gQEAgLTE5LDcgKzE5LDcgQEAKPiAg
IGludCBtdGRwYXJ0c19pbml0KHZvaWQpOwo+ICAgaW50IG10ZF9pZF9wYXJzZShjb25zdCBjaGFy
ICppZCwgY29uc3QgY2hhciAqKnJldF9pZCwgdTggKmRldl90eXBlLCB1OCAqZGV2X251bSk7Cj4g
ICBpbnQgZmluZF9kZXZfYW5kX3BhcnQoY29uc3QgY2hhciAqaWQsIHN0cnVjdCBtdGRfZGV2aWNl
ICoqZGV2LAo+IC0JCXU4ICpwYXJ0X251bSwgc3RydWN0IHBhcnRfaW5mbyAqKnBhcnQpOwo+ICsJ
CSAgICAgIHU4ICpwYXJ0X251bSwgc3RydWN0IHBhcnRfaW5mbyAqKnBhcnQpOwo+ICAgI2VuZGlm
Cj4gICAKPiAgICNpZmRlZiBDT05GSUdfTVREX05PUl9GTEFTSAo+IEBAIC00NywzNCArNDcsMzkg
QEAgZXh0ZXJuIGZsYXNoX2luZm9fdCBmbGFzaF9pbmZvW107CS8qIGluZm8gZm9yIEZMQVNIIGNo
aXBzICovCj4gICAgKgkJCSAgb3IgYW4gaW52YWxpZCBmbGFzaCBiYW5rLgo+ICAgICovCj4gICBz
dGF0aWMgaW50Cj4gLWFiYnJldl9zcGVjIChjaGFyICpzdHIsIGZsYXNoX2luZm9fdCAqKiBwaW5m
bywgaW50ICpwc2YsIGludCAqcHNsKQo+ICthYmJyZXZfc3BlYyhjaGFyICpzdHIsIGZsYXNoX2lu
Zm9fdCAqKnBpbmZvLCBpbnQgKnBzZiwgaW50ICpwc2wpCj4gICB7Cj4gICAJZmxhc2hfaW5mb190
ICpmcDsKPiAgIAlpbnQgYmFuaywgZmlyc3QsIGxhc3Q7Cj4gICAJY2hhciAqcCwgKmVwOwo+ICAg
Cj4gLQlpZiAoKHAgPSBzdHJjaHIgKHN0ciwgJzonKSkgPT0gTlVMTCkKPiArCXAgPSBzdHJjaHIo
c3RyLCAnOicpOwo+ICsJaWYgKCFwKQo+ICAgCQlyZXR1cm4gMDsKPiAgIAkqcCsrID0gJ1wwJzsK
PiAgIAo+ICAgCWJhbmsgPSBkZWN0b3VsKHN0ciwgJmVwKTsKPiAgIAlpZiAoZXAgPT0gc3RyIHx8
ICplcCAhPSAnXDAnIHx8Cj4gLQkJYmFuayA8IDEgfHwgYmFuayA+IENPTkZJR19TWVNfTUFYX0ZM
QVNIX0JBTktTIHx8Cj4gLQkJKGZwID0gJmZsYXNoX2luZm9bYmFuayAtIDFdKS0+Zmxhc2hfaWQg
PT0gRkxBU0hfVU5LTk9XTikKPiArCSAgICBiYW5rIDwgMSB8fCBiYW5rID4gQ09ORklHX1NZU19N
QVhfRkxBU0hfQkFOS1MpCj4gKwkJcmV0dXJuIC0xOwo+ICsKPiArCWZwID0gJmZsYXNoX2luZm9b
YmFuayAtIDFdOwo+ICsJaWYgKGZwLT5mbGFzaF9pZCA9PSBGTEFTSF9VTktOT1dOKQo+ICAgCQly
ZXR1cm4gLTE7Cj4gICAKPiAgIAlzdHIgPSBwOwo+IC0JaWYgKChwID0gc3RyY2hyIChzdHIsICct
JykpICE9IE5VTEwpCj4gKwlwID0gc3RyY2hyKHN0ciwgJy0nKTsKPiArCWlmIChwKQo+ICAgCQkq
cCsrID0gJ1wwJzsKPiAgIAo+ICAgCWZpcnN0ID0gZGVjdG91bChzdHIsICZlcCk7Cj4gICAJaWYg
KGVwID09IHN0ciB8fCAqZXAgIT0gJ1wwJyB8fCBmaXJzdCA+PSBmcC0+c2VjdG9yX2NvdW50KQo+
ICAgCQlyZXR1cm4gLTE7Cj4gICAKPiAtCWlmIChwICE9IE5VTEwpIHsKPiArCWlmIChwKSB7Cj4g
ICAJCWxhc3QgPSBkZWN0b3VsKHAsICZlcCk7Cj4gICAJCWlmIChlcCA9PSBwIHx8ICplcCAhPSAn
XDAnIHx8Cj4gLQkJCWxhc3QgPCBmaXJzdCB8fCBsYXN0ID49IGZwLT5zZWN0b3JfY291bnQpCj4g
KwkJICAgIGxhc3QgPCBmaXJzdCB8fCBsYXN0ID49IGZwLT5zZWN0b3JfY291bnQpCj4gICAJCQly
ZXR1cm4gLTE7Cj4gICAJfSBlbHNlIHsKPiAgIAkJbGFzdCA9IGZpcnN0Owo+IEBAIC0xMDcsMTEg
KzExMiwxMCBAQCBpbnQgZmxhc2hfc2VjdF9yb3VuZGIodWxvbmcgKmFkZHIpCj4gICAJCQkJc2Vj
dG9yX2VuZF9hZGRyID0gaW5mby0+c3RhcnRbMF0gKwo+ICAgCQkJCQkJCQlpbmZvLT5zaXplIC0g
MTsKPiAgIAkJCX0gZWxzZSB7Cj4gLQkJCQlzZWN0b3JfZW5kX2FkZHIgPSBpbmZvLT5zdGFydFtp
KzFdIC0gMTsKPiArCQkJCXNlY3Rvcl9lbmRfYWRkciA9IGluZm8tPnN0YXJ0W2kgKyAxXSAtIDE7
Cj4gICAJCQl9Cj4gICAKPiAtCQkJaWYgKCphZGRyIDw9IHNlY3Rvcl9lbmRfYWRkciAmJgo+IC0J
CQkJCQkqYWRkciA+PSBpbmZvLT5zdGFydFtpXSkgewo+ICsJCQlpZiAoKmFkZHIgPD0gc2VjdG9y
X2VuZF9hZGRyICYmICphZGRyID49IGluZm8tPnN0YXJ0W2ldKSB7Cj4gICAJCQkJZm91bmQgPSAx
Owo+ICAgCQkJCS8qIGFkanVzdCAqYWRkciBpZiBuZWNlc3NhcnkgKi8KPiAgIAkJCQlpZiAoKmFk
ZHIgPCBzZWN0b3JfZW5kX2FkZHIpCj4gQEAgLTE0NCw3ICsxNDgsNyBAQCBpbnQgZmxhc2hfc2Vj
dF9yb3VuZGIodWxvbmcgKmFkZHIpCj4gICAgKiBSZXR1cm46Cj4gICAgKiAgICAxOiBzdWNjZXNz
Cj4gICAgKiAgIC0xOiBmYWlsdXJlIChiYWQgZm9ybWF0LCBiYWQgYWRkcmVzcykuCj4gLSovCj4g
KyAqLwo+ICAgc3RhdGljIGludAo+ICAgYWRkcl9zcGVjKGNoYXIgKmFyZzEsIGNoYXIgKmFyZzIs
IHVsb25nICphZGRyX2ZpcnN0LCB1bG9uZyAqYWRkcl9sYXN0KQo+ICAgewo+IEBAIC0xNTYsNyAr
MTYwLDcgQEAgYWRkcl9zcGVjKGNoYXIgKmFyZzEsIGNoYXIgKmFyZzIsIHVsb25nICphZGRyX2Zp
cnN0LCB1bG9uZyAqYWRkcl9sYXN0KQo+ICAgCQlyZXR1cm4gLTE7Cj4gICAKPiAgIAlsZW5fdXNl
ZCA9IDA7Cj4gLQlpZiAoYXJnMiAmJiAqYXJnMiA9PSAnKycpewo+ICsJaWYgKGFyZzIgJiYgKmFy
ZzIgPT0gJysnKSB7Cj4gICAJCWxlbl91c2VkID0gMTsKPiAgIAkJKythcmcyOwo+ICAgCX0KPiBA
QCAtMTY1LDcgKzE2OSw3IEBAIGFkZHJfc3BlYyhjaGFyICphcmcxLCBjaGFyICphcmcyLCB1bG9u
ZyAqYWRkcl9maXJzdCwgdWxvbmcgKmFkZHJfbGFzdCkKPiAgIAlpZiAoZXAgPT0gYXJnMiB8fCAq
ZXAgIT0gJ1wwJykKPiAgIAkJcmV0dXJuIC0xOwo+ICAgCj4gLQlpZiAobGVuX3VzZWQpewo+ICsJ
aWYgKGxlbl91c2VkKSB7Cj4gICAJCS8qCj4gICAJCSAqICphZGRyX2xhc3QgaGFzIHRoZSBsZW5n
dGgsIGNvbXB1dGUgY29ycmVjdCAqYWRkcl9sYXN0Cj4gICAJCSAqIFhYWCB3YXRjaCBvdXQgZm9y
IHRoZSBpbnRlZ2VyIG92ZXJmbG93ISBSaWdodCBub3cgaXQgaXMKPiBAQCAtMTg3LDkgKzE5MSw5
IEBAIGFkZHJfc3BlYyhjaGFyICphcmcxLCBjaGFyICphcmcyLCB1bG9uZyAqYWRkcl9maXJzdCwg
dWxvbmcgKmFkZHJfbGFzdCkKPiAgIH0KPiAgIAo+ICAgc3RhdGljIGludAo+IC1mbGFzaF9maWxs
X3NlY3RfcmFuZ2VzICh1bG9uZyBhZGRyX2ZpcnN0LCB1bG9uZyBhZGRyX2xhc3QsCj4gLQkJCWlu
dCAqc19maXJzdCwgaW50ICpzX2xhc3QsCj4gLQkJCWludCAqc19jb3VudCApCj4gK2ZsYXNoX2Zp
bGxfc2VjdF9yYW5nZXModWxvbmcgYWRkcl9maXJzdCwgdWxvbmcgYWRkcl9sYXN0LAo+ICsJCSAg
ICAgICBpbnQgKnNfZmlyc3QsIGludCAqc19sYXN0LAo+ICsJCSAgICAgICBpbnQgKnNfY291bnQp
Cj4gICB7Cj4gICAJZmxhc2hfaW5mb190ICppbmZvOwo+ICAgCXVsb25nIGJhbms7Cj4gQEAgLTE5
NywyNyArMjAxLDI1IEBAIGZsYXNoX2ZpbGxfc2VjdF9yYW5nZXMgKHVsb25nIGFkZHJfZmlyc3Qs
IHVsb25nIGFkZHJfbGFzdCwKPiAgIAo+ICAgCSpzX2NvdW50ID0gMDsKPiAgIAo+IC0JZm9yIChi
YW5rPTA7IGJhbmsgPCBDT05GSUdfU1lTX01BWF9GTEFTSF9CQU5LUzsgKytiYW5rKSB7Cj4gKwlm
b3IgKGJhbmsgPSAwOyBiYW5rIDwgQ09ORklHX1NZU19NQVhfRkxBU0hfQkFOS1M7ICsrYmFuaykg
ewo+ICAgCQlzX2ZpcnN0W2JhbmtdID0gLTE7CS8qIGZpcnN0IHNlY3RvciB0byBlcmFzZQkqLwo+
IC0JCXNfbGFzdCBbYmFua10gPSAtMTsJLyogbGFzdCAgc2VjdG9yIHRvIGVyYXNlCSovCj4gKwkJ
c19sYXN0W2JhbmtdID0gLTE7CS8qIGxhc3QgIHNlY3RvciB0byBlcmFzZQkqLwo+ICAgCX0KPiAg
IAo+IC0JZm9yIChiYW5rPTAsaW5mbyA9ICZmbGFzaF9pbmZvWzBdOwo+ICsJZm9yIChiYW5rID0g
MCwgaW5mbyA9ICZmbGFzaF9pbmZvWzBdOwo+ICAgCSAgICAgKGJhbmsgPCBDT05GSUdfU1lTX01B
WF9GTEFTSF9CQU5LUykgJiYgKGFkZHJfZmlyc3QgPD0gYWRkcl9sYXN0KTsKPiAgIAkgICAgICsr
YmFuaywgKytpbmZvKSB7Cj4gICAJCXVsb25nIGJfZW5kOwo+ICAgCQlpbnQgc2VjdDsKPiAgIAkJ
c2hvcnQgc19lbmQ7Cj4gICAKPiAtCQlpZiAoaW5mby0+Zmxhc2hfaWQgPT0gRkxBU0hfVU5LTk9X
Tikgewo+ICsJCWlmIChpbmZvLT5mbGFzaF9pZCA9PSBGTEFTSF9VTktOT1dOKQo+ICAgCQkJY29u
dGludWU7Cj4gLQkJfQo+ICAgCj4gICAJCWJfZW5kID0gaW5mby0+c3RhcnRbMF0gKyBpbmZvLT5z
aXplIC0gMTsJLyogYmFuayBlbmQgYWRkciAqLwo+ICAgCQlzX2VuZCA9IGluZm8tPnNlY3Rvcl9j
b3VudCAtIDE7CQkJLyogbGFzdCBzZWN0b3IgICAqLwo+ICAgCj4gLQo+IC0JCWZvciAoc2VjdD0w
OyBzZWN0IDwgaW5mby0+c2VjdG9yX2NvdW50OyArK3NlY3QpIHsKPiArCQlmb3IgKHNlY3QgPSAw
OyBzZWN0IDwgaW5mby0+c2VjdG9yX2NvdW50OyArK3NlY3QpIHsKPiAgIAkJCXVsb25nIGVuZDsJ
LyogbGFzdCBhZGRyZXNzIGluIGN1cnJlbnQgc2VjdAkqLwo+ICAgCj4gICAJCQllbmQgPSAoc2Vj
dCA9PSBzX2VuZCkgPyBiX2VuZCA6IGluZm8tPnN0YXJ0W3NlY3QgKyAxXSAtIDE7Cj4gQEAgLTIy
Nyw0MCArMjI5LDM3IEBAIGZsYXNoX2ZpbGxfc2VjdF9yYW5nZXMgKHVsb25nIGFkZHJfZmlyc3Qs
IHVsb25nIGFkZHJfbGFzdCwKPiAgIAkJCWlmIChhZGRyX2xhc3QgPCBpbmZvLT5zdGFydFtzZWN0
XSkKPiAgIAkJCQljb250aW51ZTsKPiAgIAo+IC0JCQlpZiAoYWRkcl9maXJzdCA9PSBpbmZvLT5z
dGFydFtzZWN0XSkgewo+ICsJCQlpZiAoYWRkcl9maXJzdCA9PSBpbmZvLT5zdGFydFtzZWN0XSkK
PiAgIAkJCQlzX2ZpcnN0W2JhbmtdID0gc2VjdDsKPiAtCQkJfQo+IC0JCQlpZiAoYWRkcl9sYXN0
ICA9PSBlbmQpIHsKPiArCj4gKwkJCWlmIChhZGRyX2xhc3QgID09IGVuZCkKPiAgIAkJCQlzX2xh
c3RbYmFua10gID0gc2VjdDsKPiAtCQkJfQo+ICAgCQl9Cj4gICAJCWlmIChzX2ZpcnN0W2Jhbmtd
ID49IDApIHsKPiAgIAkJCWlmIChzX2xhc3RbYmFua10gPCAwKSB7Cj4gICAJCQkJaWYgKGFkZHJf
bGFzdCA+IGJfZW5kKSB7Cj4gICAJCQkJCXNfbGFzdFtiYW5rXSA9IHNfZW5kOwo+ICAgCQkJCX0g
ZWxzZSB7Cj4gLQkJCQkJcHV0cyAoIkVycm9yOiBlbmQgYWRkcmVzcyIKPiAtCQkJCQkJIiBub3Qg
b24gc2VjdG9yIGJvdW5kYXJ5XG4iKTsKPiArCQkJCQlwdXRzKCJFcnJvcjogZW5kIGFkZHJlc3Mg
bm90IG9uIHNlY3RvciBib3VuZGFyeVxuIik7Cj4gICAJCQkJCXJjb2RlID0gMTsKPiAgIAkJCQkJ
YnJlYWs7Cj4gICAJCQkJfQo+ICAgCQkJfQo+ICAgCQkJaWYgKHNfbGFzdFtiYW5rXSA8IHNfZmly
c3RbYmFua10pIHsKPiAtCQkJCXB1dHMgKCJFcnJvcjogZW5kIHNlY3RvciIKPiAtCQkJCQkiIHBy
ZWNlZGVzIHN0YXJ0IHNlY3RvclxuIik7Cj4gKwkJCQlwdXRzKCJFcnJvcjogZW5kIHNlY3RvciBw
cmVjZWRlcyBzdGFydCBzZWN0b3JcbiIpOwo+ICAgCQkJCXJjb2RlID0gMTsKPiAgIAkJCQlicmVh
azsKPiAgIAkJCX0KPiAgIAkJCXNlY3QgPSBzX2xhc3RbYmFua107Cj4gLQkJCWFkZHJfZmlyc3Qg
PSAoc2VjdCA9PSBzX2VuZCkgPyBiX2VuZCArIDE6IGluZm8tPnN0YXJ0W3NlY3QgKyAxXTsKPiAr
CQkJYWRkcl9maXJzdCA9IChzZWN0ID09IHNfZW5kKSA/IGJfZW5kICsgMSA6IGluZm8tPnN0YXJ0
W3NlY3QgKyAxXTsKPiAgIAkJCSgqc19jb3VudCkgKz0gc19sYXN0W2JhbmtdIC0gc19maXJzdFti
YW5rXSArIDE7Cj4gICAJCX0gZWxzZSBpZiAoYWRkcl9maXJzdCA+PSBpbmZvLT5zdGFydFswXSAm
JiBhZGRyX2ZpcnN0IDwgYl9lbmQpIHsKPiAtCQkJcHV0cyAoIkVycm9yOiBzdGFydCBhZGRyZXNz
IG5vdCBvbiBzZWN0b3IgYm91bmRhcnlcbiIpOwo+ICsJCQlwdXRzKCJFcnJvcjogc3RhcnQgYWRk
cmVzcyBub3Qgb24gc2VjdG9yIGJvdW5kYXJ5XG4iKTsKPiAgIAkJCXJjb2RlID0gMTsKPiAgIAkJ
CWJyZWFrOwo+ICAgCQl9IGVsc2UgaWYgKHNfbGFzdFtiYW5rXSA+PSAwKSB7Cj4gLQkJCXB1dHMg
KCJFcnJvcjogY2Fubm90IHNwYW4gYWNyb3NzIGJhbmtzIHdoZW4gdGhleSBhcmUiCj4gLQkJCSAg
ICAgICAiIG1hcHBlZCBpbiByZXZlcnNlIG9yZGVyXG4iKTsKPiArCQkJcHV0cygiRXJyb3I6IGNh
bm5vdCBzcGFuIGFjcm9zcyBiYW5rcyB3aGVuIHRoZXkgYXJlIgo+ICsJCQkgICAgICIgbWFwcGVk
IGluIHJldmVyc2Ugb3JkZXJcbiIpOwo+ICAgCQkJcmNvZGUgPSAxOwo+ICAgCQkJYnJlYWs7Cj4g
ICAJCX0KPiBAQCAtMjc5LDggKzI3OCw4IEBAIHN0YXRpYyBpbnQgZG9fZmxpbmZvKHN0cnVjdCBj
bWRfdGJsICpjbWR0cCwgaW50IGZsYWcsIGludCBhcmdjLAo+ICAgCj4gICAjaWZkZWYgQ09ORklH
X01URF9OT1JfRkxBU0gKPiAgIAlpZiAoYXJnYyA9PSAxKSB7CS8qIHByaW50IGluZm8gZm9yIGFs
bCBGTEFTSCBiYW5rcyAqLwo+IC0JCWZvciAoYmFuaz0wOyBiYW5rIDxDT05GSUdfU1lTX01BWF9G
TEFTSF9CQU5LUzsgKytiYW5rKSB7Cj4gLQkJCXByaW50ZiAoIlxuQmFuayAjICVsZDogIiwgYmFu
aysxKTsKPiArCQlmb3IgKGJhbmsgPSAwOyBiYW5rIDwgQ09ORklHX1NZU19NQVhfRkxBU0hfQkFO
S1M7ICsrYmFuaykgewo+ICsJCQlwcmludGYoIlxuQmFuayAjICVsZDogIiwgYmFuayArIDEpOwo+
ICAgCj4gICAJCQlmbGFzaF9wcmludF9pbmZvKCZmbGFzaF9pbmZvW2JhbmtdKTsKPiAgIAkJfQo+
IEBAIC0yODgsMTIgKzI4NywxMiBAQCBzdGF0aWMgaW50IGRvX2ZsaW5mbyhzdHJ1Y3QgY21kX3Ri
bCAqY21kdHAsIGludCBmbGFnLCBpbnQgYXJnYywKPiAgIAl9Cj4gICAKPiAgIAliYW5rID0gaGV4
dG91bChhcmd2WzFdLCBOVUxMKTsKPiAtCWlmICgoYmFuayA8IDEpIHx8IChiYW5rID4gQ09ORklH
X1NZU19NQVhfRkxBU0hfQkFOS1MpKSB7Cj4gLQkJcHJpbnRmICgiT25seSBGTEFTSCBCYW5rcyAj
IDEgLi4uICMgJWQgc3VwcG9ydGVkXG4iLAo+IC0JCQlDT05GSUdfU1lTX01BWF9GTEFTSF9CQU5L
Uyk7Cj4gKwlpZiAoYmFuayA8IDEgfHwgYmFuayA+IENPTkZJR19TWVNfTUFYX0ZMQVNIX0JBTktT
KSB7Cj4gKwkJcHJpbnRmKCJPbmx5IEZMQVNIIEJhbmtzICMgMSAuLi4gIyAlZCBzdXBwb3J0ZWRc
biIsCj4gKwkJICAgICAgIENPTkZJR19TWVNfTUFYX0ZMQVNIX0JBTktTKTsKPiAgIAkJcmV0dXJu
IDE7Cj4gICAJfQo+IC0JcHJpbnRmICgiXG5CYW5rICMgJWxkOiAiLCBiYW5rKTsKPiArCXByaW50
ZigiXG5CYW5rICMgJWxkOiAiLCBiYW5rKTsKPiAgIAlmbGFzaF9wcmludF9pbmZvKCZmbGFzaF9p
bmZvW2JhbmsgLSAxXSk7Cj4gICAjZW5kaWYgLyogQ09ORklHX01URF9OT1JfRkxBU0ggKi8KPiAg
IAlyZXR1cm4gMDsKPiBAQCAtMzE3LDI4ICszMTYsMjkgQEAgc3RhdGljIGludCBkb19mbGVyYXNl
KHN0cnVjdCBjbWRfdGJsICpjbWR0cCwgaW50IGZsYWcsIGludCBhcmdjLAo+ICAgCQlyZXR1cm4g
Q01EX1JFVF9VU0FHRTsKPiAgIAo+ICAgCWlmIChzdHJjbXAoYXJndlsxXSwgImFsbCIpID09IDAp
IHsKPiAtCQlmb3IgKGJhbms9MTsgYmFuazw9Q09ORklHX1NZU19NQVhfRkxBU0hfQkFOS1M7ICsr
YmFuaykgewo+IC0JCQlwcmludGYgKCJFcmFzZSBGbGFzaCBCYW5rICMgJWxkICIsIGJhbmspOwo+
IC0JCQlpbmZvID0gJmZsYXNoX2luZm9bYmFuay0xXTsKPiArCQlmb3IgKGJhbmsgPSAxOyBiYW5r
IDw9IENPTkZJR19TWVNfTUFYX0ZMQVNIX0JBTktTOyArK2JhbmspIHsKPiArCQkJcHJpbnRmKCJF
cmFzZSBGbGFzaCBCYW5rICMgJWxkICIsIGJhbmspOwo+ICsJCQlpbmZvID0gJmZsYXNoX2luZm9b
YmFuayAtIDFdOwo+ICAgCQkJcmNvZGUgPSBmbGFzaF9lcmFzZShpbmZvLCAwLCBpbmZvLT5zZWN0
b3JfY291bnQgLSAxKTsKPiAgIAkJfQo+ICAgCQlyZXR1cm4gcmNvZGU7Cj4gICAJfQo+ICAgCj4g
LQlpZiAoKG4gPSBhYmJyZXZfc3BlYyhhcmd2WzFdLCAmaW5mbywgJnNlY3RfZmlyc3QsICZzZWN0
X2xhc3QpKSAhPSAwKSB7Cj4gKwluID0gYWJicmV2X3NwZWMoYXJndlsxXSwgJmluZm8sICZzZWN0
X2ZpcnN0LCAmc2VjdF9sYXN0KTsKPiArCWlmIChuKSB7Cj4gICAJCWlmIChuIDwgMCkgewo+IC0J
CQlwdXRzICgiQmFkIHNlY3RvciBzcGVjaWZpY2F0aW9uXG4iKTsKPiArCQkJcHV0cygiQmFkIHNl
Y3RvciBzcGVjaWZpY2F0aW9uXG4iKTsKPiAgIAkJCXJldHVybiAxOwo+ICAgCQl9Cj4gLQkJcHJp
bnRmICgiRXJhc2UgRmxhc2ggU2VjdG9ycyAlZC0lZCBpbiBCYW5rICMgJXp1ICIsCj4gLQkJCXNl
Y3RfZmlyc3QsIHNlY3RfbGFzdCwgKGluZm8tZmxhc2hfaW5mbykrMSk7Cj4gKwkJcHJpbnRmKCJF
cmFzZSBGbGFzaCBTZWN0b3JzICVkLSVkIGluIEJhbmsgIyAlenUgIiwKPiArCQkgICAgICAgc2Vj
dF9maXJzdCwgc2VjdF9sYXN0LCAoaW5mbyAtIGZsYXNoX2luZm8pICsgMSk7Cj4gICAJCXJjb2Rl
ID0gZmxhc2hfZXJhc2UoaW5mbywgc2VjdF9maXJzdCwgc2VjdF9sYXN0KTsKPiAgIAkJcmV0dXJu
IHJjb2RlOwo+ICAgCX0KPiAgIAo+ICAgI2lmIGRlZmluZWQoQ09ORklHX0NNRF9NVERQQVJUUykK
PiAgIAkvKiBlcmFzZSA8cGFydC1pZD4gLSBlcmFzZSBwYXJ0aXRpb24gKi8KPiAtCWlmICgoYXJn
YyA9PSAyKSAmJiAobXRkX2lkX3BhcnNlKGFyZ3ZbMV0sIE5VTEwsICZkZXZfdHlwZSwgJmRldl9u
dW0pID09IDApKSB7Cj4gKwlpZiAoYXJnYyA9PSAyICYmIG10ZF9pZF9wYXJzZShhcmd2WzFdLCBO
VUxMLCAmZGV2X3R5cGUsICZkZXZfbnVtKSA9PSAwKSB7Cj4gICAJCW10ZHBhcnRzX2luaXQoKTsK
PiAgIAkJaWYgKGZpbmRfZGV2X2FuZF9wYXJ0KGFyZ3ZbMV0sICZkZXYsICZwbnVtLCAmcGFydCkg
PT0gMCkgewo+ICAgCQkJaWYgKGRldi0+aWQtPnR5cGUgPT0gTVREX0RFVl9UWVBFX05PUikgewo+
IEBAIC0zNDcsMTAgKzM0Nyw5IEBAIHN0YXRpYyBpbnQgZG9fZmxlcmFzZShzdHJ1Y3QgY21kX3Ri
bCAqY21kdHAsIGludCBmbGFnLCBpbnQgYXJnYywKPiAgIAkJCQlhZGRyX2ZpcnN0ID0gcGFydC0+
b2Zmc2V0ICsgaW5mby0+c3RhcnRbMF07Cj4gICAJCQkJYWRkcl9sYXN0ID0gYWRkcl9maXJzdCAr
IHBhcnQtPnNpemUgLSAxOwo+ICAgCj4gLQkJCQlwcmludGYgKCJFcmFzZSBGbGFzaCBQYXJ0aXRp
b24gJXMsICIKPiAtCQkJCQkJImJhbmsgJWxkLCAweCUwOGx4IC0gMHglMDhseCAiLAo+IC0JCQkJ
CQlhcmd2WzFdLCBiYW5rLCBhZGRyX2ZpcnN0LAo+IC0JCQkJCQlhZGRyX2xhc3QpOwo+ICsJCQkJ
cHJpbnRmKCJFcmFzZSBGbGFzaCBQYXJ0aXRpb24gJXMsIGJhbmsgJWxkLCAweCUwOGx4IC0gMHgl
MDhseCAiLAo+ICsJCQkJICAgICAgIGFyZ3ZbMV0sIGJhbmssIGFkZHJfZmlyc3QsCj4gKwkJCQkg
ICAgICAgYWRkcl9sYXN0KTsKPiAgIAo+ICAgCQkJCXJjb2RlID0gZmxhc2hfc2VjdF9lcmFzZShh
ZGRyX2ZpcnN0LCBhZGRyX2xhc3QpOwo+ICAgCQkJCXJldHVybiByY29kZTsKPiBAQCAtMzY3LDE5
ICszNjYsMTkgQEAgc3RhdGljIGludCBkb19mbGVyYXNlKHN0cnVjdCBjbWRfdGJsICpjbWR0cCwg
aW50IGZsYWcsIGludCBhcmdjLAo+ICAgCj4gICAJaWYgKHN0cmNtcChhcmd2WzFdLCAiYmFuayIp
ID09IDApIHsKPiAgIAkJYmFuayA9IGhleHRvdWwoYXJndlsyXSwgTlVMTCk7Cj4gLQkJaWYgKChi
YW5rIDwgMSkgfHwgKGJhbmsgPiBDT05GSUdfU1lTX01BWF9GTEFTSF9CQU5LUykpIHsKPiAtCQkJ
cHJpbnRmICgiT25seSBGTEFTSCBCYW5rcyAjIDEgLi4uICMgJWQgc3VwcG9ydGVkXG4iLAo+IC0J
CQkJQ09ORklHX1NZU19NQVhfRkxBU0hfQkFOS1MpOwo+ICsJCWlmIChiYW5rIDwgMSB8fCBiYW5r
ID4gQ09ORklHX1NZU19NQVhfRkxBU0hfQkFOS1MpIHsKPiArCQkJcHJpbnRmKCJPbmx5IEZMQVNI
IEJhbmtzICMgMSAuLi4gIyAlZCBzdXBwb3J0ZWRcbiIsCj4gKwkJCSAgICAgICBDT05GSUdfU1lT
X01BWF9GTEFTSF9CQU5LUyk7Cj4gICAJCQlyZXR1cm4gMTsKPiAgIAkJfQo+IC0JCXByaW50ZiAo
IkVyYXNlIEZsYXNoIEJhbmsgIyAlbGQgIiwgYmFuayk7Cj4gLQkJaW5mbyA9ICZmbGFzaF9pbmZv
W2JhbmstMV07Cj4gKwkJcHJpbnRmKCJFcmFzZSBGbGFzaCBCYW5rICMgJWxkICIsIGJhbmspOwo+
ICsJCWluZm8gPSAmZmxhc2hfaW5mb1tiYW5rIC0gMV07Cj4gICAJCXJjb2RlID0gZmxhc2hfZXJh
c2UoaW5mbywgMCwgaW5mby0+c2VjdG9yX2NvdW50IC0gMSk7Cj4gICAJCXJldHVybiByY29kZTsK
PiAgIAl9Cj4gICAKPiAtCWlmIChhZGRyX3NwZWMoYXJndlsxXSwgYXJndlsyXSwgJmFkZHJfZmly
c3QsICZhZGRyX2xhc3QpIDwgMCl7Cj4gLQkJcHJpbnRmICgiQmFkIGFkZHJlc3MgZm9ybWF0XG4i
KTsKPiArCWlmIChhZGRyX3NwZWMoYXJndlsxXSwgYXJndlsyXSwgJmFkZHJfZmlyc3QsICZhZGRy
X2xhc3QpIDwgMCkgewo+ICsJCXByaW50ZigiQmFkIGFkZHJlc3MgZm9ybWF0XG4iKTsKPiAgIAkJ
cmV0dXJuIDE7Cj4gICAJfQo+ICAgCj4gQEAgLTQwMywxNCArNDAyLDEzIEBAIGludCBmbGFzaF9z
ZWN0X2VyYXNlKHVsb25nIGFkZHJfZmlyc3QsIHVsb25nIGFkZHJfbGFzdCkKPiAgIAlpbnQgcGxh
bm5lZDsKPiAgIAlpbnQgcmNvZGUgPSAwOwo+ICAgCj4gLQlyY29kZSA9IGZsYXNoX2ZpbGxfc2Vj
dF9yYW5nZXMgKGFkZHJfZmlyc3QsIGFkZHJfbGFzdCwKPiAtCQkJCQlzX2ZpcnN0LCBzX2xhc3Qs
ICZwbGFubmVkICk7Cj4gKwlyY29kZSA9IGZsYXNoX2ZpbGxfc2VjdF9yYW5nZXMoYWRkcl9maXJz
dCwgYWRkcl9sYXN0LCBzX2ZpcnN0LCBzX2xhc3QsICZwbGFubmVkKTsKPiAgIAo+IC0JaWYgKHBs
YW5uZWQgJiYgKHJjb2RlID09IDApKSB7Cj4gLQkJZm9yIChiYW5rPTAsaW5mbyA9ICZmbGFzaF9p
bmZvWzBdOwo+IC0JCSAgICAgKGJhbmsgPCBDT05GSUdfU1lTX01BWF9GTEFTSF9CQU5LUykgJiYg
KHJjb2RlID09IDApOwo+ICsJaWYgKHBsYW5uZWQgJiYgcmNvZGUgPT0gMCkgewo+ICsJCWZvciAo
YmFuayA9IDAsIGluZm8gPSAmZmxhc2hfaW5mb1swXTsKPiArCQkgICAgIGJhbmsgPCBDT05GSUdf
U1lTX01BWF9GTEFTSF9CQU5LUyAmJiByY29kZSA9PSAwOwo+ICAgCQkgICAgICsrYmFuaywgKytp
bmZvKSB7Cj4gLQkJCWlmIChzX2ZpcnN0W2JhbmtdPj0wKSB7Cj4gKwkJCWlmIChzX2ZpcnN0W2Jh
bmtdID49IDApIHsKPiAgIAkJCQllcmFzZWQgKz0gc19sYXN0W2JhbmtdIC0gc19maXJzdFtiYW5r
XSArIDE7Cj4gICAJCQkJZGVidWcoIkVyYXNlIEZsYXNoIGZyb20gMHglMDhseCB0byAweCUwOGx4
IGluIEJhbmsgIyAlbGQgIiwKPiAgIAkJCQkgICAgICBpbmZvLT5zdGFydFtzX2ZpcnN0W2Jhbmtd
XSwKPiBAQCAtNDI1LDggKzQyMyw3IEBAIGludCBmbGFzaF9zZWN0X2VyYXNlKHVsb25nIGFkZHJf
Zmlyc3QsIHVsb25nIGFkZHJfbGFzdCkKPiAgIAkJaWYgKHJjb2RlID09IDApCj4gICAJCQlwcmlu
dGYoIkVyYXNlZCAlZCBzZWN0b3JzXG4iLCBlcmFzZWQpOwo+ICAgCX0gZWxzZSBpZiAocmNvZGUg
PT0gMCkgewo+IC0JCXB1dHMgKCJFcnJvcjogc3RhcnQgYW5kL29yIGVuZCBhZGRyZXNzIgo+IC0J
CQkiIG5vdCBvbiBzZWN0b3IgYm91bmRhcnlcbiIpOwo+ICsJCXB1dHMoIkVycm9yOiBzdGFydCBh
bmQvb3IgZW5kIGFkZHJlc3Mgbm90IG9uIHNlY3RvciBib3VuZGFyeVxuIik7Cj4gICAJCXJjb2Rl
ID0gMTsKPiAgIAl9Cj4gICAJcmV0dXJuIHJjb2RlOwo+IEBAIC00NjYsNTAgKzQ2Myw1MiBAQCBz
dGF0aWMgaW50IGRvX3Byb3RlY3Qoc3RydWN0IGNtZF90YmwgKmNtZHRwLCBpbnQgZmxhZywgaW50
IGFyZ2MsCj4gICAKPiAgICNpZmRlZiBDT05GSUdfTVREX05PUl9GTEFTSAo+ICAgCWlmIChzdHJj
bXAoYXJndlsyXSwgImFsbCIpID09IDApIHsKPiAtCQlmb3IgKGJhbms9MTsgYmFuazw9Q09ORklH
X1NZU19NQVhfRkxBU0hfQkFOS1M7ICsrYmFuaykgewo+IC0JCQlpbmZvID0gJmZsYXNoX2luZm9b
YmFuay0xXTsKPiAtCQkJaWYgKGluZm8tPmZsYXNoX2lkID09IEZMQVNIX1VOS05PV04pIHsKPiAr
CQlmb3IgKGJhbmsgPSAxOyBiYW5rIDw9IENPTkZJR19TWVNfTUFYX0ZMQVNIX0JBTktTOyArK2Jh
bmspIHsKPiArCQkJaW5mbyA9ICZmbGFzaF9pbmZvW2JhbmsgLSAxXTsKPiArCQkJaWYgKGluZm8t
PmZsYXNoX2lkID09IEZMQVNIX1VOS05PV04pCj4gICAJCQkJY29udGludWU7Cj4gLQkJCX0KPiAt
CQkJcHJpbnRmICgiJXNQcm90ZWN0IEZsYXNoIEJhbmsgIyAlbGRcbiIsCj4gLQkJCQlwID8gIiIg
OiAiVW4tIiwgYmFuayk7Cj4gICAKPiAtCQkJZm9yIChpPTA7IGk8aW5mby0+c2VjdG9yX2NvdW50
OyArK2kpIHsKPiArCQkJcHJpbnRmKCIlc1Byb3RlY3QgRmxhc2ggQmFuayAjICVsZFxuIiwKPiAr
CQkJICAgICAgIHAgPyAiIiA6ICJVbi0iLCBiYW5rKTsKPiArCj4gKwkJCWZvciAoaSA9IDA7IGkg
PCBpbmZvLT5zZWN0b3JfY291bnQ7ICsraSkgewo+ICAgI2lmIGRlZmluZWQoQ09ORklHX1NZU19G
TEFTSF9QUk9URUNUSU9OKQo+ICAgCQkJCWlmIChmbGFzaF9yZWFsX3Byb3RlY3QoaW5mbywgaSwg
cCkpCj4gICAJCQkJCXJjb2RlID0gMTsKPiAtCQkJCXB1dGMgKCcuJyk7Cj4gKwkJCQlwdXRjKCcu
Jyk7Cj4gICAjZWxzZQo+ICAgCQkJCWluZm8tPnByb3RlY3RbaV0gPSBwOwo+ICAgI2VuZGlmCS8q
IENPTkZJR19TWVNfRkxBU0hfUFJPVEVDVElPTiAqLwo+ICAgCQkJfQo+ICAgI2lmIGRlZmluZWQo
Q09ORklHX1NZU19GTEFTSF9QUk9URUNUSU9OKQo+IC0JCQlpZiAoIXJjb2RlKSBwdXRzICgiIGRv
bmVcbiIpOwo+ICsJCQlpZiAoIXJjb2RlKQo+ICsJCQkJcHV0cygiIGRvbmVcbiIpOwo+ICAgI2Vu
ZGlmCS8qIENPTkZJR19TWVNfRkxBU0hfUFJPVEVDVElPTiAqLwo+ICAgCQl9Cj4gICAJCXJldHVy
biByY29kZTsKPiAgIAl9Cj4gLQo+IC0JaWYgKChuID0gYWJicmV2X3NwZWMoYXJndlsyXSwgJmlu
Zm8sICZzZWN0X2ZpcnN0LCAmc2VjdF9sYXN0KSkgIT0gMCkgewo+ICsJbiA9IGFiYnJldl9zcGVj
KGFyZ3ZbMl0sICZpbmZvLCAmc2VjdF9maXJzdCwgJnNlY3RfbGFzdCk7Cj4gKwlpZiAobikgewo+
ICAgCQlpZiAobiA8IDApIHsKPiAtCQkJcHV0cyAoIkJhZCBzZWN0b3Igc3BlY2lmaWNhdGlvblxu
Iik7Cj4gKwkJCXB1dHMoIkJhZCBzZWN0b3Igc3BlY2lmaWNhdGlvblxuIik7Cj4gICAJCQlyZXR1
cm4gMTsKPiAgIAkJfQo+ICAgCQlwcmludGYoIiVzUHJvdGVjdCBGbGFzaCBTZWN0b3JzICVkLSVk
IGluIEJhbmsgIyAlenVcbiIsCj4gLQkJCXAgPyAiIiA6ICJVbi0iLCBzZWN0X2ZpcnN0LCBzZWN0
X2xhc3QsCj4gLQkJCShpbmZvLWZsYXNoX2luZm8pKzEpOwo+ICsJCSAgICAgICBwID8gIiIgOiAi
VW4tIiwgc2VjdF9maXJzdCwgc2VjdF9sYXN0LAo+ICsJCSAgICAgICAoaW5mbyAtIGZsYXNoX2lu
Zm8pICsgMSk7Cj4gICAJCWZvciAoaSA9IHNlY3RfZmlyc3Q7IGkgPD0gc2VjdF9sYXN0OyBpKysp
IHsKPiAgICNpZiBkZWZpbmVkKENPTkZJR19TWVNfRkxBU0hfUFJPVEVDVElPTikKPiAgIAkJCWlm
IChmbGFzaF9yZWFsX3Byb3RlY3QoaW5mbywgaSwgcCkpCj4gICAJCQkJcmNvZGUgPSAgMTsKPiAt
CQkJcHV0YyAoJy4nKTsKPiArCQkJcHV0YygnLicpOwo+ICAgI2Vsc2UKPiAgIAkJCWluZm8tPnBy
b3RlY3RbaV0gPSBwOwo+ICAgI2VuZGlmCS8qIENPTkZJR19TWVNfRkxBU0hfUFJPVEVDVElPTiAq
Lwo+ICAgCQl9Cj4gICAKPiAgICNpZiBkZWZpbmVkKENPTkZJR19TWVNfRkxBU0hfUFJPVEVDVElP
TikKPiAtCQlpZiAoIXJjb2RlKSBwdXRzICgiIGRvbmVcbiIpOwo+ICsJCWlmICghcmNvZGUpCj4g
KwkJCXB1dHMoIiBkb25lXG4iKTsKPiAgICNlbmRpZgkvKiBDT05GSUdfU1lTX0ZMQVNIX1BST1RF
Q1RJT04gKi8KPiAgIAo+ICAgCQlyZXR1cm4gcmNvZGU7Cj4gQEAgLTUxNyw3ICs1MTYsNyBAQCBz
dGF0aWMgaW50IGRvX3Byb3RlY3Qoc3RydWN0IGNtZF90YmwgKmNtZHRwLCBpbnQgZmxhZywgaW50
IGFyZ2MsCj4gICAKPiAgICNpZiBkZWZpbmVkKENPTkZJR19DTURfTVREUEFSVFMpCj4gICAJLyog
cHJvdGVjdCBvbi9vZmYgPHBhcnQtaWQ+ICovCj4gLQlpZiAoKGFyZ2MgPT0gMykgJiYgKG10ZF9p
ZF9wYXJzZShhcmd2WzJdLCBOVUxMLCAmZGV2X3R5cGUsICZkZXZfbnVtKSA9PSAwKSkgewo+ICsJ
aWYgKGFyZ2MgPT0gMyAmJiBtdGRfaWRfcGFyc2UoYXJndlsyXSwgTlVMTCwgJmRldl90eXBlLCAm
ZGV2X251bSkgPT0gMCkgewo+ICAgCQltdGRwYXJ0c19pbml0KCk7Cj4gICAJCWlmIChmaW5kX2Rl
dl9hbmRfcGFydChhcmd2WzJdLCAmZGV2LCAmcG51bSwgJnBhcnQpID09IDApIHsKPiAgIAkJCWlm
IChkZXYtPmlkLT50eXBlID09IE1URF9ERVZfVFlQRV9OT1IpIHsKPiBAQCAtNTI2LDEwICs1MjUs
MTAgQEAgc3RhdGljIGludCBkb19wcm90ZWN0KHN0cnVjdCBjbWRfdGJsICpjbWR0cCwgaW50IGZs
YWcsIGludCBhcmdjLAo+ICAgCQkJCWFkZHJfZmlyc3QgPSBwYXJ0LT5vZmZzZXQgKyBpbmZvLT5z
dGFydFswXTsKPiAgIAkJCQlhZGRyX2xhc3QgPSBhZGRyX2ZpcnN0ICsgcGFydC0+c2l6ZSAtIDE7
Cj4gICAKPiAtCQkJCXByaW50ZiAoIiVzUHJvdGVjdCBGbGFzaCBQYXJ0aXRpb24gJXMsICIKPiAt
CQkJCQkJImJhbmsgJWxkLCAweCUwOGx4IC0gMHglMDhseFxuIiwKPiAtCQkJCQkJcCA/ICIiIDog
IlVuIiwgYXJndlsxXSwKPiAtCQkJCQkJYmFuaywgYWRkcl9maXJzdCwgYWRkcl9sYXN0KTsKPiAr
CQkJCXByaW50ZigiJXNQcm90ZWN0IEZsYXNoIFBhcnRpdGlvbiAlcywgIgo+ICsJCQkJICAgICAg
ICJiYW5rICVsZCwgMHglMDhseCAtIDB4JTA4bHhcbiIsCj4gKwkJCQkgICAgICAgcCA/ICIiIDog
IlVuIiwgYXJndlsxXSwKPiArCQkJCSAgICAgICBiYW5rLCBhZGRyX2ZpcnN0LCBhZGRyX2xhc3Qp
Owo+ICAgCj4gICAJCQkJcmNvZGUgPSBmbGFzaF9zZWN0X3Byb3RlY3QocCwgYWRkcl9maXJzdCwK
PiAgIAkJCQkJCQkgICBhZGRyX2xhc3QpOwo+IEBAIC01MzcsNyArNTM2LDcgQEAgc3RhdGljIGlu
dCBkb19wcm90ZWN0KHN0cnVjdCBjbWRfdGJsICpjbWR0cCwgaW50IGZsYWcsIGludCBhcmdjLAo+
ICAgCQkJfQo+ICAgCj4gICAJCQlwcmludGYoImNhbm5vdCAlc3Byb3RlY3QsIG5vdCBhIE5PUiBk
ZXZpY2VcbiIsCj4gLQkJCQkJcCA/ICIiIDogInVuIik7Cj4gKwkJCSAgICAgICBwID8gIiIgOiAi
dW4iKTsKPiAgIAkJCXJldHVybiAxOwo+ICAgCQl9Cj4gICAJfQo+IEBAIC01NDgsMzcgKzU0Nywz
OCBAQCBzdGF0aWMgaW50IGRvX3Byb3RlY3Qoc3RydWN0IGNtZF90YmwgKmNtZHRwLCBpbnQgZmxh
ZywgaW50IGFyZ2MsCj4gICAKPiAgIAlpZiAoc3RyY21wKGFyZ3ZbMl0sICJiYW5rIikgPT0gMCkg
ewo+ICAgCQliYW5rID0gaGV4dG91bChhcmd2WzNdLCBOVUxMKTsKPiAtCQlpZiAoKGJhbmsgPCAx
KSB8fCAoYmFuayA+IENPTkZJR19TWVNfTUFYX0ZMQVNIX0JBTktTKSkgewo+IC0JCQlwcmludGYg
KCJPbmx5IEZMQVNIIEJhbmtzICMgMSAuLi4gIyAlZCBzdXBwb3J0ZWRcbiIsCj4gLQkJCQlDT05G
SUdfU1lTX01BWF9GTEFTSF9CQU5LUyk7Cj4gKwkJaWYgKGJhbmsgPCAxIHx8IGJhbmsgPiBDT05G
SUdfU1lTX01BWF9GTEFTSF9CQU5LUykgewo+ICsJCQlwcmludGYoIk9ubHkgRkxBU0ggQmFua3Mg
IyAxIC4uLiAjICVkIHN1cHBvcnRlZFxuIiwKPiArCQkJICAgICAgIENPTkZJR19TWVNfTUFYX0ZM
QVNIX0JBTktTKTsKPiAgIAkJCXJldHVybiAxOwo+ICAgCQl9Cj4gLQkJcHJpbnRmICgiJXNQcm90
ZWN0IEZsYXNoIEJhbmsgIyAlbGRcbiIsCj4gLQkJCXAgPyAiIiA6ICJVbi0iLCBiYW5rKTsKPiAt
CQlpbmZvID0gJmZsYXNoX2luZm9bYmFuay0xXTsKPiArCQlwcmludGYoIiVzUHJvdGVjdCBGbGFz
aCBCYW5rICMgJWxkXG4iLAo+ICsJCSAgICAgICBwID8gIiIgOiAiVW4tIiwgYmFuayk7Cj4gKwkJ
aW5mbyA9ICZmbGFzaF9pbmZvW2JhbmsgLSAxXTsKPiAgIAo+ICAgCQlpZiAoaW5mby0+Zmxhc2hf
aWQgPT0gRkxBU0hfVU5LTk9XTikgewo+IC0JCQlwdXRzICgibWlzc2luZyBvciB1bmtub3duIEZM
QVNIIHR5cGVcbiIpOwo+ICsJCQlwdXRzKCJtaXNzaW5nIG9yIHVua25vd24gRkxBU0ggdHlwZVxu
Iik7Cj4gICAJCQlyZXR1cm4gMTsKPiAgIAkJfQo+IC0JCWZvciAoaT0wOyBpPGluZm8tPnNlY3Rv
cl9jb3VudDsgKytpKSB7Cj4gKwkJZm9yIChpID0gMDsgaSA8IGluZm8tPnNlY3Rvcl9jb3VudDsg
KytpKSB7Cj4gICAjaWYgZGVmaW5lZChDT05GSUdfU1lTX0ZMQVNIX1BST1RFQ1RJT04pCj4gICAJ
CQlpZiAoZmxhc2hfcmVhbF9wcm90ZWN0KGluZm8sIGksIHApKQo+ICAgCQkJCXJjb2RlID0gIDE7
Cj4gLQkJCXB1dGMgKCcuJyk7Cj4gKwkJCXB1dGMoJy4nKTsKPiAgICNlbHNlCj4gICAJCQlpbmZv
LT5wcm90ZWN0W2ldID0gcDsKPiAgICNlbmRpZgkvKiBDT05GSUdfU1lTX0ZMQVNIX1BST1RFQ1RJ
T04gKi8KPiAgIAkJfQo+ICAgCj4gICAjaWYgZGVmaW5lZChDT05GSUdfU1lTX0ZMQVNIX1BST1RF
Q1RJT04pCj4gLQkJaWYgKCFyY29kZSkgcHV0cyAoIiBkb25lXG4iKTsKPiArCQlpZiAoIXJjb2Rl
KQo+ICsJCQlwdXRzKCIgZG9uZVxuIik7Cj4gICAjZW5kaWYJLyogQ09ORklHX1NZU19GTEFTSF9Q
Uk9URUNUSU9OICovCj4gICAKPiAgIAkJcmV0dXJuIHJjb2RlOwo+ICAgCX0KPiAgIAo+IC0JaWYg
KGFkZHJfc3BlYyhhcmd2WzJdLCBhcmd2WzNdLCAmYWRkcl9maXJzdCwgJmFkZHJfbGFzdCkgPCAw
KXsKPiArCWlmIChhZGRyX3NwZWMoYXJndlsyXSwgYXJndlszXSwgJmFkZHJfZmlyc3QsICZhZGRy
X2xhc3QpIDwgMCkgewo+ICAgCQlwcmludGYoIkJhZCBhZGRyZXNzIGZvcm1hdFxuIik7Cj4gICAJ
CXJldHVybiAxOwo+ICAgCX0KPiBAQCAtNjAxLDI2ICs2MDEsMjYgQEAgaW50IGZsYXNoX3NlY3Rf
cHJvdGVjdChpbnQgcCwgdWxvbmcgYWRkcl9maXJzdCwgdWxvbmcgYWRkcl9sYXN0KQo+ICAgCWlu
dCBwbGFubmVkOwo+ICAgCWludCByY29kZTsKPiAgIAo+IC0JcmNvZGUgPSBmbGFzaF9maWxsX3Nl
Y3RfcmFuZ2VzKCBhZGRyX2ZpcnN0LCBhZGRyX2xhc3QsIHNfZmlyc3QsIHNfbGFzdCwgJnBsYW5u
ZWQgKTsKPiArCXJjb2RlID0gZmxhc2hfZmlsbF9zZWN0X3JhbmdlcyhhZGRyX2ZpcnN0LCBhZGRy
X2xhc3QsIHNfZmlyc3QsIHNfbGFzdCwgJnBsYW5uZWQpOwo+ICAgCj4gICAJcHJvdGVjdGVkID0g
MDsKPiAgIAo+IC0JaWYgKHBsYW5uZWQgJiYgKHJjb2RlID09IDApKSB7Cj4gLQkJZm9yIChiYW5r
PTAsaW5mbyA9ICZmbGFzaF9pbmZvWzBdOyBiYW5rIDwgQ09ORklHX1NZU19NQVhfRkxBU0hfQkFO
S1M7ICsrYmFuaywgKytpbmZvKSB7Cj4gLQkJCWlmIChpbmZvLT5mbGFzaF9pZCA9PSBGTEFTSF9V
TktOT1dOKSB7Cj4gKwlpZiAocGxhbm5lZCAmJiByY29kZSA9PSAwKSB7Cj4gKwkJZm9yIChiYW5r
ID0gMCwgaW5mbyA9ICZmbGFzaF9pbmZvWzBdOwo+ICsJCSAgICAgYmFuayA8IENPTkZJR19TWVNf
TUFYX0ZMQVNIX0JBTktTOyArK2JhbmssICsraW5mbykgewo+ICsJCQlpZiAoaW5mby0+Zmxhc2hf
aWQgPT0gRkxBU0hfVU5LTk9XTikKPiAgIAkJCQljb250aW51ZTsKPiAtCQkJfQo+ICAgCj4gLQkJ
CWlmIChzX2ZpcnN0W2JhbmtdPj0wICYmIHNfZmlyc3RbYmFua108PXNfbGFzdFtiYW5rXSkgewo+
ICsJCQlpZiAoc19maXJzdFtiYW5rXSA+PSAwICYmIHNfZmlyc3RbYmFua10gPD0gc19sYXN0W2Jh
bmtdKSB7Cj4gICAJCQkJZGVidWcoIiVzUHJvdGVjdGluZyBzZWN0b3JzICVkLi4lZCBpbiBiYW5r
ICVsZFxuIiwKPiAgIAkJCQkgICAgICBwID8gIiIgOiAiVW4tIiwgc19maXJzdFtiYW5rXSwKPiAg
IAkJCQkgICAgICBzX2xhc3RbYmFua10sIGJhbmsgKyAxKTsKPiAgIAkJCQlwcm90ZWN0ZWQgKz0g
c19sYXN0W2JhbmtdIC0gc19maXJzdFtiYW5rXSArIDE7Cj4gLQkJCQlmb3IgKGk9c19maXJzdFti
YW5rXTsgaTw9c19sYXN0W2JhbmtdOyArK2kpIHsKPiArCQkJCWZvciAoaSA9IHNfZmlyc3RbYmFu
a107IGkgPD0gc19sYXN0W2JhbmtdOyArK2kpIHsKPiAgICNpZiBkZWZpbmVkKENPTkZJR19TWVNf
RkxBU0hfUFJPVEVDVElPTikKPiAgIAkJCQkJaWYgKGZsYXNoX3JlYWxfcHJvdGVjdChpbmZvLCBp
LCBwKSkKPiAgIAkJCQkJCXJjb2RlID0gMTsKPiAtCQkJCQlwdXRjICgnLicpOwo+ICsJCQkJCXB1
dGMoJy4nKTsKPiAgICNlbHNlCj4gICAJCQkJCWluZm8tPnByb3RlY3RbaV0gPSBwOwo+ICAgI2Vu
ZGlmCS8qIENPTkZJR19TWVNfRkxBU0hfUFJPVEVDVElPTiAqLwo+IEBAIC02MjgsMjEgKzYyOCwx
OSBAQCBpbnQgZmxhc2hfc2VjdF9wcm90ZWN0KGludCBwLCB1bG9uZyBhZGRyX2ZpcnN0LCB1bG9u
ZyBhZGRyX2xhc3QpCj4gICAJCQl9Cj4gICAJCX0KPiAgICNpZiBkZWZpbmVkKENPTkZJR19TWVNf
RkxBU0hfUFJPVEVDVElPTikKPiAtCQlwdXRzICgiIGRvbmVcbiIpOwo+ICsJCXB1dHMoIiBkb25l
XG4iKTsKPiAgICNlbmRpZgkvKiBDT05GSUdfU1lTX0ZMQVNIX1BST1RFQ1RJT04gKi8KPiAgIAo+
IC0JCXByaW50ZiAoIiVzUHJvdGVjdGVkICVkIHNlY3RvcnNcbiIsCj4gLQkJCXAgPyAiIiA6ICJV
bi0iLCBwcm90ZWN0ZWQpOwo+ICsJCXByaW50ZigiJXNQcm90ZWN0ZWQgJWQgc2VjdG9yc1xuIiwK
PiArCQkgICAgICAgcCA/ICIiIDogIlVuLSIsIHByb3RlY3RlZCk7Cj4gICAJfSBlbHNlIGlmIChy
Y29kZSA9PSAwKSB7Cj4gLQkJcHV0cyAoIkVycm9yOiBzdGFydCBhbmQvb3IgZW5kIGFkZHJlc3Mi
Cj4gLQkJCSIgbm90IG9uIHNlY3RvciBib3VuZGFyeVxuIik7Cj4gKwkJcHV0cygiRXJyb3I6IHN0
YXJ0IGFuZC9vciBlbmQgYWRkcmVzcyBub3Qgb24gc2VjdG9yIGJvdW5kYXJ5XG4iKTsKPiAgIAkJ
cmNvZGUgPSAxOwo+ICAgCX0KPiAgIAlyZXR1cm4gcmNvZGU7Cj4gICB9Cj4gICAjZW5kaWYgLyog
Q09ORklHX01URF9OT1JfRkxBU0ggKi8KPiAgIAo+IC0KPiAgIC8qKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KPiAgICNpZiBkZWZpbmVkKENPTkZJR19D
TURfTVREUEFSVFMpCj4gICAjIGRlZmluZSBUTVBfRVJBU0UJImVyYXNlIDxwYXJ0LWlkPlxuICAg
IC0gZXJhc2UgcGFydGl0aW9uXG4iCj4gQEAgLTY2Nyw4ICs2NjUsNyBAQCBVX0JPT1RfQ01EKAo+
ICAgCSJzdGFydCBlbmRcbiIKPiAgIAkiICAgIC0gZXJhc2UgRkxBU0ggZnJvbSBhZGRyICdzdGFy
dCcgdG8gYWRkciAnZW5kJ1xuIgo+ICAgCSJlcmFzZSBzdGFydCArbGVuXG4iCj4gLQkiICAgIC0g
ZXJhc2UgRkxBU0ggZnJvbSBhZGRyICdzdGFydCcgdG8gdGhlIGVuZCBvZiBzZWN0ICIKPiAtCSJ3
L2FkZHIgJ3N0YXJ0JysnbGVuJy0xXG4iCj4gKwkiICAgIC0gZXJhc2UgRkxBU0ggZnJvbSBhZGRy
ICdzdGFydCcgdG8gdGhlIGVuZCBvZiBzZWN0IHcvYWRkciAnc3RhcnQnKydsZW4nLTFcbiIKPiAg
IAkiZXJhc2UgTjpTRlstU0xdXG4gICAgLSBlcmFzZSBzZWN0b3JzIFNGLVNMIGluIEZMQVNIIGJh
bmsgIyBOXG4iCj4gICAJImVyYXNlIGJhbmsgTlxuICAgIC0gZXJhc2UgRkxBU0ggYmFuayAjIE5c
biIKPiAgIAlUTVBfRVJBU0UKPiBAQCAtNjgxLDggKzY3OCw3IEBAIFVfQk9PVF9DTUQoCj4gICAJ
Im9uICBzdGFydCBlbmRcbiIKPiAgIAkiICAgIC0gcHJvdGVjdCBGTEFTSCBmcm9tIGFkZHIgJ3N0
YXJ0JyB0byBhZGRyICdlbmQnXG4iCj4gICAJInByb3RlY3Qgb24gc3RhcnQgK2xlblxuIgo+IC0J
IiAgICAtIHByb3RlY3QgRkxBU0ggZnJvbSBhZGRyICdzdGFydCcgdG8gZW5kIG9mIHNlY3QgIgo+
IC0JIncvYWRkciAnc3RhcnQnKydsZW4nLTFcbiIKPiArCSIgICAgLSBwcm90ZWN0IEZMQVNIIGZy
b20gYWRkciAnc3RhcnQnIHRvIGVuZCBvZiBzZWN0IHcvYWRkciAnc3RhcnQnKydsZW4nLTFcbiIK
PiAgIAkicHJvdGVjdCBvbiAgTjpTRlstU0xdXG4iCj4gICAJIiAgICAtIHByb3RlY3Qgc2VjdG9y
cyBTRi1TTCBpbiBGTEFTSCBiYW5rICMgTlxuIgo+ICAgCSJwcm90ZWN0IG9uICBiYW5rIE5cbiAg
ICAtIHByb3RlY3QgRkxBU0ggYmFuayAjIE5cbiIKPiBAQCAtNjkxLDggKzY4Nyw3IEBAIFVfQk9P
VF9DTUQoCj4gICAJInByb3RlY3Qgb2ZmIHN0YXJ0IGVuZFxuIgo+ICAgCSIgICAgLSBtYWtlIEZM
QVNIIGZyb20gYWRkciAnc3RhcnQnIHRvIGFkZHIgJ2VuZCcgd3JpdGFibGVcbiIKPiAgIAkicHJv
dGVjdCBvZmYgc3RhcnQgK2xlblxuIgo+IC0JIiAgICAtIG1ha2UgRkxBU0ggZnJvbSBhZGRyICdz
dGFydCcgdG8gZW5kIG9mIHNlY3QgIgo+IC0JIncvYWRkciAnc3RhcnQnKydsZW4nLTEgd3J0YWJs
ZVxuIgo+ICsJIiAgICAtIG1ha2UgRkxBU0ggZnJvbSBhZGRyICdzdGFydCcgdG8gZW5kIG9mIHNl
Y3Qgdy9hZGRyICdzdGFydCcrJ2xlbictMSB3cnRhYmxlXG4iCj4gICAJInByb3RlY3Qgb2ZmIE46
U0ZbLVNMXVxuIgo+ICAgCSIgICAgLSBtYWtlIHNlY3RvcnMgU0YtU0wgd3JpdGFibGUgaW4gRkxB
U0ggYmFuayAjIE5cbiIKPiAgIAkicHJvdGVjdCBvZmYgYmFuayBOXG4gICAgLSBtYWtlIEZMQVNI
IGJhbmsgIyBOIHdyaXRhYmxlXG4iCj4gCgpWaWVsZSBHcsO8w59lLApTdGVmYW4gUm9lc2UKCi0t
IApERU5YIFNvZnR3YXJlIEVuZ2luZWVyaW5nIEdtYkgsICAgICAgTWFuYWdpbmcgRGlyZWN0b3I6
IFdvbGZnYW5nIERlbmsKSFJCIDE2NTIzNSBNdW5pY2gsIE9mZmljZTogS2lyY2hlbnN0ci41LCBE
LTgyMTk0IEdyb2ViZW56ZWxsLCBHZXJtYW55ClBob25lOiAoKzQ5KS04MTQyLTY2OTg5LTUxIEZh
eDogKCs0OSktODE0Mi02Njk4OS04MCBFbWFpbDogc3JAZGVueC5kZQpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpVYm9vdC1zdG0zMiBtYWlsaW5nIGxpc3QK
VWJvb3Qtc3RtMzJAc3QtbWQtbWFpbG1hbi5zdG9ybXJlcGx5LmNvbQpodHRwczovL3N0LW1kLW1h
aWxtYW4uc3Rvcm1yZXBseS5jb20vbWFpbG1hbi9saXN0aW5mby91Ym9vdC1zdG0zMgo=
