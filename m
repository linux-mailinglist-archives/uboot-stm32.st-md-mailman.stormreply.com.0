Return-Path: <uboot-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+uboot-stm32@lfdr.de
Delivered-To: lists+uboot-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id 53A654DD5CF
	for <lists+uboot-stm32@lfdr.de>; Fri, 18 Mar 2022 09:07:23 +0100 (CET)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id E9635C5F1EE;
	Fri, 18 Mar 2022 08:07:22 +0000 (UTC)
Received: from mail-oo1-f41.google.com (mail-oo1-f41.google.com
 [209.85.161.41])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 4B6D0C5E2CC
 for <uboot-stm32@st-md-mailman.stormreply.com>;
 Fri, 18 Mar 2022 08:07:21 +0000 (UTC)
Received: by mail-oo1-f41.google.com with SMTP id
 y27-20020a4a9c1b000000b0032129651bb0so9348022ooj.2
 for <uboot-stm32@st-md-mailman.stormreply.com>;
 Fri, 18 Mar 2022 01:07:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc:content-transfer-encoding;
 bh=bfz8YxUE+mazVU06Bil/J6dwU039v9zeAiuYCWsDi9o=;
 b=Fnz2HY0qYZu0sE19fsjNqb1e3j2eeNVQcpVzxO0v7BDIi4Og/Dygts+v0SmjFo+nrl
 AKjOEJK/10ZuX9iBm8N+wxwPo2G209a8LAVMuLNcTfohksrHL5amzwNAgZCqk/rnAwiQ
 pnSzqrOPytWs0mvF4nhKLkRJ0Bdhy99kX7adnmL/OF3xVlr6qoFkQKWRjuKpsNk4bGvh
 b5gvFTHBj17oToa/owEk1CDkyEUTNlNQMEykapQ9+zazZRay2mYBql0y35SZUEzjiYwb
 veMOSv+bZc5HY9KjSr5z9be52c8aSQ1hVPKbr1lLAL4aanOfuYH7TTVzq4xBrBws8WSe
 dKKw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=bfz8YxUE+mazVU06Bil/J6dwU039v9zeAiuYCWsDi9o=;
 b=S7u3yqSlvMpMNf2ZpaNzBjg2orVU7B+P8negqrUwlMv02IJU0/n7LxpRC59cR+UYGu
 cfEsPi1uQxBOZVGLqzgOLbG49jifMgUL6IJaFCwYb4kWTvKzoRJTS2adt6sEYqCwwpj+
 l4kSDsGH/2V5yRghF8u5FmdFbprnPO3RwN+zC/LICqaLh0jYtE+fH4wnEHDxkhZQdTkE
 KkOWxZhsUVbH2g/npW+bL42S8VmkB0wfsTOOmmw01GTU0UvRNd9sEq01itMq9zzGq+/P
 jmawEQNxlyg7f7eWbn/GbM6zB8E+++K6qaKYhBgj/wemTXOiOeFu6ERIOGV/xTN+J7Hw
 YJZg==
X-Gm-Message-State: AOAM5311sXlSJL1G0VYFiN4VYb9VNBVbQX94SjwNpqDu0blt6nYbLnhq
 /E3nO3jBR+OxB8sdAoGQhtg5DGiJgkCir6XnuQE=
X-Google-Smtp-Source: ABdhPJyhTdYpUkmNbPfRaT2uxQ4ZykAKmKPAcSSL1cIPIygJpls7vXNNgRMzHqqo+9JOoJNu9mEi4k68sWCvs3sP64k=
X-Received: by 2002:a05:6870:581e:b0:da:ff48:bd98 with SMTP id
 r30-20020a056870581e00b000daff48bd98mr6706301oap.138.1647590839277; Fri, 18
 Mar 2022 01:07:19 -0700 (PDT)
MIME-Version: 1.0
References: <20220317124958.27921-1-kabel@kernel.org>
 <20220317124958.27921-8-kabel@kernel.org>
In-Reply-To: <20220317124958.27921-8-kabel@kernel.org>
From: Ramon Fried <rfried.dev@gmail.com>
Date: Fri, 18 Mar 2022 10:07:08 +0200
Message-ID: <CAGi-RUKT+QNTaoiGwLbRRQwzdPuNWWtgKaYNV4pKLdxXU48ivQ@mail.gmail.com>
To: =?UTF-8?B?TWFyZWsgQmVow7pu?= <kabel@kernel.org>
Cc: Vignesh Raghavendra <vigneshr@ti.com>,
 Masami Hiramatsu <masami.hiramatsu@linaro.org>,
 Vladimir Oltean <vladimir.oltean@nxp.com>,
 U-Boot Mailing List <u-boot@lists.denx.de>,
 U-Boot STM32 <uboot-stm32@st-md-mailman.stormreply.com>,
 Ryder Lee <ryder.lee@mediatek.com>, Weijie Gao <weijie.gao@mediatek.com>,
 Michal Simek <michal.simek@xilinx.com>,
 =?UTF-8?B?TWFyZWsgQmVow7pu?= <marek.behun@nic.cz>,
 "Radu Pirea \(NXP OSS\)" <radu-nicolae.pirea@oss.nxp.com>,
 Chunfeng Yun <chunfeng.yun@mediatek.com>, Vikas Manocha <vikas.manocha@st.com>,
 Wolfgang Denk <wd@denx.de>, Hou Zhiqiang <Zhiqiang.Hou@nxp.com>,
 Jassi Brar <jaswinder.singh@linaro.org>,
 Joe Hershberger <joe.hershberger@ni.com>,
 Priyanka Jain <priyanka.jain@nxp.com>, Simon Glass <sjg@chromium.org>,
 Patrick Delaunay <patrick.delaunay@foss.st.com>, Bin Meng <bmeng.cn@gmail.com>,
 GSS_MTK_Uboot_upstream <GSS_MTK_Uboot_upstream@mediatek.com>
Subject: Re: [Uboot-stm32] [PATCH u-boot-net 07/14] net: introduce helpers
 to get PHY interface mode from a device/ofnode
X-BeenThere: uboot-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <uboot-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/uboot-stm32>, 
 <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/uboot-stm32/>
List-Post: <mailto:uboot-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/uboot-stm32>, 
 <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: uboot-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Uboot-stm32" <uboot-stm32-bounces@st-md-mailman.stormreply.com>

T24gVGh1LCBNYXIgMTcsIDIwMjIgYXQgMjo1MCBQTSBNYXJlayBCZWjDum4gPGthYmVsQGtlcm5l
bC5vcmc+IHdyb3RlOgo+Cj4gRnJvbTogTWFyZWsgQmVow7puIDxtYXJlay5iZWh1bkBuaWMuY3o+
Cj4KPiBBZGQgaGVscGVycyBvZm5vZGVfcmVhZF9waHlfbW9kZSgpIGFuZCBkZXZfcmVhZF9waHlf
bW9kZSgpIHRvIHBhcnNlIHRoZQo+ICJwaHktbW9kZSIgLyAicGh5LWNvbm5lY3Rpb24tdHlwZSIg
cHJvcGVydHkuCj4KPiBVc2UgdGhlbSB0cmVld2lkZS4KPgo+IFRoaXMgYWxsb3dzIHVzIHRvIGlu
bGluZSB0aGUgcGh5X2dldF9pbnRlcmZhY2VfYnlfbmFtZSgpIGludG8KPiBvZm5vZGVfcmVhZF9w
aHlfbW9kZSgpLCBzaW5jZSB0aGUgZm9ybWVyIGlzIG5vdCB1c2VkIGFueW1vcmUuCj4KPiBTaWdu
ZWQtb2ZmLWJ5OiBNYXJlayBCZWjDum4gPG1hcmVrLmJlaHVuQG5pYy5jej4KPiAtLS0KPiAgYm9h
cmQvc3Qvc3RtMzJmNzQ2LWRpc2NvL3N0bTMyZjc0Ni1kaXNjby5jIHwgMTMgKysrLS0tLS0KPiAg
ZHJpdmVycy9jb3JlL29mbm9kZS5jICAgICAgICAgICAgICAgICAgICAgIHwgMjMgKysrKysrKysr
KysrKysKPiAgZHJpdmVycy9jb3JlL3JlYWQuYyAgICAgICAgICAgICAgICAgICAgICAgIHwgIDUg
KysrCj4gIGRyaXZlcnMvbmV0L2FnN3h4eC5jICAgICAgICAgICAgICAgICAgICAgICB8ICA5ICsr
LS0tLQo+ICBkcml2ZXJzL25ldC9hbHRlcmFfdHNlLmMgICAgICAgICAgICAgICAgICAgfCAxMyAr
Ky0tLS0tLQo+ICBkcml2ZXJzL25ldC9iY202MzQ4LWV0aC5jICAgICAgICAgICAgICAgICAgfCAg
NiArLS0tCj4gIGRyaXZlcnMvbmV0L2JjbWdlbmV0LmMgICAgICAgICAgICAgICAgICAgICB8IDEw
ICsrLS0tLQo+ICBkcml2ZXJzL25ldC9kZXNpZ253YXJlLmMgICAgICAgICAgICAgICAgICAgfCAx
MCArKy0tLS0KPiAgZHJpdmVycy9uZXQvZHdjX2V0aF9xb3MuYyAgICAgICAgICAgICAgICAgIHwg
MzYgKysrLS0tLS0tLS0tLS0tLS0tLS0tLQo+ICBkcml2ZXJzL25ldC9mZWNfbXhjLmMgICAgICAg
ICAgICAgICAgICAgICAgfCAxMSArKy0tLS0tCj4gIGRyaXZlcnMvbmV0L2ZtL2V0aC5jICAgICAg
ICAgICAgICAgICAgICAgICB8IDEzICstLS0tLS0tCj4gIGRyaXZlcnMvbmV0L2ZzbF9lbmV0Yy5j
ICAgICAgICAgICAgICAgICAgICB8IDEzICsrKy0tLS0tCj4gIGRyaXZlcnMvbmV0L2Z0Z21hYzEw
MC5jICAgICAgICAgICAgICAgICAgICB8IDExICsrLS0tLS0KPiAgZHJpdmVycy9uZXQvaGlnbWFj
djMwMC5jICAgICAgICAgICAgICAgICAgIHwgIDkgKystLS0tCj4gIGRyaXZlcnMvbmV0L2xkcGFh
X2V0aC9sZHBhYV9ldGguYyAgICAgICAgICB8IDI4ICsrKy0tLS0tLS0tLS0tLS0tCj4gIGRyaXZl
cnMvbmV0L21hY2IuYyAgICAgICAgICAgICAgICAgICAgICAgICB8IDEwICsrLS0tLQo+ICBkcml2
ZXJzL25ldC9tdDc2MjAtZXRoLmMgICAgICAgICAgICAgICAgICAgfCAzNSArKysrKysrLS0tLS0t
LS0tLS0tLS0KPiAgZHJpdmVycy9uZXQvbXRrX2V0aC5jICAgICAgICAgICAgICAgICAgICAgIHwg
IDggKystLS0KPiAgZHJpdmVycy9uZXQvbXZnYmUuYyAgICAgICAgICAgICAgICAgICAgICAgIHwg
IDcgKystLS0KPiAgZHJpdmVycy9uZXQvbXZuZXRhLmMgICAgICAgICAgICAgICAgICAgICAgIHwg
MTEgKystLS0tLQo+ICBkcml2ZXJzL25ldC9tdnBwMi5jICAgICAgICAgICAgICAgICAgICAgICAg
fCAgOSArKy0tLS0KPiAgZHJpdmVycy9uZXQvcGh5L3BoeS5jICAgICAgICAgICAgICAgICAgICAg
IHwgMjUgKystLS0tLS0tLS0tLS0tCj4gIGRyaXZlcnMvbmV0L3BpYzMyX2V0aC5jICAgICAgICAg
ICAgICAgICAgICB8IDExICsrLS0tLS0KPiAgZHJpdmVycy9uZXQvcWUvZG1fcWVfdWVjLmMgICAg
ICAgICAgICAgICAgIHwgMTEgKystLS0tLQo+ICBkcml2ZXJzL25ldC9yYXZiLmMgICAgICAgICAg
ICAgICAgICAgICAgICAgfCAxNSArKystLS0tLS0KPiAgZHJpdmVycy9uZXQvc2hfZXRoLmMgICAg
ICAgICAgICAgICAgICAgICAgIHwgMTUgKysrLS0tLS0tCj4gIGRyaXZlcnMvbmV0L3NuaV9hdmUu
YyAgICAgICAgICAgICAgICAgICAgICB8IDEyICsrLS0tLS0tCj4gIGRyaXZlcnMvbmV0L3NuaV9u
ZXRzZWMuYyAgICAgICAgICAgICAgICAgICB8IDEwICsrLS0tLQo+ICBkcml2ZXJzL25ldC9zdW44
aV9lbWFjLmMgICAgICAgICAgICAgICAgICAgfCAxMSArKy0tLS0tCj4gIGRyaXZlcnMvbmV0L3Rp
L2FtNjUtY3Bzdy1udXNzLmMgICAgICAgICAgICB8IDE1ICsrKy0tLS0tLQo+ICBkcml2ZXJzL25l
dC90aS9jcHN3LmMgICAgICAgICAgICAgICAgICAgICAgfCAxMCArKy0tLS0KPiAgZHJpdmVycy9u
ZXQvdGkva2V5c3RvbmVfbmV0LmMgICAgICAgICAgICAgIHwgMjQgKysrKysrKy0tLS0tLS0tCj4g
IGRyaXZlcnMvbmV0L3RzZWMuYyAgICAgICAgICAgICAgICAgICAgICAgICB8ICA5ICsrLS0tLQo+
ICBkcml2ZXJzL25ldC94aWxpbnhfYXhpX2VtYWMuYyAgICAgICAgICAgICAgfCAxMCArKy0tLS0K
PiAgZHJpdmVycy9uZXQvenlucV9nZW0uYyAgICAgICAgICAgICAgICAgICAgIHwgIDkgKystLS0t
Cj4gIGluY2x1ZGUvZG0vb2Zub2RlLmggICAgICAgICAgICAgICAgICAgICAgICB8IDEzICsrKysr
KysrCj4gIGluY2x1ZGUvZG0vcmVhZC5oICAgICAgICAgICAgICAgICAgICAgICAgICB8IDE3ICsr
KysrKysrKysKPiAgaW5jbHVkZS9waHkuaCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwg
IDggLS0tLS0KPiAgbmV0L21kaW8tdWNsYXNzLmMgICAgICAgICAgICAgICAgICAgICAgICAgIHwg
MTggKy0tLS0tLS0tLS0KPiAgMzkgZmlsZXMgY2hhbmdlZCwgMTYxIGluc2VydGlvbnMoKyksIDM3
MiBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9ib2FyZC9zdC9zdG0zMmY3NDYtZGlzY28v
c3RtMzJmNzQ2LWRpc2NvLmMgYi9ib2FyZC9zdC9zdG0zMmY3NDYtZGlzY28vc3RtMzJmNzQ2LWRp
c2NvLmMKPiBpbmRleCA5NWQ4M2U3M2VlLi42OWY2NTdjNTRiIDEwMDY0NAo+IC0tLSBhL2JvYXJk
L3N0L3N0bTMyZjc0Ni1kaXNjby9zdG0zMmY3NDYtZGlzY28uYwo+ICsrKyBiL2JvYXJkL3N0L3N0
bTMyZjc0Ni1kaXNjby9zdG0zMmY3NDYtZGlzY28uYwo+IEBAIC0xMTcsMTYgKzExNywxMyBAQCBp
bnQgYm9hcmRfbGF0ZV9pbml0KHZvaWQpCj4gIGludCBib2FyZF9pbml0KHZvaWQpCj4gIHsKPiAg
I2lmZGVmIENPTkZJR19FVEhfREVTSUdOV0FSRQo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5X21v
ZGU7Cj4gLSAgICAgICBpbnQgbm9kZTsKPiArICAgICAgIG9mbm9kZSBub2RlOwo+Cj4gLSAgICAg
ICBub2RlID0gZmR0X25vZGVfb2Zmc2V0X2J5X2NvbXBhdGlibGUoZ2QtPmZkdF9ibG9iLCAwLCAi
c3Qsc3RtMzItZHdtYWMiKTsKPiAtICAgICAgIGlmIChub2RlIDwgMCkKPiArICAgICAgIG5vZGUg
PSBvZm5vZGVfYnlfY29tcGF0aWJsZShvZm5vZGVfbnVsbCgpLCAic3Qsc3RtMzItZHdtYWMiKTsK
PiArICAgICAgIGlmICghb2Zub2RlX3ZhbGlkKG5vZGUpKQo+ICAgICAgICAgICAgICAgICByZXR1
cm4gLTE7Cj4KPiAtICAgICAgIHBoeV9tb2RlID0gZmR0X2dldHByb3AoZ2QtPmZkdF9ibG9iLCBu
b2RlLCAicGh5LW1vZGUiLCBOVUxMKTsKPiAtCj4gLSAgICAgICBzd2l0Y2ggKHBoeV9nZXRfaW50
ZXJmYWNlX2J5X25hbWUocGh5X21vZGUpKSB7Cj4gKyAgICAgICBzd2l0Y2ggKG9mbm9kZV9yZWFk
X3BoeV9tb2RlKG5vZGUpKSB7Cj4gICAgICAgICBjYXNlIFBIWV9JTlRFUkZBQ0VfTU9ERV9STUlJ
Ogo+ICAgICAgICAgICAgICAgICBTVE0zMl9TWVNDRkctPnBtYyB8PSBTWVNDRkdfUE1DX01JSV9S
TUlJX1NFTDsKPiAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gQEAgLTEzNCw3ICsxMzEsNyBAQCBp
bnQgYm9hcmRfaW5pdCh2b2lkKQo+ICAgICAgICAgICAgICAgICBTVE0zMl9TWVNDRkctPnBtYyAm
PSB+U1lTQ0ZHX1BNQ19NSUlfUk1JSV9TRUw7Cj4gICAgICAgICAgICAgICAgIGJyZWFrOwo+ICAg
ICAgICAgZGVmYXVsdDoKPiAtICAgICAgICAgICAgICAgcHJpbnRmKCJQSFkgaW50ZXJmYWNlICVz
IG5vdCBzdXBwb3J0ZWQgIVxuIiwgcGh5X21vZGUpOwo+ICsgICAgICAgICAgICAgICBwcmludGYo
IlVuc3VwcG9ydGVkIFBIWSBpbnRlcmZhY2UhXG4iKTsKPiAgICAgICAgIH0KPiAgI2VuZGlmCj4K
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9jb3JlL29mbm9kZS5jIGIvZHJpdmVycy9jb3JlL29mbm9k
ZS5jCj4gaW5kZXggZWFhZDJjOTg5Yi4uMTkxYWI2M2E1ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L2NvcmUvb2Zub2RlLmMKPiArKysgYi9kcml2ZXJzL2NvcmUvb2Zub2RlLmMKPiBAQCAtMTE4Mywz
ICsxMTgzLDI2IEBAIG9mbm9kZSBvZm5vZGVfZ2V0X3BoeV9ub2RlKG9mbm9kZSBub2RlKQo+Cj4g
ICAgICAgICByZXR1cm4gYXJncy5ub2RlOwo+ICB9Cj4gKwo+ICtwaHlfaW50ZXJmYWNlX3Qgb2Zu
b2RlX3JlYWRfcGh5X21vZGUob2Zub2RlIG5vZGUpCj4gK3sKPiArICAgICAgIGNvbnN0IGNoYXIg
Km1vZGU7Cj4gKyAgICAgICBpbnQgaTsKPiArCj4gKyAgICAgICBhc3NlcnQob2Zub2RlX3ZhbGlk
KG5vZGUpKTsKPiArCj4gKyAgICAgICBtb2RlID0gb2Zub2RlX3JlYWRfc3RyaW5nKG5vZGUsICJw
aHktbW9kZSIpOwo+ICsgICAgICAgaWYgKCFtb2RlKQo+ICsgICAgICAgICAgICAgICBtb2RlID0g
b2Zub2RlX3JlYWRfc3RyaW5nKG5vZGUsICJwaHktY29ubmVjdGlvbi10eXBlIik7Cj4gKwo+ICsg
ICAgICAgaWYgKCFtb2RlKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gUEhZX0lOVEVSRkFDRV9N
T0RFX05PTkU7Cj4gKwo+ICsgICAgICAgZm9yIChpID0gMDsgaSA8IFBIWV9JTlRFUkZBQ0VfTU9E
RV9DT1VOVDsgaSsrKQo+ICsgICAgICAgICAgICAgICBpZiAoIXN0cmNtcChtb2RlLCBwaHlfaW50
ZXJmYWNlX3N0cmluZ3NbaV0pKQo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpOwo+
ICsKPiArICAgICAgIGRlYnVnKCIlczogSW52YWxpZCBQSFkgaW50ZXJmYWNlICclcydcbiIsIF9f
ZnVuY19fLCBtb2RlKTsKPiArCj4gKyAgICAgICByZXR1cm4gUEhZX0lOVEVSRkFDRV9NT0RFX05P
TkU7Cj4gK30KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9jb3JlL3JlYWQuYyBiL2RyaXZlcnMvY29y
ZS9yZWFkLmMKPiBpbmRleCA3ZmYxMDAyMThkLi5jNzM1MDhkMjc2IDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvY29yZS9yZWFkLmMKPiArKysgYi9kcml2ZXJzL2NvcmUvcmVhZC5jCj4gQEAgLTQwMywz
ICs0MDMsOCBAQCBvZm5vZGUgZGV2X2dldF9waHlfbm9kZShjb25zdCBzdHJ1Y3QgdWRldmljZSAq
ZGV2KQo+ICB7Cj4gICAgICAgICByZXR1cm4gb2Zub2RlX2dldF9waHlfbm9kZShkZXZfb2Zub2Rl
KGRldikpOwo+ICB9Cj4gKwo+ICtwaHlfaW50ZXJmYWNlX3QgZGV2X3JlYWRfcGh5X21vZGUoY29u
c3Qgc3RydWN0IHVkZXZpY2UgKmRldikKPiArewo+ICsgICAgICAgcmV0dXJuIG9mbm9kZV9yZWFk
X3BoeV9tb2RlKGRldl9vZm5vZGUoZGV2KSk7Cj4gK30KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9u
ZXQvYWc3eHh4LmMgYi9kcml2ZXJzL25ldC9hZzd4eHguYwo+IGluZGV4IDYzMmFiM2MxZTUuLmYy
NGE5MTdiZDQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9uZXQvYWc3eHh4LmMKPiArKysgYi9kcml2
ZXJzL25ldC9hZzd4eHguYwo+IEBAIC0xMjU0LDcgKzEyNTQsNiBAQCBzdGF0aWMgY29uc3Qgc3Ry
dWN0IGV0aF9vcHMgYWc3eHh4X2V0aF9vcHMgPSB7Cj4gIHN0YXRpYyBpbnQgYWc3eHh4X2V0aF9v
Zl90b19wbGF0KHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBldGhf
cGRhdGEgKnBkYXRhID0gZGV2X2dldF9wbGF0KGRldik7Cj4gLSAgICAgICBjb25zdCBjaGFyICpw
aHlfbW9kZTsKPiAgICAgICAgIGludCByZXQ7Cj4KPiAgICAgICAgIHBkYXRhLT5pb2Jhc2UgPSBk
ZXZfcmVhZF9hZGRyKGRldik7Cj4gQEAgLTEyNjUsMTMgKzEyNjQsOSBAQCBzdGF0aWMgaW50IGFn
N3h4eF9ldGhfb2ZfdG9fcGxhdChzdHJ1Y3QgdWRldmljZSAqZGV2KQo+ICAgICAgICAgaWYgKHJl
dCA8PSAwKQo+ICAgICAgICAgICAgICAgICByZXR1cm4gcmV0Owo+Cj4gLSAgICAgICBwaHlfbW9k
ZSA9IGZkdF9nZXRwcm9wKGdkLT5mZHRfYmxvYiwgcmV0LCAicGh5LW1vZGUiLCBOVUxMKTsKPiAt
ICAgICAgIGlmIChwaHlfbW9kZSkKPiAtICAgICAgICAgICAgICAgcGRhdGEtPnBoeV9pbnRlcmZh
Y2UgPSBwaHlfZ2V0X2ludGVyZmFjZV9ieV9uYW1lKHBoeV9tb2RlKTsKPiAtICAgICAgIGlmIChw
ZGF0YS0+cGh5X2ludGVyZmFjZSA9PSAtMSkgewo+IC0gICAgICAgICAgICAgICBkZWJ1ZygiJXM6
IEludmFsaWQgUEhZIGludGVyZmFjZSAnJXMnXG4iLCBfX2Z1bmNfXywgcGh5X21vZGUpOwo+ICsg
ICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSBkZXZfcmVhZF9waHlfbW9kZShkZXYpOwo+ICsg
ICAgICAgaWYgKHBkYXRhLT5waHlfaW50ZXJmYWNlID09IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05F
KQo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPgo+ICAgICAg
ICAgcmV0dXJuIDA7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvYWx0ZXJhX3RzZS5j
IGIvZHJpdmVycy9uZXQvYWx0ZXJhX3RzZS5jCj4gaW5kZXggZWI0Y2Q5Njc2My4uMjUyNDc0NzJi
MCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC9hbHRlcmFfdHNlLmMKPiArKysgYi9kcml2ZXJz
L25ldC9hbHRlcmFfdHNlLmMKPiBAQCAtNjc2LDE3ICs2NzYsMTAgQEAgc3RhdGljIGludCBhbHRl
cmFfdHNlX3Byb2JlKHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gIHN0YXRpYyBpbnQgYWx0ZXJhX3Rz
ZV9vZl90b19wbGF0KHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBl
dGhfcGRhdGEgKnBkYXRhID0gZGV2X2dldF9wbGF0KGRldik7Cj4gLSAgICAgICBjb25zdCBjaGFy
ICpwaHlfbW9kZTsKPiAtCj4gLSAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IC0xOwo+IC0g
ICAgICAgcGh5X21vZGUgPSBmZHRfZ2V0cHJvcChnZC0+ZmR0X2Jsb2IsIGRldl9vZl9vZmZzZXQo
ZGV2KSwgInBoeS1tb2RlIiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTlVMTCk7
Cj4gLSAgICAgICBpZiAocGh5X21vZGUpCj4gLSAgICAgICAgICAgICAgIHBkYXRhLT5waHlfaW50
ZXJmYWNlID0gcGh5X2dldF9pbnRlcmZhY2VfYnlfbmFtZShwaHlfbW9kZSk7Cj4gLSAgICAgICBp
ZiAocGRhdGEtPnBoeV9pbnRlcmZhY2UgPT0gLTEpIHsKPiAtICAgICAgICAgICAgICAgZGVidWco
IiVzOiBJbnZhbGlkIFBIWSBpbnRlcmZhY2UgJyVzJ1xuIiwgX19mdW5jX18sIHBoeV9tb2RlKTsK
PiArCj4gKyAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IGRldl9yZWFkX3BoeV9tb2RlKGRl
dik7Cj4gKyAgICAgICBpZiAocGRhdGEtPnBoeV9pbnRlcmZhY2UgPT0gUEhZX0lOVEVSRkFDRV9N
T0RFX05PTkUpCj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+IC0gICAgICAgfQo+
Cj4gICAgICAgICByZXR1cm4gMDsKPiAgfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9iY202
MzQ4LWV0aC5jIGIvZHJpdmVycy9uZXQvYmNtNjM0OC1ldGguYwo+IGluZGV4IGFhZDdiNjEyMTMu
Ljc1YjI0MTM2ZmQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9uZXQvYmNtNjM0OC1ldGguYwo+ICsr
KyBiL2RyaXZlcnMvbmV0L2JjbTYzNDgtZXRoLmMKPiBAQCAtNDE1LDcgKzQxNSw2IEBAIHN0YXRp
YyBpbnQgYmNtNjM0OF9ldGhfcHJvYmUoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgICAgICAgIHN0
cnVjdCBldGhfcGRhdGEgKnBkYXRhID0gZGV2X2dldF9wbGF0KGRldik7Cj4gICAgICAgICBzdHJ1
Y3QgYmNtNjM0OF9ldGhfcHJpdiAqcHJpdiA9IGRldl9nZXRfcHJpdihkZXYpOwo+ICAgICAgICAg
c3RydWN0IG9mbm9kZV9waGFuZGxlX2FyZ3MgcGh5Owo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5
X21vZGU7Cj4gICAgICAgICBpbnQgcmV0LCBpOwo+Cj4gICAgICAgICAvKiBnZXQgYmFzZSBhZGRy
ZXNzICovCj4gQEAgLTQyNSwxMCArNDI0LDcgQEAgc3RhdGljIGludCBiY202MzQ4X2V0aF9wcm9i
ZShzdHJ1Y3QgdWRldmljZSAqZGV2KQo+ICAgICAgICAgcGRhdGEtPmlvYmFzZSA9IChwaHlzX2Fk
ZHJfdCkgcHJpdi0+YmFzZTsKPgo+ICAgICAgICAgLyogZ2V0IHBoeSBtb2RlICovCj4gLSAgICAg
ICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05FOwo+IC0gICAg
ICAgcGh5X21vZGUgPSBkZXZfcmVhZF9zdHJpbmcoZGV2LCAicGh5LW1vZGUiKTsKPiAtICAgICAg
IGlmIChwaHlfbW9kZSkKPiAtICAgICAgICAgICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSBw
aHlfZ2V0X2ludGVyZmFjZV9ieV9uYW1lKHBoeV9tb2RlKTsKPiArICAgICAgIHBkYXRhLT5waHlf
aW50ZXJmYWNlID0gZGV2X3JlYWRfcGh5X21vZGUoZGV2KTsKPiAgICAgICAgIGlmIChwZGF0YS0+
cGh5X2ludGVyZmFjZSA9PSBQSFlfSU5URVJGQUNFX01PREVfTk9ORSkKPiAgICAgICAgICAgICAg
ICAgcmV0dXJuIC1FTk9ERVY7Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvYmNtZ2VuZXQu
YyBiL2RyaXZlcnMvbmV0L2JjbWdlbmV0LmMKPiBpbmRleCA2NzgzOTU2M2RiLi5jNmFjYjQ5MzJi
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbmV0L2JjbWdlbmV0LmMKPiArKysgYi9kcml2ZXJzL25l
dC9iY21nZW5ldC5jCj4gQEAgLTY5MCwyMCArNjkwLDE0IEBAIHN0YXRpYyBpbnQgYmNtZ2VuZXRf
ZXRoX29mX3RvX3BsYXQoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgICAgICAgIHN0cnVjdCBldGhf
cGRhdGEgKnBkYXRhID0gZGV2X2dldF9wbGF0KGRldik7Cj4gICAgICAgICBzdHJ1Y3QgYmNtZ2Vu
ZXRfZXRoX3ByaXYgKnByaXYgPSBkZXZfZ2V0X3ByaXYoZGV2KTsKPiAgICAgICAgIHN0cnVjdCBv
Zm5vZGVfcGhhbmRsZV9hcmdzIHBoeV9ub2RlOwo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5X21v
ZGU7Cj4gICAgICAgICBpbnQgcmV0Owo+Cj4gICAgICAgICBwZGF0YS0+aW9iYXNlID0gZGV2X3Jl
YWRfYWRkcihkZXYpOwo+Cj4gICAgICAgICAvKiBHZXQgcGh5IG1vZGUgZnJvbSBEVCAqLwo+IC0g
ICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSAtMTsKPiAtICAgICAgIHBoeV9tb2RlID0gZGV2
X3JlYWRfc3RyaW5nKGRldiwgInBoeS1tb2RlIik7Cj4gLSAgICAgICBpZiAocGh5X21vZGUpCj4g
LSAgICAgICAgICAgICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0gcGh5X2dldF9pbnRlcmZhY2Vf
YnlfbmFtZShwaHlfbW9kZSk7Cj4gLSAgICAgICBpZiAocGRhdGEtPnBoeV9pbnRlcmZhY2UgPT0g
LTEpIHsKPiAtICAgICAgICAgICAgICAgZGVidWcoIiVzOiBJbnZhbGlkIFBIWSBpbnRlcmZhY2Ug
JyVzJ1xuIiwgX19mdW5jX18sIHBoeV9tb2RlKTsKPiArICAgICAgIHBkYXRhLT5waHlfaW50ZXJm
YWNlID0gZGV2X3JlYWRfcGh5X21vZGUoZGV2KTsKPiArICAgICAgIGlmIChwZGF0YS0+cGh5X2lu
dGVyZmFjZSA9PSBQSFlfSU5URVJGQUNFX01PREVfTk9ORSkKPiAgICAgICAgICAgICAgICAgcmV0
dXJuIC1FSU5WQUw7Cj4gLSAgICAgICB9Cj4KPiAgICAgICAgIHJldCA9IGRldl9yZWFkX3BoYW5k
bGVfd2l0aF9hcmdzKGRldiwgInBoeS1oYW5kbGUiLCBOVUxMLCAwLCAwLAo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnBoeV9ub2RlKTsKPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9uZXQvZGVzaWdud2FyZS5jIGIvZHJpdmVycy9uZXQvZGVzaWdud2FyZS5jCj4gaW5k
ZXggNWFhYWM2MDNhMC4uN2I3YjBmNjU3OCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC9kZXNp
Z253YXJlLmMKPiArKysgYi9kcml2ZXJzL25ldC9kZXNpZ253YXJlLmMKPiBAQCAtOTE0LDIxICs5
MTQsMTUgQEAgaW50IGRlc2lnbndhcmVfZXRoX29mX3RvX3BsYXQoc3RydWN0IHVkZXZpY2UgKmRl
dikKPiAgICAgICAgIHN0cnVjdCBkd19ldGhfZGV2ICpwcml2ID0gZGV2X2dldF9wcml2KGRldik7
Cj4gICNlbmRpZgo+ICAgICAgICAgc3RydWN0IGV0aF9wZGF0YSAqcGRhdGEgPSAmZHdfcGRhdGEt
PmV0aF9wZGF0YTsKPiAtICAgICAgIGNvbnN0IGNoYXIgKnBoeV9tb2RlOwo+ICAjaWYgQ09ORklH
X0lTX0VOQUJMRUQoRE1fR1BJTykKPiAgICAgICAgIGludCByZXNldF9mbGFncyA9IEdQSU9EX0lT
X09VVDsKPiAgI2VuZGlmCj4gICAgICAgICBpbnQgcmV0ID0gMDsKPgo+ICAgICAgICAgcGRhdGEt
PmlvYmFzZSA9IGRldl9yZWFkX2FkZHIoZGV2KTsKPiAtICAgICAgIHBkYXRhLT5waHlfaW50ZXJm
YWNlID0gLTE7Cj4gLSAgICAgICBwaHlfbW9kZSA9IGRldl9yZWFkX3N0cmluZyhkZXYsICJwaHkt
bW9kZSIpOwo+IC0gICAgICAgaWYgKHBoeV9tb2RlKQo+IC0gICAgICAgICAgICAgICBwZGF0YS0+
cGh5X2ludGVyZmFjZSA9IHBoeV9nZXRfaW50ZXJmYWNlX2J5X25hbWUocGh5X21vZGUpOwo+IC0g
ICAgICAgaWYgKHBkYXRhLT5waHlfaW50ZXJmYWNlID09IC0xKSB7Cj4gLSAgICAgICAgICAgICAg
IGRlYnVnKCIlczogSW52YWxpZCBQSFkgaW50ZXJmYWNlICclcydcbiIsIF9fZnVuY19fLCBwaHlf
bW9kZSk7Cj4gKyAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IGRldl9yZWFkX3BoeV9tb2Rl
KGRldik7Cj4gKyAgICAgICBpZiAocGRhdGEtPnBoeV9pbnRlcmZhY2UgPT0gUEhZX0lOVEVSRkFD
RV9NT0RFX05PTkUpCj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+IC0gICAgICAg
fQo+Cj4gICAgICAgICBwZGF0YS0+bWF4X3NwZWVkID0gZGV2X3JlYWRfdTMyX2RlZmF1bHQoZGV2
LCAibWF4LXNwZWVkIiwgMCk7Cj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZHdjX2V0aF9x
b3MuYyBiL2RyaXZlcnMvbmV0L2R3Y19ldGhfcW9zLmMKPiBpbmRleCAyMmRhZDViMjAzLi45Nzc3
ZjZjYjljIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbmV0L2R3Y19ldGhfcW9zLmMKPiArKysgYi9k
cml2ZXJzL25ldC9kd2NfZXRoX3Fvcy5jCj4gQEAgLTI3MCw3ICsyNzAsNyBAQCBzdHJ1Y3QgZXFv
c19jb25maWcgewo+ICAgICAgICAgaW50IGNvbmZpZ19tYWM7Cj4gICAgICAgICBpbnQgY29uZmln
X21hY19tZGlvOwo+ICAgICAgICAgdW5zaWduZWQgaW50IGF4aV9idXNfd2lkdGg7Cj4gLSAgICAg
ICBwaHlfaW50ZXJmYWNlX3QgKCppbnRlcmZhY2UpKHN0cnVjdCB1ZGV2aWNlICpkZXYpOwo+ICsg
ICAgICAgcGh5X2ludGVyZmFjZV90ICgqaW50ZXJmYWNlKShjb25zdCBzdHJ1Y3QgdWRldmljZSAq
ZGV2KTsKPiAgICAgICAgIHN0cnVjdCBlcW9zX29wcyAqb3BzOwo+ICB9Owo+Cj4gQEAgLTE3Mjks
MjEgKzE3MjksNyBAQCBlcnJfcHJvYmU6Cj4gICAgICAgICByZXR1cm4gcmV0Owo+ICB9Cj4KPiAt
c3RhdGljIHBoeV9pbnRlcmZhY2VfdCBlcW9zX2dldF9pbnRlcmZhY2Vfc3RtMzIoc3RydWN0IHVk
ZXZpY2UgKmRldikKPiAtewo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5X21vZGU7Cj4gLSAgICAg
ICBwaHlfaW50ZXJmYWNlX3QgaW50ZXJmYWNlID0gUEhZX0lOVEVSRkFDRV9NT0RFX05PTkU7Cj4g
LQo+IC0gICAgICAgZGVidWcoIiVzKGRldj0lcCk6XG4iLCBfX2Z1bmNfXywgZGV2KTsKPiAtCj4g
LSAgICAgICBwaHlfbW9kZSA9IGRldl9yZWFkX3Byb3AoZGV2LCAicGh5LW1vZGUiLCBOVUxMKTsK
PiAtICAgICAgIGlmIChwaHlfbW9kZSkKPiAtICAgICAgICAgICAgICAgaW50ZXJmYWNlID0gcGh5
X2dldF9pbnRlcmZhY2VfYnlfbmFtZShwaHlfbW9kZSk7Cj4gLQo+IC0gICAgICAgcmV0dXJuIGlu
dGVyZmFjZTsKPiAtfQo+IC0KPiAtc3RhdGljIHBoeV9pbnRlcmZhY2VfdCBlcW9zX2dldF9pbnRl
cmZhY2VfdGVncmExODYoc3RydWN0IHVkZXZpY2UgKmRldikKPiArc3RhdGljIHBoeV9pbnRlcmZh
Y2VfdCBlcW9zX2dldF9pbnRlcmZhY2VfdGVncmExODYoY29uc3Qgc3RydWN0IHVkZXZpY2UgKmRl
dikKPiAgewo+ICAgICAgICAgcmV0dXJuIFBIWV9JTlRFUkZBQ0VfTU9ERV9NSUk7Cj4gIH0KPiBA
QCAtMTc2NiwyMCArMTc1Miw2IEBAIHN0YXRpYyBpbnQgZXFvc19wcm9iZV9yZXNvdXJjZXNfaW14
KHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gICAgICAgICByZXR1cm4gMDsKPiAgfQo+Cj4gLXN0YXRp
YyBwaHlfaW50ZXJmYWNlX3QgZXFvc19nZXRfaW50ZXJmYWNlX2lteChzdHJ1Y3QgdWRldmljZSAq
ZGV2KQo+IC17Cj4gLSAgICAgICBjb25zdCBjaGFyICpwaHlfbW9kZTsKPiAtICAgICAgIHBoeV9p
bnRlcmZhY2VfdCBpbnRlcmZhY2UgPSBQSFlfSU5URVJGQUNFX01PREVfTk9ORTsKPiAtCj4gLSAg
ICAgICBkZWJ1ZygiJXMoZGV2PSVwKTpcbiIsIF9fZnVuY19fLCBkZXYpOwo+IC0KPiAtICAgICAg
IHBoeV9tb2RlID0gZGV2X3JlYWRfcHJvcChkZXYsICJwaHktbW9kZSIsIE5VTEwpOwo+IC0gICAg
ICAgaWYgKHBoeV9tb2RlKQo+IC0gICAgICAgICAgICAgICBpbnRlcmZhY2UgPSBwaHlfZ2V0X2lu
dGVyZmFjZV9ieV9uYW1lKHBoeV9tb2RlKTsKPiAtCj4gLSAgICAgICByZXR1cm4gaW50ZXJmYWNl
Owo+IC19Cj4gLQo+ICBzdGF0aWMgaW50IGVxb3NfcmVtb3ZlX3Jlc291cmNlc190ZWdyYTE4Nihz
dHJ1Y3QgdWRldmljZSAqZGV2KQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgZXFvc19wcml2ICplcW9z
ID0gZGV2X2dldF9wcml2KGRldik7Cj4gQEAgLTE5ODUsNyArMTk1Nyw3IEBAIHN0YXRpYyBjb25z
dCBzdHJ1Y3QgZXFvc19jb25maWcgX19tYXliZV91bnVzZWQgZXFvc19zdG0zMl9jb25maWcgPSB7
Cj4gICAgICAgICAuY29uZmlnX21hYyA9IEVRT1NfTUFDX1JYUV9DVFJMMF9SWFEwRU5fRU5BQkxF
RF9BViwKPiAgICAgICAgIC5jb25maWdfbWFjX21kaW8gPSBFUU9TX01BQ19NRElPX0FERFJFU1Nf
Q1JfMjUwXzMwMCwKPiAgICAgICAgIC5heGlfYnVzX3dpZHRoID0gRVFPU19BWElfV0lEVEhfNjQs
Cj4gLSAgICAgICAuaW50ZXJmYWNlID0gZXFvc19nZXRfaW50ZXJmYWNlX3N0bTMyLAo+ICsgICAg
ICAgLmludGVyZmFjZSA9IGRldl9yZWFkX3BoeV9tb2RlLAo+ICAgICAgICAgLm9wcyA9ICZlcW9z
X3N0bTMyX29wcwo+ICB9Owo+Cj4gQEAgLTIwMTMsNyArMTk4NSw3IEBAIHN0cnVjdCBlcW9zX2Nv
bmZpZyBfX21heWJlX3VudXNlZCBlcW9zX2lteF9jb25maWcgPSB7Cj4gICAgICAgICAuY29uZmln
X21hYyA9IEVRT1NfTUFDX1JYUV9DVFJMMF9SWFEwRU5fRU5BQkxFRF9EQ0IsCj4gICAgICAgICAu
Y29uZmlnX21hY19tZGlvID0gRVFPU19NQUNfTURJT19BRERSRVNTX0NSXzI1MF8zMDAsCj4gICAg
ICAgICAuYXhpX2J1c193aWR0aCA9IEVRT1NfQVhJX1dJRFRIXzY0LAo+IC0gICAgICAgLmludGVy
ZmFjZSA9IGVxb3NfZ2V0X2ludGVyZmFjZV9pbXgsCj4gKyAgICAgICAuaW50ZXJmYWNlID0gZGV2
X3JlYWRfcGh5X21vZGUsCj4gICAgICAgICAub3BzID0gJmVxb3NfaW14X29wcwo+ICB9Owo+Cj4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2ZlY19teGMuYyBiL2RyaXZlcnMvbmV0L2ZlY19teGMu
Ywo+IGluZGV4IDk4NWIwMzg0NDcuLmRlMWQwNmYwZjEgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9u
ZXQvZmVjX214Yy5jCj4gKysrIGIvZHJpdmVycy9uZXQvZmVjX214Yy5jCj4gQEAgLTE1NTgsMjAg
KzE1NTgsMTMgQEAgc3RhdGljIGludCBmZWNteGNfb2ZfdG9fcGxhdChzdHJ1Y3QgdWRldmljZSAq
ZGV2KQo+ICAgICAgICAgaW50IHJldCA9IDA7Cj4gICAgICAgICBzdHJ1Y3QgZXRoX3BkYXRhICpw
ZGF0YSA9IGRldl9nZXRfcGxhdChkZXYpOwo+ICAgICAgICAgc3RydWN0IGZlY19wcml2ICpwcml2
ID0gZGV2X2dldF9wcml2KGRldik7Cj4gLSAgICAgICBjb25zdCBjaGFyICpwaHlfbW9kZTsKPgo+
ICAgICAgICAgcGRhdGEtPmlvYmFzZSA9IGRldl9yZWFkX2FkZHIoZGV2KTsKPiAgICAgICAgIHBy
aXYtPmV0aCA9IChzdHJ1Y3QgZXRoZXJuZXRfcmVncyAqKXBkYXRhLT5pb2Jhc2U7Cj4KPiAtICAg
ICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0gLTE7Cj4gLSAgICAgICBwaHlfbW9kZSA9IGZkdF9n
ZXRwcm9wKGdkLT5mZHRfYmxvYiwgZGV2X29mX29mZnNldChkZXYpLCAicGh5LW1vZGUiLAo+IC0g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOVUxMKTsKPiAtICAgICAgIGlmIChwaHlfbW9k
ZSkKPiAtICAgICAgICAgICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSBwaHlfZ2V0X2ludGVy
ZmFjZV9ieV9uYW1lKHBoeV9tb2RlKTsKPiAtICAgICAgIGlmIChwZGF0YS0+cGh5X2ludGVyZmFj
ZSA9PSAtMSkgewo+IC0gICAgICAgICAgICAgICBkZWJ1ZygiJXM6IEludmFsaWQgUEhZIGludGVy
ZmFjZSAnJXMnXG4iLCBfX2Z1bmNfXywgcGh5X21vZGUpOwo+ICsgICAgICAgcGRhdGEtPnBoeV9p
bnRlcmZhY2UgPSBkZXZfcmVhZF9waHlfbW9kZShkZXYpOwo+ICsgICAgICAgaWYgKHBkYXRhLT5w
aHlfaW50ZXJmYWNlID09IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05FKQo+ICAgICAgICAgICAgICAg
ICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPgo+ICAjaWZkZWYgQ09ORklHX0RNX1JFR1VM
QVRPUgo+ICAgICAgICAgZGV2aWNlX2dldF9zdXBwbHlfcmVndWxhdG9yKGRldiwgInBoeS1zdXBw
bHkiLCAmcHJpdi0+cGh5X3N1cHBseSk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2ZtL2V0
aC5jIGIvZHJpdmVycy9uZXQvZm0vZXRoLmMKPiBpbmRleCA1ZTBkMGJjYTliLi4xZmZlOWUyYjdh
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbmV0L2ZtL2V0aC5jCj4gKysrIGIvZHJpdmVycy9uZXQv
Zm0vZXRoLmMKPiBAQCAtOTU0LDE3ICs5NTQsNiBAQCBpbnQgZm1fZXRoX2luaXRpYWxpemUoc3Ry
dWN0IGNjc3JfZm1hbiAqcmVnLCBzdHJ1Y3QgZm1fZXRoX2luZm8gKmluZm8pCj4gICAgICAgICBy
ZXR1cm4gMDsKPiAgfQo+ICAjZWxzZSAvKiBDT05GSUdfRE1fRVRIICovCj4gLSNpZmRlZiBDT05G
SUdfUEhZTElCCj4gLXBoeV9pbnRlcmZhY2VfdCBmbWFuX3JlYWRfc3lzX2lmKHN0cnVjdCB1ZGV2
aWNlICpkZXYpCj4gLXsKPiAtICAgICAgIGNvbnN0IGNoYXIgKmlmX3N0cjsKPiAtCj4gLSAgICAg
ICBpZl9zdHIgPSBvZm5vZGVfcmVhZF9zdHJpbmcoZGV2X29mbm9kZShkZXYpLCAicGh5LWNvbm5l
Y3Rpb24tdHlwZSIpOwo+IC0gICAgICAgZGVidWcoIk1BQyBzeXN0ZW0gaW50ZXJmYWNlIG1vZGUg
JXNcbiIsIGlmX3N0cik7Cj4gLQo+IC0gICAgICAgcmV0dXJuIHBoeV9nZXRfaW50ZXJmYWNlX2J5
X25hbWUoaWZfc3RyKTsKPiAtfQo+IC0jZW5kaWYKPgo+ICBzdGF0aWMgaW50IGZtX2V0aF9iaW5k
KHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gIHsKPiBAQCAtMTAzOCw3ICsxMDI3LDcgQEAgc3RhdGlj
IGludCBmbV9ldGhfcHJvYmUoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgICAgICAgIHJlZyA9ICh2
b2lkICopKHVpbnRwdHJfdClkZXZfcmVhZF9hZGRyKGRldik7Cj4gICAgICAgICBmbV9ldGgtPm1h
Y190eXBlID0gZGV2X2dldF9kcml2ZXJfZGF0YShkZXYpOwo+ICAjaWZkZWYgQ09ORklHX1BIWUxJ
Qgo+IC0gICAgICAgZm1fZXRoLT5lbmV0X2lmID0gZm1hbl9yZWFkX3N5c19pZihkZXYpOwo+ICsg
ICAgICAgZm1fZXRoLT5lbmV0X2lmID0gZGV2X3JlYWRfcGh5X21vZGUoZGV2KTsKPiAgI2Vsc2UK
PiAgICAgICAgIGZtX2V0aC0+ZW5ldF9pZiA9IFBIWV9JTlRFUkZBQ0VfTU9ERV9TR01JSTsKPiAg
ICAgICAgIHByaW50ZigiJXM6IHdhcm5pbmcgLSB1bmFibGUgdG8gZGV0ZXJtaW5lIGludGVyZmFj
ZSB0eXBlXG4iLCBfX2Z1bmNfXyk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2ZzbF9lbmV0
Yy5jIGIvZHJpdmVycy9uZXQvZnNsX2VuZXRjLmMKPiBpbmRleCA5MTVjN2M4MDI1Li44ZjVhZjFk
YmMwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbmV0L2ZzbF9lbmV0Yy5jCj4gKysrIGIvZHJpdmVy
cy9uZXQvZnNsX2VuZXRjLmMKPiBAQCAtMjYwLDkgKzI2MCw2IEBAIHN0YXRpYyBpbnQgZW5ldGNf
aW5pdF9zeGdtaWkoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgc3RhdGljIHZvaWQgZW5ldGNfc3Rh
cnRfcGNzKHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBlbmV0Y19w
cml2ICpwcml2ID0gZGV2X2dldF9wcml2KGRldik7Cj4gLSAgICAgICBjb25zdCBjaGFyICppZl9z
dHI7Cj4gLQo+IC0gICAgICAgcHJpdi0+aWZfdHlwZSA9IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05F
Owo+Cj4gICAgICAgICAvKiByZWdpc3RlciBpbnRlcm5hbCBNRElPIGZvciBkZWJ1ZyBwdXJwb3Nl
cyAqLwo+ICAgICAgICAgaWYgKGVuZXRjX3JlYWRfcG9ydChwcml2LCBFTkVUQ19QQ0FQUjApICYg
RU5FVENfUENBUFJPX01ESU8pIHsKPiBAQCAtMjc5LDE0ICsyNzYsMTIgQEAgc3RhdGljIHZvaWQg
ZW5ldGNfc3RhcnRfcGNzKHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gICAgICAgICAgICAgICAgIHJl
dHVybjsKPiAgICAgICAgIH0KPgo+IC0gICAgICAgaWZfc3RyID0gb2Zub2RlX3JlYWRfc3RyaW5n
KGRldl9vZm5vZGUoZGV2KSwgInBoeS1tb2RlIik7Cj4gLSAgICAgICBpZiAoaWZfc3RyKQo+IC0g
ICAgICAgICAgICAgICBwcml2LT5pZl90eXBlID0gcGh5X2dldF9pbnRlcmZhY2VfYnlfbmFtZShp
Zl9zdHIpOwo+IC0gICAgICAgZWxzZQo+ICsgICAgICAgcHJpdi0+aWZfdHlwZSA9IGRldl9yZWFk
X3BoeV9tb2RlKGRldik7Cj4gKyAgICAgICBpZiAocHJpdi0+aWZfdHlwZSA9PSBQSFlfSU5URVJG
QUNFX01PREVfTk9ORSkgewo+ICAgICAgICAgICAgICAgICBlbmV0Y19kYmcoZGV2LAo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgInBoeS1tb2RlIHByb3BlcnR5IG5vdCBmb3VuZCwgZGVmYXVs
dGluZyB0byBTR01JSVxuIik7Cj4gLSAgICAgICBpZiAocHJpdi0+aWZfdHlwZSA8IDApCj4gLSAg
ICAgICAgICAgICAgIHByaXYtPmlmX3R5cGUgPSBQSFlfSU5URVJGQUNFX01PREVfTk9ORTsKPiAr
ICAgICAgICAgICAgICAgcHJpdi0+aWZfdHlwZSA9IFBIWV9JTlRFUkZBQ0VfTU9ERV9TR01JSTsK
PiArICAgICAgIH0KPgo+ICAgICAgICAgc3dpdGNoIChwcml2LT5pZl90eXBlKSB7Cj4gICAgICAg
ICBjYXNlIFBIWV9JTlRFUkZBQ0VfTU9ERV9TR01JSToKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9u
ZXQvZnRnbWFjMTAwLmMgYi9kcml2ZXJzL25ldC9mdGdtYWMxMDAuYwo+IGluZGV4IGFhNzE5ZDI5
NWYuLjYyNmMyN2Q3YmYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9uZXQvZnRnbWFjMTAwLmMKPiAr
KysgYi9kcml2ZXJzL25ldC9mdGdtYWMxMDAuYwo+IEBAIC01NDksMTcgKzU0OSwxMiBAQCBzdGF0
aWMgaW50IGZ0Z21hYzEwMF9vZl90b19wbGF0KHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gIHsKPiAg
ICAgICAgIHN0cnVjdCBldGhfcGRhdGEgKnBkYXRhID0gZGV2X2dldF9wbGF0KGRldik7Cj4gICAg
ICAgICBzdHJ1Y3QgZnRnbWFjMTAwX2RhdGEgKnByaXYgPSBkZXZfZ2V0X3ByaXYoZGV2KTsKPiAt
ICAgICAgIGNvbnN0IGNoYXIgKnBoeV9tb2RlOwo+Cj4gICAgICAgICBwZGF0YS0+aW9iYXNlID0g
ZGV2X3JlYWRfYWRkcihkZXYpOwo+IC0gICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSAtMTsK
PiAtICAgICAgIHBoeV9tb2RlID0gZGV2X3JlYWRfc3RyaW5nKGRldiwgInBoeS1tb2RlIik7Cj4g
LSAgICAgICBpZiAocGh5X21vZGUpCj4gLSAgICAgICAgICAgICAgIHBkYXRhLT5waHlfaW50ZXJm
YWNlID0gcGh5X2dldF9pbnRlcmZhY2VfYnlfbmFtZShwaHlfbW9kZSk7Cj4gLSAgICAgICBpZiAo
cGRhdGEtPnBoeV9pbnRlcmZhY2UgPT0gLTEpIHsKPiAtICAgICAgICAgICAgICAgZGV2X2Vycihk
ZXYsICJJbnZhbGlkIFBIWSBpbnRlcmZhY2UgJyVzJ1xuIiwgcGh5X21vZGUpOwo+ICsKPiArICAg
ICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0gZGV2X3JlYWRfcGh5X21vZGUoZGV2KTsKPiArICAg
ICAgIGlmIChwZGF0YS0+cGh5X2ludGVyZmFjZSA9PSBQSFlfSU5URVJGQUNFX01PREVfTk9ORSkK
PiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gLSAgICAgICB9Cj4KPiAgICAgICAg
IHBkYXRhLT5tYXhfc3BlZWQgPSBkZXZfcmVhZF91MzJfZGVmYXVsdChkZXYsICJtYXgtc3BlZWQi
LCAwKTsKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9oaWdtYWN2MzAwLmMgYi9kcml2ZXJz
L25ldC9oaWdtYWN2MzAwLmMKPiBpbmRleCBhYTc5ZDZlZGE4Li5jZThmMmRmZDA5IDEwMDY0NAo+
IC0tLSBhL2RyaXZlcnMvbmV0L2hpZ21hY3YzMDAuYwo+ICsrKyBiL2RyaXZlcnMvbmV0L2hpZ21h
Y3YzMDAuYwo+IEBAIC01NjEsMTkgKzU2MSwxNCBAQCBzdGF0aWMgaW50IGhpZ21hY19yZW1vdmUo
c3RydWN0IHVkZXZpY2UgKmRldikKPiAgc3RhdGljIGludCBoaWdtYWNfb2ZfdG9fcGxhdChzdHJ1
Y3QgdWRldmljZSAqZGV2KQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgaGlnbWFjX3ByaXYgKnByaXYg
PSBkZXZfZ2V0X3ByaXYoZGV2KTsKPiAtICAgICAgIGludCBwaHlpbnRmID0gUEhZX0lOVEVSRkFD
RV9NT0RFX05PTkU7Cj4gLSAgICAgICBjb25zdCBjaGFyICpwaHlfbW9kZTsKPiAgICAgICAgIG9m
bm9kZSBwaHlfbm9kZTsKPgo+ICAgICAgICAgcHJpdi0+YmFzZSA9IGRldl9yZW1hcF9hZGRyX2lu
ZGV4KGRldiwgMCk7Cj4gICAgICAgICBwcml2LT5tYWNpZl9jdHJsID0gZGV2X3JlbWFwX2FkZHJf
aW5kZXgoZGV2LCAxKTsKPgo+IC0gICAgICAgcGh5X21vZGUgPSBkZXZfcmVhZF9zdHJpbmcoZGV2
LCAicGh5LW1vZGUiKTsKPiAtICAgICAgIGlmIChwaHlfbW9kZSkKPiAtICAgICAgICAgICAgICAg
cGh5aW50ZiA9IHBoeV9nZXRfaW50ZXJmYWNlX2J5X25hbWUocGh5X21vZGUpOwo+IC0gICAgICAg
aWYgKHBoeWludGYgPT0gUEhZX0lOVEVSRkFDRV9NT0RFX05PTkUpCj4gKyAgICAgICBwcml2LT5w
aHlpbnRmID0gZGV2X3JlYWRfcGh5X21vZGUoZGV2KTsKPiArICAgICAgIGlmIChwcml2LT5waHlp
bnRmID09IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05FKQo+ICAgICAgICAgICAgICAgICByZXR1cm4g
LUVOT0RFVjsKPiAtICAgICAgIHByaXYtPnBoeWludGYgPSBwaHlpbnRmOwo+Cj4gICAgICAgICBw
aHlfbm9kZSA9IGRldl9yZWFkX3N1Ym5vZGUoZGV2LCAicGh5Iik7Cj4gICAgICAgICBpZiAoIW9m
bm9kZV92YWxpZChwaHlfbm9kZSkpIHsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvbGRwYWFf
ZXRoL2xkcGFhX2V0aC5jIGIvZHJpdmVycy9uZXQvbGRwYWFfZXRoL2xkcGFhX2V0aC5jCj4gaW5k
ZXggNzI1MTczZjYyNy4uYzc3NTU5OGI5MSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC9sZHBh
YV9ldGgvbGRwYWFfZXRoLmMKPiArKysgYi9kcml2ZXJzL25ldC9sZHBhYV9ldGgvbGRwYWFfZXRo
LmMKPiBAQCAtMTEyMCwzMSArMTEyMCwxNCBAQCBzdGF0aWMgdWludDMyX3QgbGRwYWFfZXRoX2dl
dF9kcG1hY19pZChzdHJ1Y3QgdWRldmljZSAqZGV2KQo+ICAgICAgICAgcmV0dXJuIGZkdGRlY19n
ZXRfdWludChnZC0+ZmR0X2Jsb2IsIHBvcnRfbm9kZSwgInJlZyIsIC0xKTsKPiAgfQo+Cj4gLXN0
YXRpYyBjb25zdCBjaGFyICpsZHBhYV9ldGhfZ2V0X3BoeV9tb2RlX3N0cihzdHJ1Y3QgdWRldmlj
ZSAqZGV2KQo+IC17Cj4gLSAgICAgICBpbnQgcG9ydF9ub2RlID0gZGV2X29mX29mZnNldChkZXYp
Owo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5X21vZGVfc3RyOwo+IC0KPiAtICAgICAgIHBoeV9t
b2RlX3N0ciA9IGZkdF9nZXRwcm9wKGdkLT5mZHRfYmxvYiwgcG9ydF9ub2RlLAo+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgInBoeS1jb25uZWN0aW9uLXR5cGUiLCBOVUxMKTsK
PiAtICAgICAgIGlmIChwaHlfbW9kZV9zdHIpCj4gLSAgICAgICAgICAgICAgIHJldHVybiBwaHlf
bW9kZV9zdHI7Cj4gLQo+IC0gICAgICAgcGh5X21vZGVfc3RyID0gZmR0X2dldHByb3AoZ2QtPmZk
dF9ibG9iLCBwb3J0X25vZGUsICJwaHktbW9kZSIsIE5VTEwpOwo+IC0gICAgICAgcmV0dXJuIHBo
eV9tb2RlX3N0cjsKPiAtfQo+IC0KPiAgc3RhdGljIGludCBsZHBhYV9ldGhfYmluZChzdHJ1Y3Qg
dWRldmljZSAqZGV2KQo+ICB7Cj4gLSAgICAgICBjb25zdCBjaGFyICpwaHlfbW9kZV9zdHIgPSBO
VUxMOwo+ICAgICAgICAgdWludDMyX3QgZHBtYWNfaWQ7Cj4gICAgICAgICBjaGFyIGV0aF9uYW1l
WzE2XTsKPiAgICAgICAgIGludCBwaHlfbW9kZSA9IC0xOwo+Cj4gLSAgICAgICBwaHlfbW9kZV9z
dHIgPSBsZHBhYV9ldGhfZ2V0X3BoeV9tb2RlX3N0cihkZXYpOwo+IC0gICAgICAgaWYgKHBoeV9t
b2RlX3N0cikKPiAtICAgICAgICAgICAgICAgcGh5X21vZGUgPSBwaHlfZ2V0X2ludGVyZmFjZV9i
eV9uYW1lKHBoeV9tb2RlX3N0cik7Cj4gLSAgICAgICBpZiAocGh5X21vZGUgPT0gLTEpIHsKPiAr
ICAgICAgIHBoeV9tb2RlID0gZGV2X3JlYWRfcGh5X21vZGUoZGV2KTsKPiArICAgICAgIGlmIChw
aHlfbW9kZSA9PSBQSFlfSU5URVJGQUNFX01PREVfTk9ORSkgewo+ICAgICAgICAgICAgICAgICBk
ZXZfZXJyKGRldiwgImluY29ycmVjdCBwaHkgbW9kZVxuIik7Cj4gICAgICAgICAgICAgICAgIHJl
dHVybiAtRUlOVkFMOwo+ICAgICAgICAgfQo+IEBAIC0xMTU1LDcgKzExMzgsOCBAQCBzdGF0aWMg
aW50IGxkcGFhX2V0aF9iaW5kKHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gICAgICAgICAgICAgICAg
IHJldHVybiAtRUlOVkFMOwo+ICAgICAgICAgfQo+Cj4gLSAgICAgICBzcHJpbnRmKGV0aF9uYW1l
LCAiRFBNQUMlZEAlcyIsIGRwbWFjX2lkLCBwaHlfbW9kZV9zdHIpOwo+ICsgICAgICAgc3ByaW50
ZihldGhfbmFtZSwgIkRQTUFDJWRAJXMiLCBkcG1hY19pZCwKPiArICAgICAgICAgICAgICAgcGh5
X3N0cmluZ19mb3JfaW50ZXJmYWNlKHBoeV9tb2RlKSk7Cj4gICAgICAgICBkZXZpY2Vfc2V0X25h
bWUoZGV2LCBldGhfbmFtZSk7Cj4KPiAgICAgICAgIHJldHVybiAwOwo+IEBAIC0xMTY0LDExICsx
MTQ4LDkgQEAgc3RhdGljIGludCBsZHBhYV9ldGhfYmluZChzdHJ1Y3QgdWRldmljZSAqZGV2KQo+
ICBzdGF0aWMgaW50IGxkcGFhX2V0aF9vZl90b19wbGF0KHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4g
IHsKPiAgICAgICAgIHN0cnVjdCBsZHBhYV9ldGhfcHJpdiAqcHJpdiA9IGRldl9nZXRfcHJpdihk
ZXYpOwo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5X21vZGVfc3RyOwo+Cj4gICAgICAgICBwcml2
LT5kcG1hY19pZCA9IGxkcGFhX2V0aF9nZXRfZHBtYWNfaWQoZGV2KTsKPiAtICAgICAgIHBoeV9t
b2RlX3N0ciA9IGxkcGFhX2V0aF9nZXRfcGh5X21vZGVfc3RyKGRldik7Cj4gLSAgICAgICBwcml2
LT5waHlfbW9kZSA9IHBoeV9nZXRfaW50ZXJmYWNlX2J5X25hbWUocGh5X21vZGVfc3RyKTsKPiAr
ICAgICAgIHByaXYtPnBoeV9tb2RlID0gZGV2X3JlYWRfcGh5X21vZGUoZGV2KTsKPgo+ICAgICAg
ICAgcmV0dXJuIDA7Cj4gIH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvbWFjYi5jIGIvZHJp
dmVycy9uZXQvbWFjYi5jCj4gaW5kZXggMzdlZWQ1OWE2OS4uMzE3YjM4MGU4ZiAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL25ldC9tYWNiLmMKPiArKysgYi9kcml2ZXJzL25ldC9tYWNiLmMKPiBAQCAt
MTM2MCwxNyArMTM2MCwxMSBAQCBzdGF0aWMgaW50IG1hY2JfZXRoX3Byb2JlKHN0cnVjdCB1ZGV2
aWNlICpkZXYpCj4gICAgICAgICBzdHJ1Y3QgZXRoX3BkYXRhICpwZGF0YSA9IGRldl9nZXRfcGxh
dChkZXYpOwo+ICAgICAgICAgc3RydWN0IG1hY2JfZGV2aWNlICptYWNiID0gZGV2X2dldF9wcml2
KGRldik7Cj4gICAgICAgICBzdHJ1Y3Qgb2Zub2RlX3BoYW5kbGVfYXJncyBwaGFuZGxlX2FyZ3M7
Cj4gLSAgICAgICBjb25zdCBjaGFyICpwaHlfbW9kZTsKPiAgICAgICAgIGludCByZXQ7Cj4KPiAt
ICAgICAgIHBoeV9tb2RlID0gZGV2X3JlYWRfcHJvcChkZXYsICJwaHktbW9kZSIsIE5VTEwpOwo+
IC0KPiAtICAgICAgIGlmIChwaHlfbW9kZSkKPiAtICAgICAgICAgICAgICAgbWFjYi0+cGh5X2lu
dGVyZmFjZSA9IHBoeV9nZXRfaW50ZXJmYWNlX2J5X25hbWUocGh5X21vZGUpOwo+IC0gICAgICAg
aWYgKG1hY2ItPnBoeV9pbnRlcmZhY2UgPT0gLTEpIHsKPiAtICAgICAgICAgICAgICAgZGVidWco
IiVzOiBJbnZhbGlkIFBIWSBpbnRlcmZhY2UgJyVzJ1xuIiwgX19mdW5jX18sIHBoeV9tb2RlKTsK
PiArICAgICAgIG1hY2ItPnBoeV9pbnRlcmZhY2UgPSBkZXZfcmVhZF9waHlfbW9kZShkZXYpOwo+
ICsgICAgICAgaWYgKG1hY2ItPnBoeV9pbnRlcmZhY2UgPT0gUEhZX0lOVEVSRkFDRV9NT0RFX05P
TkUpCj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+IC0gICAgICAgfQo+Cj4gICAg
ICAgICAvKiBSZWFkIHBoeWFkZHIgZnJvbSBEVCAqLwo+ICAgICAgICAgaWYgKCFkZXZfcmVhZF9w
aGFuZGxlX3dpdGhfYXJncyhkZXYsICJwaHktaGFuZGxlIiwgTlVMTCwgMCwgMCwKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9uZXQvbXQ3NjIwLWV0aC5jIGIvZHJpdmVycy9uZXQvbXQ3NjIwLWV0aC5j
Cj4gaW5kZXggMjIyMjUwZDUyYS4uMjRmY2I5MzczZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25l
dC9tdDc2MjAtZXRoLmMKPiArKysgYi9kcml2ZXJzL25ldC9tdDc2MjAtZXRoLmMKPiBAQCAtMTA0
OCwzMyArMTA0OCwyMCBAQCBzdGF0aWMgaW50IG10NzYyMF9ldGhfcGFyc2VfZ3N3X3BvcnQoc3Ry
dWN0IG10NzYyMF9ldGhfcHJpdiAqcHJpdiwgdTMyIGlkeCwKPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgb2Zub2RlIG5vZGUpCj4gIHsKPiAgICAgICAgIG9mbm9kZSBzdWJu
b2RlOwo+IC0gICAgICAgY29uc3QgY2hhciAqc3RyOwo+IC0gICAgICAgaW50IG1vZGUsIHNwZWVk
LCByZXQ7Cj4gKyAgICAgICBpbnQgc3BlZWQsIHJldDsKPiAgICAgICAgIHUzMiBwaHlfYWRkcjsK
Pgo+IC0gICAgICAgc3RyID0gb2Zub2RlX3JlYWRfc3RyaW5nKG5vZGUsICJwaHktbW9kZSIpOwo+
IC0gICAgICAgaWYgKHN0cikgewo+IC0gICAgICAgICAgICAgICBtb2RlID0gcGh5X2dldF9pbnRl
cmZhY2VfYnlfbmFtZShzdHIpOwo+IC0gICAgICAgICAgICAgICBpZiAobW9kZSA8IDApIHsKPiAt
ICAgICAgICAgICAgICAgICAgICAgICBkZXZfZXJyKHByaXYtPmRldiwgIm10NzYyMF9ldGg6IGlu
dmFsaWQgcGh5LW1vZGVcbiIpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtRUlO
VkFMOwo+IC0gICAgICAgICAgICAgICB9Cj4gLQo+IC0gICAgICAgICAgICAgICBzd2l0Y2ggKG1v
ZGUpIHsKPiAtICAgICAgICAgICAgICAgY2FzZSBQSFlfSU5URVJGQUNFX01PREVfTUlJOgo+IC0g
ICAgICAgICAgICAgICBjYXNlIFBIWV9JTlRFUkZBQ0VfTU9ERV9STUlJOgo+IC0gICAgICAgICAg
ICAgICBjYXNlIFBIWV9JTlRFUkZBQ0VfTU9ERV9SR01JSToKPiAtICAgICAgICAgICAgICAgY2Fz
ZSBQSFlfSU5URVJGQUNFX01PREVfTk9ORToKPiAtICAgICAgICAgICAgICAgICAgICAgICBicmVh
azsKPiAtICAgICAgICAgICAgICAgZGVmYXVsdDoKPiAtICAgICAgICAgICAgICAgICAgICAgICBk
ZXZfZXJyKHByaXYtPmRldiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtdDc2
MjBfZXRoOiB1bnN1cHBvcnRlZCBwaHktbW9kZVxuIik7Cj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgcmV0dXJuIC1FTk9UU1VQUDsKPiAtICAgICAgICAgICAgICAgfQo+ICsgICAgICAgcHJpdi0+
cG9ydF9jZmdbaWR4XS5tb2RlID0gb2Zub2RlX3JlYWRfcGh5X21vZGUobm9kZSk7Cj4KPiAtICAg
ICAgICAgICAgICAgcHJpdi0+cG9ydF9jZmdbaWR4XS5tb2RlID0gbW9kZTsKPiAtICAgICAgIH0g
ZWxzZSB7Cj4gLSAgICAgICAgICAgICAgIHByaXYtPnBvcnRfY2ZnW2lkeF0ubW9kZSA9IFBIWV9J
TlRFUkZBQ0VfTU9ERV9OT05FOwo+ICsgICAgICAgc3dpdGNoIChwcml2LT5wb3J0X2NmZ1tpZHhd
Lm1vZGUpIHsKPiArICAgICAgIGNhc2UgUEhZX0lOVEVSRkFDRV9NT0RFX01JSToKPiArICAgICAg
IGNhc2UgUEhZX0lOVEVSRkFDRV9NT0RFX1JNSUk6Cj4gKyAgICAgICBjYXNlIFBIWV9JTlRFUkZB
Q0VfTU9ERV9SR01JSToKPiArICAgICAgIGNhc2UgUEhZX0lOVEVSRkFDRV9NT0RFX05PTkU6Cj4g
KyAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgZGVmYXVsdDoKPiArICAgICAgICAgICAg
ICAgZGV2X2Vycihwcml2LT5kZXYsICJtdDc2MjBfZXRoOiB1bnN1cHBvcnRlZCBwaHktbW9kZVxu
Iik7Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRU5PVFNVUFA7Cj4gICAgICAgICB9Cj4KPiAg
ICAgICAgIHN1Ym5vZGUgPSBvZm5vZGVfZmluZF9zdWJub2RlKG5vZGUsICJmaXhlZC1saW5rIik7
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L210a19ldGguYyBiL2RyaXZlcnMvbmV0L210a19l
dGguYwo+IGluZGV4IDI2ZjAyODQ3YTIuLmQ2MDY1ZGI1ZmIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9uZXQvbXRrX2V0aC5jCj4gKysrIGIvZHJpdmVycy9uZXQvbXRrX2V0aC5jCj4gQEAgLTE0NDcs
MTEgKzE0NDcsOSBAQCBzdGF0aWMgaW50IG10a19ldGhfb2ZfdG9fcGxhdChzdHJ1Y3QgdWRldmlj
ZSAqZGV2KQo+ICAgICAgICAgcHJpdi0+Z21hY19pZCA9IGRldl9yZWFkX3UzMl9kZWZhdWx0KGRl
diwgIm1lZGlhdGVrLGdtYWMtaWQiLCAwKTsKPgo+ICAgICAgICAgLyogSW50ZXJmYWNlIG1vZGUg
aXMgcmVxdWlyZWQgKi8KPiAtICAgICAgIHN0ciA9IGRldl9yZWFkX3N0cmluZyhkZXYsICJwaHkt
bW9kZSIpOwo+IC0gICAgICAgaWYgKHN0cikgewo+IC0gICAgICAgICAgICAgICBwZGF0YS0+cGh5
X2ludGVyZmFjZSA9IHBoeV9nZXRfaW50ZXJmYWNlX2J5X25hbWUoc3RyKTsKPiAtICAgICAgICAg
ICAgICAgcHJpdi0+cGh5X2ludGVyZmFjZSA9IHBkYXRhLT5waHlfaW50ZXJmYWNlOwo+IC0gICAg
ICAgfSBlbHNlIHsKPiArICAgICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0gZGV2X3JlYWRfcGh5
X21vZGUoZGV2KTsKPiArICAgICAgIHByaXYtPnBoeV9pbnRlcmZhY2UgPSBwZGF0YS0+cGh5X2lu
dGVyZmFjZTsKPiArICAgICAgIGlmIChwZGF0YS0+cGh5X2ludGVyZmFjZSA9PSBQSFlfSU5URVJG
QUNFX01PREVfTk9ORSkgewo+ICAgICAgICAgICAgICAgICBwcmludGYoImVycm9yOiBwaHktbW9k
ZSBpcyBub3Qgc2V0XG4iKTsKPiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gICAg
ICAgICB9Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L212Z2JlLmMgYi9kcml2ZXJzL25ldC9t
dmdiZS5jCj4gaW5kZXggOTU0YmY4NjEyMS4uMzJlYzBiNDM3ZCAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL25ldC9tdmdiZS5jCj4gKysrIGIvZHJpdmVycy9uZXQvbXZnYmUuYwo+IEBAIC05OTMsNyAr
OTkzLDYgQEAgc3RhdGljIGludCBtdmdiZV9vZl90b19wbGF0KHN0cnVjdCB1ZGV2aWNlICpkZXYp
Cj4gICAgICAgICBzdHJ1Y3QgbXZnYmVfZGV2aWNlICpkbXZnYmUgPSBkZXZfZ2V0X3ByaXYoZGV2
KTsKPiAgICAgICAgIHZvaWQgKmJsb2IgPSAodm9pZCAqKWdkLT5mZHRfYmxvYjsKPiAgICAgICAg
IGludCBub2RlID0gZGV2X29mX29mZnNldChkZXYpOwo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5
X21vZGU7Cj4gICAgICAgICBpbnQgZmxfbm9kZTsKPiAgICAgICAgIGludCBwbm9kZTsKPiAgICAg
ICAgIHVuc2lnbmVkIGxvbmcgYWRkcjsKPiBAQCAtMTAwNSwxMCArMTAwNCw4IEBAIHN0YXRpYyBp
bnQgbXZnYmVfb2ZfdG9fcGxhdChzdHJ1Y3QgdWRldmljZSAqZGV2KQo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWFydmVsbCxraXJrd29vZC1ldGgtcG9y
dCIpOwo+Cj4gICAgICAgICAvKiBHZXQgcGh5LW1vZGUgLyBwaHlfaW50ZXJmYWNlIGZyb20gRFQg
Ki8KPiAtICAgICAgIHBoeV9tb2RlID0gZmR0X2dldHByb3AoZ2QtPmZkdF9ibG9iLCBwbm9kZSwg
InBoeS1tb2RlIiwgTlVMTCk7Cj4gLSAgICAgICBpZiAocGh5X21vZGUpCj4gLSAgICAgICAgICAg
ICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0gcGh5X2dldF9pbnRlcmZhY2VfYnlfbmFtZShwaHlf
bW9kZSk7Cj4gLSAgICAgICBlbHNlCj4gKyAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IGRl
dl9yZWFkX3BoeV9tb2RlKGRldik7Cj4gKyAgICAgICBpZiAocGRhdGEtPnBoeV9pbnRlcmZhY2Ug
PT0gUEhZX0lOVEVSRkFDRV9NT0RFX05PTkUpCj4gICAgICAgICAgICAgICAgIHBkYXRhLT5waHlf
aW50ZXJmYWNlID0gUEhZX0lOVEVSRkFDRV9NT0RFX0dNSUk7Cj4KPiAgICAgICAgIGRtdmdiZS0+
cGh5X2ludGVyZmFjZSA9IHBkYXRhLT5waHlfaW50ZXJmYWNlOwo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL25ldC9tdm5ldGEuYyBiL2RyaXZlcnMvbmV0L212bmV0YS5jCj4gaW5kZXggNGE0MjY4YzJi
Mi4uZDMxYjk2YTlkOCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC9tdm5ldGEuYwo+ICsrKyBi
L2RyaXZlcnMvbmV0L212bmV0YS5jCj4gQEAgLTE3OTksMjAgKzE3OTksMTMgQEAgc3RhdGljIGNv
bnN0IHN0cnVjdCBldGhfb3BzIG12bmV0YV9vcHMgPSB7Cj4gIHN0YXRpYyBpbnQgbXZuZXRhX29m
X3RvX3BsYXQoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgewo+ICAgICAgICAgc3RydWN0IGV0aF9w
ZGF0YSAqcGRhdGEgPSBkZXZfZ2V0X3BsYXQoZGV2KTsKPiAtICAgICAgIGNvbnN0IGNoYXIgKnBo
eV9tb2RlOwo+Cj4gICAgICAgICBwZGF0YS0+aW9iYXNlID0gZGV2X3JlYWRfYWRkcihkZXYpOwo+
Cj4gICAgICAgICAvKiBHZXQgcGh5LW1vZGUgLyBwaHlfaW50ZXJmYWNlIGZyb20gRFQgKi8KPiAt
ICAgICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0gLTE7Cj4gLSAgICAgICBwaHlfbW9kZSA9IGZk
dF9nZXRwcm9wKGdkLT5mZHRfYmxvYiwgZGV2X29mX29mZnNldChkZXYpLCAicGh5LW1vZGUiLAo+
IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOVUxMKTsKPiAtICAgICAgIGlmIChwaHlf
bW9kZSkKPiAtICAgICAgICAgICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSBwaHlfZ2V0X2lu
dGVyZmFjZV9ieV9uYW1lKHBoeV9tb2RlKTsKPiAtICAgICAgIGlmIChwZGF0YS0+cGh5X2ludGVy
ZmFjZSA9PSAtMSkgewo+IC0gICAgICAgICAgICAgICBkZWJ1ZygiJXM6IEludmFsaWQgUEhZIGlu
dGVyZmFjZSAnJXMnXG4iLCBfX2Z1bmNfXywgcGh5X21vZGUpOwo+ICsgICAgICAgcGRhdGEtPnBo
eV9pbnRlcmZhY2UgPSBkZXZfcmVhZF9waHlfbW9kZShkZXYpOwo+ICsgICAgICAgaWYgKHBkYXRh
LT5waHlfaW50ZXJmYWNlID09IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05FKQo+ICAgICAgICAgICAg
ICAgICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPgo+ICAgICAgICAgcmV0dXJuIDA7Cj4g
IH0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvbXZwcDIuYyBiL2RyaXZlcnMvbmV0L212cHAy
LmMKPiBpbmRleCA0YzBhN2IwYTlmLi5kZmRkYWMxODBmIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
bmV0L212cHAyLmMKPiArKysgYi9kcml2ZXJzL25ldC9tdnBwMi5jCj4gQEAgLTQ3ODYsMTEgKzQ3
ODYsOSBAQCBzdGF0aWMgaW50IG12cHAyX3BvcnRfaW5pdChzdHJ1Y3QgdWRldmljZSAqZGV2LCBz
dHJ1Y3QgbXZwcDJfcG9ydCAqcG9ydCkKPiAgc3RhdGljIGludCBwaHlfaW5mb19wYXJzZShzdHJ1
Y3QgdWRldmljZSAqZGV2LCBzdHJ1Y3QgbXZwcDJfcG9ydCAqcG9ydCkKPiAgewo+ICAgICAgICAg
aW50IHBvcnRfbm9kZSA9IGRldl9vZl9vZmZzZXQoZGV2KTsKPiAtICAgICAgIGNvbnN0IGNoYXIg
KnBoeV9tb2RlX3N0cjsKPiAgICAgICAgIGludCBwaHlfbm9kZTsKPiAgICAgICAgIHUzMiBpZDsK
PiAgICAgICAgIHUzMiBwaHlhZGRyID0gMDsKPiAtICAgICAgIGludCBwaHlfbW9kZSA9IC0xOwo+
ICAgICAgICAgaW50IGZpeGVkX2xpbmsgPSAwOwo+ICAgICAgICAgaW50IHJldDsKPgo+IEBAIC00
ODIxLDEwICs0ODE5LDggQEAgc3RhdGljIGludCBwaHlfaW5mb19wYXJzZShzdHJ1Y3QgdWRldmlj
ZSAqZGV2LCBzdHJ1Y3QgbXZwcDJfcG9ydCAqcG9ydCkKPiAgICAgICAgICAgICAgICAgcGh5YWRk
ciA9IFBIWV9NQVhfQUREUjsKPiAgICAgICAgIH0KPgo+IC0gICAgICAgcGh5X21vZGVfc3RyID0g
ZmR0X2dldHByb3AoZ2QtPmZkdF9ibG9iLCBwb3J0X25vZGUsICJwaHktbW9kZSIsIE5VTEwpOwo+
IC0gICAgICAgaWYgKHBoeV9tb2RlX3N0cikKPiAtICAgICAgICAgICAgICAgcGh5X21vZGUgPSBw
aHlfZ2V0X2ludGVyZmFjZV9ieV9uYW1lKHBoeV9tb2RlX3N0cik7Cj4gLSAgICAgICBpZiAocGh5
X21vZGUgPT0gLTEpIHsKPiArICAgICAgIHBvcnQtPnBoeV9pbnRlcmZhY2UgPSBkZXZfcmVhZF9w
aHlfbW9kZShkZXYpOwo+ICsgICAgICAgaWYgKHBvcnQtPnBoeV9pbnRlcmZhY2UgPT0gUEhZX0lO
VEVSRkFDRV9NT0RFX05PTkUpIHsKPiAgICAgICAgICAgICAgICAgZGV2X2VycihkZXYsICJpbmNv
cnJlY3QgcGh5IG1vZGVcbiIpOwo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAg
ICAgICAgIH0KPiBAQCAtNDg0Nyw3ICs0ODQzLDYgQEAgc3RhdGljIGludCBwaHlfaW5mb19wYXJz
ZShzdHJ1Y3QgdWRldmljZSAqZGV2LCBzdHJ1Y3QgbXZwcDJfcG9ydCAqcG9ydCkKPiAgICAgICAg
ICAgICAgICAgcG9ydC0+Zmlyc3RfcnhxID0gcG9ydC0+aWQgKiByeHFfbnVtYmVyOwo+ICAgICAg
ICAgZWxzZQo+ICAgICAgICAgICAgICAgICBwb3J0LT5maXJzdF9yeHEgPSBwb3J0LT5pZCAqIHBv
cnQtPnByaXYtPm1heF9wb3J0X3J4cXM7Cj4gLSAgICAgICBwb3J0LT5waHlfaW50ZXJmYWNlID0g
cGh5X21vZGU7Cj4gICAgICAgICBwb3J0LT5waHlhZGRyID0gcGh5YWRkcjsKPgo+ICAgICAgICAg
cmV0dXJuIDA7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3BoeS9waHkuYyBiL2RyaXZlcnMv
bmV0L3BoeS9waHkuYwo+IGluZGV4IGZlNmRiZGFlZTQuLjQxMDk2NzZhNTEgMTAwNjQ0Cj4gLS0t
IGEvZHJpdmVycy9uZXQvcGh5L3BoeS5jCj4gKysrIGIvZHJpdmVycy9uZXQvcGh5L3BoeS5jCj4g
QEAgLTk4MiwyNSArOTgyLDE2IEBAIHN0YXRpYyBzdHJ1Y3QgcGh5X2RldmljZSAqcGh5X2Nvbm5l
Y3RfZ21paTJyZ21paShzdHJ1Y3QgbWlpX2RldiAqYnVzLAo+ICAgKi8KPiAgc3RydWN0IHBoeV9k
ZXZpY2UgKmZpeGVkX3BoeV9jcmVhdGUob2Zub2RlIG5vZGUpCj4gIHsKPiAtICAgICAgIHBoeV9p
bnRlcmZhY2VfdCBpbnRlcmZhY2UgPSBQSFlfSU5URVJGQUNFX01PREVfTk9ORTsKPiAgICAgICAg
IHN0cnVjdCBwaHlfZGV2aWNlICpwaHlkZXY7Cj4gLSAgICAgICBjb25zdCBjaGFyICppZl9zdHI7
Cj4gICAgICAgICBvZm5vZGUgc3Vibm9kZTsKPgo+IC0gICAgICAgaWZfc3RyID0gb2Zub2RlX3Jl
YWRfc3RyaW5nKG5vZGUsICJwaHktbW9kZSIpOwo+IC0gICAgICAgaWYgKCFpZl9zdHIpIHsKPiAt
ICAgICAgICAgICAgICAgaWZfc3RyID0gb2Zub2RlX3JlYWRfc3RyaW5nKG5vZGUsICJwaHktY29u
bmVjdGlvbi10eXBlIik7Cj4gLSAgICAgICB9Cj4gLSAgICAgICBpZiAoaWZfc3RyKSB7Cj4gLSAg
ICAgICAgICAgICAgIGludGVyZmFjZSA9IHBoeV9nZXRfaW50ZXJmYWNlX2J5X25hbWUoaWZfc3Ry
KTsKPiAtICAgICAgIH0KPiAtCj4gICAgICAgICBzdWJub2RlID0gb2Zub2RlX2ZpbmRfc3Vibm9k
ZShub2RlLCAiZml4ZWQtbGluayIpOwo+ICAgICAgICAgaWYgKCFvZm5vZGVfdmFsaWQoc3Vibm9k
ZSkpIHsKPiAgICAgICAgICAgICAgICAgcmV0dXJuIE5VTEw7Cj4gICAgICAgICB9Cj4KPiAtICAg
ICAgIHBoeWRldiA9IHBoeV9kZXZpY2VfY3JlYXRlKE5VTEwsIDAsIFBIWV9GSVhFRF9JRCwgZmFs
c2UsIGludGVyZmFjZSk7Cj4gKyAgICAgICBwaHlkZXYgPSBwaHlfZGV2aWNlX2NyZWF0ZShOVUxM
LCAwLCBQSFlfRklYRURfSUQsIGZhbHNlLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgb2Zub2RlX3JlYWRfcGh5X21vZGUobm9kZSkpOwo+ICAgICAgICAgaWYgKHBoeWRldikK
PiAgICAgICAgICAgICAgICAgcGh5ZGV2LT5ub2RlID0gc3Vibm9kZTsKPgo+IEBAIC0xMDkzLDE1
ICsxMDg0LDMgQEAgaW50IHBoeV9zaHV0ZG93bihzdHJ1Y3QgcGh5X2RldmljZSAqcGh5ZGV2KQo+
Cj4gICAgICAgICByZXR1cm4gMDsKPiAgfQo+IC0KPiAtaW50IHBoeV9nZXRfaW50ZXJmYWNlX2J5
X25hbWUoY29uc3QgY2hhciAqc3RyKQo+IC17Cj4gLSAgICAgICBpbnQgaTsKPiAtCj4gLSAgICAg
ICBmb3IgKGkgPSAwOyBpIDwgUEhZX0lOVEVSRkFDRV9NT0RFX0NPVU5UOyBpKyspIHsKPiAtICAg
ICAgICAgICAgICAgaWYgKCFzdHJjbXAoc3RyLCBwaHlfaW50ZXJmYWNlX3N0cmluZ3NbaV0pKQo+
IC0gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpOwo+IC0gICAgICAgfQo+IC0KPiAtICAg
ICAgIHJldHVybiAtMTsKPiAtfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9waWMzMl9ldGgu
YyBiL2RyaXZlcnMvbmV0L3BpYzMyX2V0aC5jCj4gaW5kZXggNWE2NzhkMWNmOS4uMDNlYjUxZTUx
ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC9waWMzMl9ldGguYwo+ICsrKyBiL2RyaXZlcnMv
bmV0L3BpYzMyX2V0aC5jCj4gQEAgLTUzNCw3ICs1MzQsNiBAQCBzdGF0aWMgaW50IHBpYzMyX2V0
aF9wcm9iZShzdHJ1Y3QgdWRldmljZSAqZGV2KQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgZXRoX3Bk
YXRhICpwZGF0YSA9IGRldl9nZXRfcGxhdChkZXYpOwo+ICAgICAgICAgc3RydWN0IHBpYzMyZXRo
X2RldiAqcHJpdiA9IGRldl9nZXRfcHJpdihkZXYpOwo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5
X21vZGU7Cj4gICAgICAgICB2b2lkIF9faW9tZW0gKmlvYmFzZTsKPiAgICAgICAgIGZkdF9hZGRy
X3QgYWRkcjsKPiAgICAgICAgIGZkdF9zaXplX3Qgc2l6ZTsKPiBAQCAtNTUwLDE1ICs1NDksOSBA
QCBzdGF0aWMgaW50IHBpYzMyX2V0aF9wcm9iZShzdHJ1Y3QgdWRldmljZSAqZGV2KQo+ICAgICAg
ICAgcGRhdGEtPmlvYmFzZSA9IChwaHlzX2FkZHJfdClhZGRyOwo+Cj4gICAgICAgICAvKiBnZXQg
cGh5IG1vZGUgKi8KPiAtICAgICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0gLTE7Cj4gLSAgICAg
ICBwaHlfbW9kZSA9IGZkdF9nZXRwcm9wKGdkLT5mZHRfYmxvYiwgZGV2X29mX29mZnNldChkZXYp
LCAicGh5LW1vZGUiLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOVUxMKTsKPiAt
ICAgICAgIGlmIChwaHlfbW9kZSkKPiAtICAgICAgICAgICAgICAgcGRhdGEtPnBoeV9pbnRlcmZh
Y2UgPSBwaHlfZ2V0X2ludGVyZmFjZV9ieV9uYW1lKHBoeV9tb2RlKTsKPiAtICAgICAgIGlmIChw
ZGF0YS0+cGh5X2ludGVyZmFjZSA9PSAtMSkgewo+IC0gICAgICAgICAgICAgICBkZWJ1ZygiJXM6
IEludmFsaWQgUEhZIGludGVyZmFjZSAnJXMnXG4iLCBfX2Z1bmNfXywgcGh5X21vZGUpOwo+ICsg
ICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSBkZXZfcmVhZF9waHlfbW9kZShkZXYpOwo+ICsg
ICAgICAgaWYgKHBkYXRhLT5waHlfaW50ZXJmYWNlID09IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05F
KQo+ICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPgo+ICAgICAg
ICAgLyogZ2V0IHBoeSBhZGRyICovCj4gICAgICAgICBvZmZzZXQgPSBmZHRkZWNfbG9va3VwX3Bo
YW5kbGUoZ2QtPmZkdF9ibG9iLCBkZXZfb2Zfb2Zmc2V0KGRldiksCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvbmV0L3FlL2RtX3FlX3VlYy5jIGIvZHJpdmVycy9uZXQvcWUvZG1fcWVfdWVjLmMKPiBp
bmRleCBhMTJjOGNkMmFjLi41YTY2ZDcyNmNkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbmV0L3Fl
L2RtX3FlX3VlYy5jCj4gKysrIGIvZHJpdmVycy9uZXQvcWUvZG1fcWVfdWVjLmMKPiBAQCAtMTEz
MywxOSArMTEzMywxMiBAQCBzdGF0aWMgaW50IHFlX3VlY19yZW1vdmUoc3RydWN0IHVkZXZpY2Ug
KmRldikKPiAgc3RhdGljIGludCBxZV91ZWNfb2ZfdG9fcGxhdChzdHJ1Y3QgdWRldmljZSAqZGV2
KQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgZXRoX3BkYXRhICpwZGF0YSA9IGRldl9nZXRfcGxhdChk
ZXYpOwo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5X21vZGU7Cj4KPiAgICAgICAgIHBkYXRhLT5p
b2Jhc2UgPSAocGh5c19hZGRyX3QpZGV2ZmR0X2dldF9hZGRyKGRldik7Cj4KPiAtICAgICAgIHBk
YXRhLT5waHlfaW50ZXJmYWNlID0gLTE7Cj4gLSAgICAgICBwaHlfbW9kZSA9IGZkdF9nZXRwcm9w
KGdkLT5mZHRfYmxvYiwgZGV2X29mX29mZnNldChkZXYpLAo+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAicGh5LWNvbm5lY3Rpb24tdHlwZSIsIE5VTEwpOwo+IC0gICAgICAgaWYgKHBo
eV9tb2RlKQo+IC0gICAgICAgICAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IHBoeV9nZXRf
aW50ZXJmYWNlX2J5X25hbWUocGh5X21vZGUpOwo+IC0gICAgICAgaWYgKHBkYXRhLT5waHlfaW50
ZXJmYWNlID09IC0xKSB7Cj4gLSAgICAgICAgICAgICAgIGRlYnVnKCIlczogSW52YWxpZCBQSFkg
aW50ZXJmYWNlICclcydcbiIsIF9fZnVuY19fLCBwaHlfbW9kZSk7Cj4gKyAgICAgICBwZGF0YS0+
cGh5X2ludGVyZmFjZSA9IGRldl9yZWFkX3BoeV9tb2RlKGRldik7Cj4gKyAgICAgICBpZiAocGRh
dGEtPnBoeV9pbnRlcmZhY2UgPT0gUEhZX0lOVEVSRkFDRV9NT0RFX05PTkUpCj4gICAgICAgICAg
ICAgICAgIHJldHVybiAtRUlOVkFMOwo+IC0gICAgICAgfQo+Cj4gICAgICAgICByZXR1cm4gMDsK
PiAgfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9yYXZiLmMgYi9kcml2ZXJzL25ldC9yYXZi
LmMKPiBpbmRleCA0MDc4ZDMzYmI1Li5mNmQzODZiZDZiIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
bmV0L3JhdmIuYwo+ICsrKyBiL2RyaXZlcnMvbmV0L3JhdmIuYwo+IEBAIC02NzQsMjAgKzY3NCwx
MyBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGV0aF9vcHMgcmF2Yl9vcHMgPSB7Cj4gIGludCByYXZi
X29mX3RvX3BsYXQoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgewo+ICAgICAgICAgc3RydWN0IGV0
aF9wZGF0YSAqcGRhdGEgPSBkZXZfZ2V0X3BsYXQoZGV2KTsKPiAtICAgICAgIGNvbnN0IGNoYXIg
KnBoeV9tb2RlOwo+ICAgICAgICAgY29uc3QgZmR0MzJfdCAqY2VsbDsKPiAtICAgICAgIGludCBy
ZXQgPSAwOwo+Cj4gICAgICAgICBwZGF0YS0+aW9iYXNlID0gZGV2X3JlYWRfYWRkcihkZXYpOwo+
IC0gICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSAtMTsKPiAtICAgICAgIHBoeV9tb2RlID0g
ZmR0X2dldHByb3AoZ2QtPmZkdF9ibG9iLCBkZXZfb2Zfb2Zmc2V0KGRldiksICJwaHktbW9kZSIs
Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5VTEwpOwo+IC0gICAgICAgaWYgKHBo
eV9tb2RlKQo+IC0gICAgICAgICAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IHBoeV9nZXRf
aW50ZXJmYWNlX2J5X25hbWUocGh5X21vZGUpOwo+IC0gICAgICAgaWYgKHBkYXRhLT5waHlfaW50
ZXJmYWNlID09IC0xKSB7Cj4gLSAgICAgICAgICAgICAgIGRlYnVnKCIlczogSW52YWxpZCBQSFkg
aW50ZXJmYWNlICclcydcbiIsIF9fZnVuY19fLCBwaHlfbW9kZSk7Cj4gKwo+ICsgICAgICAgcGRh
dGEtPnBoeV9pbnRlcmZhY2UgPSBkZXZfcmVhZF9waHlfbW9kZShkZXYpOwo+ICsgICAgICAgaWYg
KHBkYXRhLT5waHlfaW50ZXJmYWNlID09IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05FKQo+ICAgICAg
ICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPgo+ICAgICAgICAgcGRhdGEt
Pm1heF9zcGVlZCA9IDEwMDA7Cj4gICAgICAgICBjZWxsID0gZmR0X2dldHByb3AoZ2QtPmZkdF9i
bG9iLCBkZXZfb2Zfb2Zmc2V0KGRldiksICJtYXgtc3BlZWQiLCBOVUxMKTsKPiBAQCAtNjk2LDcg
KzY4OSw3IEBAIGludCByYXZiX29mX3RvX3BsYXQoc3RydWN0IHVkZXZpY2UgKmRldikKPgo+ICAg
ICAgICAgc3ByaW50ZihiYl9taWlwaHlfYnVzZXNbMF0ubmFtZSwgZGV2LT5uYW1lKTsKPgo+IC0g
ICAgICAgcmV0dXJuIHJldDsKPiArICAgICAgIHJldHVybiAwOwo+ICB9Cj4KPiAgc3RhdGljIGNv
bnN0IHN0cnVjdCB1ZGV2aWNlX2lkIHJhdmJfaWRzW10gPSB7Cj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvbmV0L3NoX2V0aC5jIGIvZHJpdmVycy9uZXQvc2hfZXRoLmMKPiBpbmRleCA0MDU1ZjA3YjJm
Li4wNGM5YzJkOTY4IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbmV0L3NoX2V0aC5jCj4gKysrIGIv
ZHJpdmVycy9uZXQvc2hfZXRoLmMKPiBAQCAtOTE1LDIwICs5MTUsMTMgQEAgc3RhdGljIGNvbnN0
IHN0cnVjdCBldGhfb3BzIHNoX2V0aGVyX29wcyA9IHsKPiAgaW50IHNoX2V0aGVyX29mX3RvX3Bs
YXQoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgewo+ICAgICAgICAgc3RydWN0IGV0aF9wZGF0YSAq
cGRhdGEgPSBkZXZfZ2V0X3BsYXQoZGV2KTsKPiAtICAgICAgIGNvbnN0IGNoYXIgKnBoeV9tb2Rl
Owo+ICAgICAgICAgY29uc3QgZmR0MzJfdCAqY2VsbDsKPiAtICAgICAgIGludCByZXQgPSAwOwo+
Cj4gICAgICAgICBwZGF0YS0+aW9iYXNlID0gZGV2X3JlYWRfYWRkcihkZXYpOwo+IC0gICAgICAg
cGRhdGEtPnBoeV9pbnRlcmZhY2UgPSAtMTsKPiAtICAgICAgIHBoeV9tb2RlID0gZmR0X2dldHBy
b3AoZ2QtPmZkdF9ibG9iLCBkZXZfb2Zfb2Zmc2V0KGRldiksICJwaHktbW9kZSIsCj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIE5VTEwpOwo+IC0gICAgICAgaWYgKHBoeV9tb2RlKQo+
IC0gICAgICAgICAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IHBoeV9nZXRfaW50ZXJmYWNl
X2J5X25hbWUocGh5X21vZGUpOwo+IC0gICAgICAgaWYgKHBkYXRhLT5waHlfaW50ZXJmYWNlID09
IC0xKSB7Cj4gLSAgICAgICAgICAgICAgIGRlYnVnKCIlczogSW52YWxpZCBQSFkgaW50ZXJmYWNl
ICclcydcbiIsIF9fZnVuY19fLCBwaHlfbW9kZSk7Cj4gKwo+ICsgICAgICAgcGRhdGEtPnBoeV9p
bnRlcmZhY2UgPSBkZXZfcmVhZF9waHlfbW9kZShkZXYpOwo+ICsgICAgICAgaWYgKHBkYXRhLT5w
aHlfaW50ZXJmYWNlID09IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05FKQo+ICAgICAgICAgICAgICAg
ICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPgo+ICAgICAgICAgcGRhdGEtPm1heF9zcGVl
ZCA9IDEwMDA7Cj4gICAgICAgICBjZWxsID0gZmR0X2dldHByb3AoZ2QtPmZkdF9ibG9iLCBkZXZf
b2Zfb2Zmc2V0KGRldiksICJtYXgtc3BlZWQiLCBOVUxMKTsKPiBAQCAtOTM3LDcgKzkzMCw3IEBA
IGludCBzaF9ldGhlcl9vZl90b19wbGF0KHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4KPiAgICAgICAg
IHNwcmludGYoYmJfbWlpcGh5X2J1c2VzWzBdLm5hbWUsIGRldi0+bmFtZSk7Cj4KPiAtICAgICAg
IHJldHVybiByZXQ7Cj4gKyAgICAgICByZXR1cm4gMDsKPiAgfQo+Cj4gIHN0YXRpYyBjb25zdCBz
dHJ1Y3QgdWRldmljZV9pZCBzaF9ldGhlcl9pZHNbXSA9IHsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvc25pX2F2ZS5jIGIvZHJpdmVycy9uZXQvc25pX2F2ZS5jCj4gaW5kZXggYWI1MTU1MmVk
OC4uMGEzNjhjNmQwMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC9zbmlfYXZlLmMKPiArKysg
Yi9kcml2ZXJzL25ldC9zbmlfYXZlLmMKPiBAQCAtNzM4LDcgKzczOCw2IEBAIHN0YXRpYyBpbnQg
YXZlX29mX3RvX3BsYXQoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgICAgICAgIHN0cnVjdCBldGhf
cGRhdGEgKnBkYXRhID0gZGV2X2dldF9wbGF0KGRldik7Cj4gICAgICAgICBzdHJ1Y3QgYXZlX3By
aXZhdGUgKnByaXYgPSBkZXZfZ2V0X3ByaXYoZGV2KTsKPiAgICAgICAgIHN0cnVjdCBvZm5vZGVf
cGhhbmRsZV9hcmdzIGFyZ3M7Cj4gLSAgICAgICBjb25zdCBjaGFyICpwaHlfbW9kZTsKPiAgICAg
ICAgIGNvbnN0IHUzMiAqdmFscDsKPiAgICAgICAgIGludCByZXQsIG5jLCBucjsKPiAgICAgICAg
IGNvbnN0IGNoYXIgKm5hbWU7Cj4gQEAgLTc0OCwxNSArNzQ3LDEwIEBAIHN0YXRpYyBpbnQgYXZl
X29mX3RvX3BsYXQoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgICAgICAgICAgICAgICAgcmV0dXJu
IC1FSU5WQUw7Cj4KPiAgICAgICAgIHBkYXRhLT5pb2Jhc2UgPSBkZXZfcmVhZF9hZGRyKGRldik7
Cj4gLSAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IC0xOwo+IC0gICAgICAgcGh5X21vZGUg
PSBmZHRfZ2V0cHJvcChnZC0+ZmR0X2Jsb2IsIGRldl9vZl9vZmZzZXQoZGV2KSwgInBoeS1tb2Rl
IiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTlVMTCk7Cj4gLSAgICAgICBpZiAo
cGh5X21vZGUpCj4gLSAgICAgICAgICAgICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0gcGh5X2dl
dF9pbnRlcmZhY2VfYnlfbmFtZShwaHlfbW9kZSk7Cj4gLSAgICAgICBpZiAocGRhdGEtPnBoeV9p
bnRlcmZhY2UgPT0gLTEpIHsKPiAtICAgICAgICAgICAgICAgZGV2X2VycihkZXYsICJJbnZhbGlk
IFBIWSBpbnRlcmZhY2UgJyVzJ1xuIiwgcGh5X21vZGUpOwo+ICsKPiArICAgICAgIHBkYXRhLT5w
aHlfaW50ZXJmYWNlID0gZGV2X3JlYWRfcGh5X21vZGUoZGV2KTsKPiArICAgICAgIGlmIChwZGF0
YS0+cGh5X2ludGVyZmFjZSA9PSBQSFlfSU5URVJGQUNFX01PREVfTk9ORSkKPiAgICAgICAgICAg
ICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gLSAgICAgICB9Cj4KPiAgICAgICAgIHBkYXRhLT5tYXhf
c3BlZWQgPSAwOwo+ICAgICAgICAgdmFscCA9IGZkdF9nZXRwcm9wKGdkLT5mZHRfYmxvYiwgZGV2
X29mX29mZnNldChkZXYpLCAibWF4LXNwZWVkIiwKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQv
c25pX25ldHNlYy5jIGIvZHJpdmVycy9uZXQvc25pX25ldHNlYy5jCj4gaW5kZXggNDkwMTMyMWQw
Yy4uNjkzZmQzYTM1ZCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC9zbmlfbmV0c2VjLmMKPiAr
KysgYi9kcml2ZXJzL25ldC9zbmlfbmV0c2VjLmMKPiBAQCAtMTAyOSwxOSArMTAyOSwxMyBAQCBz
dGF0aWMgaW50IG5ldHNlY19vZl90b19wbGF0KHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gICAgICAg
ICBzdHJ1Y3QgZXRoX3BkYXRhICpwZGF0YSA9IGRldl9nZXRfcGxhdChkZXYpOwo+ICAgICAgICAg
c3RydWN0IG5ldHNlY19wcml2ICpwcml2ID0gZGV2X2dldF9wcml2KGRldik7Cj4gICAgICAgICBz
dHJ1Y3Qgb2Zub2RlX3BoYW5kbGVfYXJncyBwaGFuZGxlX2FyZ3M7Cj4gLSAgICAgICBjb25zdCBj
aGFyICpwaHlfbW9kZTsKPgo+ICAgICAgICAgcGRhdGEtPmlvYmFzZSA9IGRldl9yZWFkX2FkZHJf
aW5kZXgoZGV2LCAwKTsKPiAgICAgICAgIHByaXYtPmVlcHJvbV9iYXNlID0gZGV2X3JlYWRfYWRk
cl9pbmRleChkZXYsIDEpIC0gRUVSUFJPTV9NQVBfT0ZGU0VUOwo+Cj4gLSAgICAgICBwZGF0YS0+
cGh5X2ludGVyZmFjZSA9IC0xOwo+IC0gICAgICAgcGh5X21vZGUgPSBkZXZfcmVhZF9wcm9wKGRl
diwgInBoeS1tb2RlIiwgTlVMTCk7Cj4gLSAgICAgICBpZiAocGh5X21vZGUpCj4gLSAgICAgICAg
ICAgICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0gcGh5X2dldF9pbnRlcmZhY2VfYnlfbmFtZShw
aHlfbW9kZSk7Cj4gLSAgICAgICBpZiAocGRhdGEtPnBoeV9pbnRlcmZhY2UgPT0gLTEpIHsKPiAt
ICAgICAgICAgICAgICAgcHJfZXJyKCIlczogSW52YWxpZCBQSFkgaW50ZXJmYWNlICclcydcbiIs
IF9fZnVuY19fLCBwaHlfbW9kZSk7Cj4gKyAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IGRl
dl9yZWFkX3BoeV9tb2RlKGRldik7Cj4gKyAgICAgICBpZiAocGRhdGEtPnBoeV9pbnRlcmZhY2Ug
PT0gUEhZX0lOVEVSRkFDRV9NT0RFX05PTkUpCj4gICAgICAgICAgICAgICAgIHJldHVybiAtRUlO
VkFMOwo+IC0gICAgICAgfQo+Cj4gICAgICAgICBpZiAoIWRldl9yZWFkX3BoYW5kbGVfd2l0aF9h
cmdzKGRldiwgInBoeS1oYW5kbGUiLCBOVUxMLCAwLCAwLAo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAmcGhhbmRsZV9hcmdzKSkKPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvc3VuOGlfZW1hYy5jIGIvZHJpdmVycy9uZXQvc3VuOGlfZW1hYy5jCj4gaW5kZXggMmUy
NGQxMjIxNC4uNTY1NGEzNDMwZSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC9zdW44aV9lbWFj
LmMKPiArKysgYi9kcml2ZXJzL25ldC9zdW44aV9lbWFjLmMKPiBAQCAtODgyLDcgKzg4Miw2IEBA
IHN0YXRpYyBpbnQgc3VuOGlfZW1hY19ldGhfb2ZfdG9fcGxhdChzdHJ1Y3QgdWRldmljZSAqZGV2
KQo+ICAgICAgICAgc3RydWN0IHN1bjhpX2V0aF9wZGF0YSAqc3VuOGlfcGRhdGEgPSBkZXZfZ2V0
X3BsYXQoZGV2KTsKPiAgICAgICAgIHN0cnVjdCBldGhfcGRhdGEgKnBkYXRhID0gJnN1bjhpX3Bk
YXRhLT5ldGhfcGRhdGE7Cj4gICAgICAgICBzdHJ1Y3QgZW1hY19ldGhfZGV2ICpwcml2ID0gZGV2
X2dldF9wcml2KGRldik7Cj4gLSAgICAgICBjb25zdCBjaGFyICpwaHlfbW9kZTsKPiAgICAgICAg
IGNvbnN0IGZkdDMyX3QgKnJlZzsKPiAgICAgICAgIGludCBub2RlID0gZGV2X29mX29mZnNldChk
ZXYpOwo+ICAgICAgICAgaW50IG9mZnNldCA9IDA7Cj4gQEAgLTk0NiwxNiArOTQ1LDEwIEBAIHN0
YXRpYyBpbnQgc3VuOGlfZW1hY19ldGhfb2ZfdG9fcGxhdChzdHJ1Y3QgdWRldmljZSAqZGV2KQo+
ICAgICAgICAgfQo+ICAgICAgICAgcHJpdi0+cGh5YWRkciA9IGZkdGRlY19nZXRfaW50KGdkLT5m
ZHRfYmxvYiwgb2Zmc2V0LCAicmVnIiwgLTEpOwo+Cj4gLSAgICAgICBwaHlfbW9kZSA9IGZkdF9n
ZXRwcm9wKGdkLT5mZHRfYmxvYiwgbm9kZSwgInBoeS1tb2RlIiwgTlVMTCk7Cj4gLQo+IC0gICAg
ICAgaWYgKHBoeV9tb2RlKQo+IC0gICAgICAgICAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9
IHBoeV9nZXRfaW50ZXJmYWNlX2J5X25hbWUocGh5X21vZGUpOwo+ICsgICAgICAgcGRhdGEtPnBo
eV9pbnRlcmZhY2UgPSBkZXZfcmVhZF9waHlfbW9kZShkZXYpOwo+ICAgICAgICAgcHJpbnRmKCJw
aHkgaW50ZXJmYWNlJWRcbiIsIHBkYXRhLT5waHlfaW50ZXJmYWNlKTsKPiAtCj4gLSAgICAgICBp
ZiAocGRhdGEtPnBoeV9pbnRlcmZhY2UgPT0gLTEpIHsKPiAtICAgICAgICAgICAgICAgZGVidWco
IiVzOiBJbnZhbGlkIFBIWSBpbnRlcmZhY2UgJyVzJ1xuIiwgX19mdW5jX18sIHBoeV9tb2RlKTsK
PiArICAgICAgIGlmIChwZGF0YS0+cGh5X2ludGVyZmFjZSA9PSBQSFlfSU5URVJGQUNFX01PREVf
Tk9ORSkKPiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gLSAgICAgICB9Cj4KPiAg
ICAgICAgIGlmIChwcml2LT52YXJpYW50ID09IEgzX0VNQUMpIHsKPiAgICAgICAgICAgICAgICAg
cmV0ID0gc3VuOGlfaGFuZGxlX2ludGVybmFsX3BoeShkZXYsIHByaXYpOwo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL25ldC90aS9hbTY1LWNwc3ctbnVzcy5jIGIvZHJpdmVycy9uZXQvdGkvYW02NS1j
cHN3LW51c3MuYwo+IGluZGV4IDg3ZjUxYjNiOTkuLmMxZGEzMzQ3MzkgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9uZXQvdGkvYW02NS1jcHN3LW51c3MuYwo+ICsrKyBiL2RyaXZlcnMvbmV0L3RpL2Ft
NjUtY3Bzdy1udXNzLmMKPiBAQCAtNjAyLDIxICs2MDIsMTQgQEAgc3RhdGljIGludCBhbTY1X2Nw
c3dfb2ZkYXRhX3BhcnNlX3BoeShzdHJ1Y3QgdWRldmljZSAqZGV2KQo+ICAgICAgICAgc3RydWN0
IGV0aF9wZGF0YSAqcGRhdGEgPSBkZXZfZ2V0X3BsYXQoZGV2KTsKPiAgICAgICAgIHN0cnVjdCBh
bTY1X2Nwc3dfcHJpdiAqcHJpdiA9IGRldl9nZXRfcHJpdihkZXYpOwo+ICAgICAgICAgc3RydWN0
IG9mbm9kZV9waGFuZGxlX2FyZ3Mgb3V0X2FyZ3M7Cj4gLSAgICAgICBjb25zdCBjaGFyICpwaHlf
bW9kZTsKPiAgICAgICAgIGludCByZXQgPSAwOwo+Cj4gICAgICAgICBkZXZfcmVhZF91MzIoZGV2
LCAicmVnIiwgJnByaXYtPnBvcnRfaWQpOwo+Cj4gLSAgICAgICBwaHlfbW9kZSA9IGRldl9yZWFk
X3N0cmluZyhkZXYsICJwaHktbW9kZSIpOwo+IC0gICAgICAgaWYgKHBoeV9tb2RlKSB7Cj4gLSAg
ICAgICAgICAgICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0KPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHBoeV9nZXRfaW50ZXJmYWNlX2J5X25hbWUocGh5X21vZGUpOwo+IC0gICAg
ICAgICAgICAgICBpZiAocGRhdGEtPnBoeV9pbnRlcmZhY2UgPT0gLTEpIHsKPiAtICAgICAgICAg
ICAgICAgICAgICAgICBkZXZfZXJyKGRldiwgIkludmFsaWQgUEhZIG1vZGUgJyVzJywgcG9ydCAl
dVxuIiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBoeV9tb2RlLCBwcml2LT5w
b3J0X2lkKTsKPiAtICAgICAgICAgICAgICAgICAgICAgICByZXQgPSAtRUlOVkFMOwo+IC0gICAg
ICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0Owo+IC0gICAgICAgICAgICAgICB9Cj4gKyAgICAg
ICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IGRldl9yZWFkX3BoeV9tb2RlKGRldik7Cj4gKyAgICAg
ICBpZiAocGRhdGEtPnBoeV9pbnRlcmZhY2UgPT0gUEhZX0lOVEVSRkFDRV9NT0RFX05PTkUpIHsK
PiArICAgICAgICAgICAgICAgZGV2X2VycihkZXYsICJJbnZhbGlkIFBIWSBtb2RlLCBwb3J0ICV1
XG4iLCBwcml2LT5wb3J0X2lkKTsKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4g
ICAgICAgICB9Cj4KPiAgICAgICAgIGRldl9yZWFkX3UzMihkZXYsICJtYXgtc3BlZWQiLCAodTMy
ICopJnBkYXRhLT5tYXhfc3BlZWQpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC90aS9jcHN3
LmMgYi9kcml2ZXJzL25ldC90aS9jcHN3LmMKPiBpbmRleCA2OGY0MTkxZmU5Li41YjdiYWI3MzRl
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbmV0L3RpL2Nwc3cuYwo+ICsrKyBiL2RyaXZlcnMvbmV0
L3RpL2Nwc3cuYwo+IEBAIC0xMTk0LDE1ICsxMTk0LDEyIEBAIHN0YXRpYyB2b2lkIGNwc3dfZXRo
X29mX3BhcnNlX3NsYXZlKHN0cnVjdCBjcHN3X3BsYXRmb3JtX2RhdGEgKmRhdGEsCj4gIHsKPiAg
ICAgICAgIHN0cnVjdCBvZm5vZGVfcGhhbmRsZV9hcmdzIG91dF9hcmdzOwo+ICAgICAgICAgc3Ry
dWN0IGNwc3dfc2xhdmVfZGF0YSAqc2xhdmVfZGF0YTsKPiAtICAgICAgIGNvbnN0IGNoYXIgKnBo
eV9tb2RlOwo+ICAgICAgICAgdTMyIHBoeV9pZFsyXTsKPiAgICAgICAgIGludCByZXQ7Cj4KPiAg
ICAgICAgIHNsYXZlX2RhdGEgPSAmZGF0YS0+c2xhdmVfZGF0YVtzbGF2ZV9pbmRleF07Cj4KPiAt
ICAgICAgIHBoeV9tb2RlID0gb2Zub2RlX3JlYWRfc3RyaW5nKHN1Ym5vZGUsICJwaHktbW9kZSIp
Owo+IC0gICAgICAgaWYgKHBoeV9tb2RlKQo+IC0gICAgICAgICAgICAgICBzbGF2ZV9kYXRhLT5w
aHlfaWYgPSBwaHlfZ2V0X2ludGVyZmFjZV9ieV9uYW1lKHBoeV9tb2RlKTsKPiArICAgICAgIHNs
YXZlX2RhdGEtPnBoeV9pZiA9IG9mbm9kZV9yZWFkX3BoeV9tb2RlKHN1Ym5vZGUpOwo+Cj4gICAg
ICAgICByZXQgPSBvZm5vZGVfcGFyc2VfcGhhbmRsZV93aXRoX2FyZ3Moc3Vibm9kZSwgInBoeS1o
YW5kbGUiLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5V
TEwsIDAsIDAsICZvdXRfYXJncyk7Cj4gQEAgLTEzNDgsMTEgKzEzNDUsOCBAQCBzdGF0aWMgaW50
IGNwc3dfZXRoX29mX3RvX3BsYXQoc3RydWN0IHVkZXZpY2UgKmRldikKPiAgICAgICAgIH0KPgo+
ICAgICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSBkYXRhLT5zbGF2ZV9kYXRhW2RhdGEtPmFj
dGl2ZV9zbGF2ZV0ucGh5X2lmOwo+IC0gICAgICAgaWYgKHBkYXRhLT5waHlfaW50ZXJmYWNlID09
IC0xKSB7Cj4gLSAgICAgICAgICAgICAgIGRlYnVnKCIlczogSW52YWxpZCBQSFkgaW50ZXJmYWNl
ICclcydcbiIsIF9fZnVuY19fLAo+IC0gICAgICAgICAgICAgICAgICAgICBwaHlfc3RyaW5nX2Zv
cl9pbnRlcmZhY2UocGRhdGEtPnBoeV9pbnRlcmZhY2UpKTsKPiArICAgICAgIGlmIChwZGF0YS0+
cGh5X2ludGVyZmFjZSA9PSBQSFlfSU5URVJGQUNFX01PREVfTk9ORSkKPiAgICAgICAgICAgICAg
ICAgcmV0dXJuIC1FSU5WQUw7Cj4gLSAgICAgICB9Cj4KPiAgICAgICAgIHJldHVybiAwOwo+ICB9
Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3RpL2tleXN0b25lX25ldC5jIGIvZHJpdmVycy9u
ZXQvdGkva2V5c3RvbmVfbmV0LmMKPiBpbmRleCA1ZThmNjgzYzI5Li5iNTVlN2RhNGMxIDEwMDY0
NAo+IC0tLSBhL2RyaXZlcnMvbmV0L3RpL2tleXN0b25lX25ldC5jCj4gKysrIGIvZHJpdmVycy9u
ZXQvdGkva2V5c3RvbmVfbmV0LmMKPiBAQCAtNjg3LDcgKzY4Nyw2IEBAIHN0YXRpYyBpbnQga3My
X2V0aF9wYXJzZV9zbGF2ZV9pbnRlcmZhY2UoaW50IG5ldGNwLCBpbnQgc2xhdmUsCj4gICAgICAg
ICBpbnQgcGh5Owo+ICAgICAgICAgaW50IGRtYV9jb3VudDsKPiAgICAgICAgIHUzMiBkbWFfY2hh
bm5lbFs4XTsKPiAtICAgICAgIGNvbnN0IGNoYXIgKnBoeV9tb2RlOwo+Cj4gICAgICAgICBwcml2
LT5zbGF2ZV9wb3J0ID0gZmR0ZGVjX2dldF9pbnQoZmR0LCBzbGF2ZSwgInNsYXZlLXBvcnQiLCAt
MSk7Cj4gICAgICAgICBwcml2LT5uZXRfcnhfYnVmZnMucnhfZmxvdyA9IHByaXYtPnNsYXZlX3Bv
cnQgKiA4Owo+IEBAIC03MjgsMjAgKzcyNywxOSBAQCBzdGF0aWMgaW50IGtzMl9ldGhfcGFyc2Vf
c2xhdmVfaW50ZXJmYWNlKGludCBuZXRjcCwgaW50IHNsYXZlLAo+ICAgICAgICAgICAgICAgICBw
cml2LT5zZ21paV9saW5rX3R5cGUgPSBTR01JSV9MSU5LX01BQ19QSFk7Cj4gICAgICAgICAgICAg
ICAgIHByaXYtPmhhc19tZGlvID0gdHJ1ZTsKPiAgICAgICAgIH0gZWxzZSBpZiAocHJpdi0+bGlu
a190eXBlID09IExJTktfVFlQRV9SR01JSV9MSU5LX01BQ19QSFkpIHsKPiAtICAgICAgICAgICAg
ICAgcGh5X21vZGUgPSBmZHRfZ2V0cHJvcChmZHQsIHNsYXZlLCAicGh5LW1vZGUiLCBOVUxMKTsK
PiAtICAgICAgICAgICAgICAgaWYgKHBoeV9tb2RlKSB7Cj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgcHJpdi0+cGh5X2lmID0gcGh5X2dldF9pbnRlcmZhY2VfYnlfbmFtZShwaHlfbW9kZSk7Cj4g
LSAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByaXYtPnBoeV9pZiAhPSBQSFlfSU5URVJGQUNF
X01PREVfUkdNSUkgJiYKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpdi0+cGh5X2lm
ICE9IFBIWV9JTlRFUkZBQ0VfTU9ERV9SR01JSV9JRCAmJgo+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICBwcml2LT5waHlfaWYgIT0gUEhZX0lOVEVSRkFDRV9NT0RFX1JHTUlJX1JYSUQgJiYK
PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpdi0+cGh5X2lmICE9IFBIWV9JTlRFUkZB
Q0VfTU9ERV9SR01JSV9UWElEKSB7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
cl9lcnIoImludmFsaWQgcGh5LW1vZGVcbiIpOwo+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgcmV0dXJuIC1FSU5WQUw7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgfQo+IC0gICAg
ICAgICAgICAgICB9IGVsc2Ugewo+ICsgICAgICAgICAgICAgICBwcml2LT5waHlfaWYgPSBvZm5v
ZGVfcmVhZF9waHlfbW9kZShvZmZzZXRfdG9fb2Zub2RlKHNsYXZlKSk7Cj4gKyAgICAgICAgICAg
ICAgIGlmIChwcml2LT5waHlfaWYgPT0gUEhZX0lOVEVSRkFDRV9NT0RFX05PTkUpCj4gICAgICAg
ICAgICAgICAgICAgICAgICAgcHJpdi0+cGh5X2lmID0gUEhZX0lOVEVSRkFDRV9NT0RFX1JHTUlJ
Owo+IC0gICAgICAgICAgICAgICB9Cj4gICAgICAgICAgICAgICAgIHBkYXRhLT5waHlfaW50ZXJm
YWNlID0gcHJpdi0+cGh5X2lmOwo+ICsKPiArICAgICAgICAgICAgICAgaWYgKHByaXYtPnBoeV9p
ZiAhPSBQSFlfSU5URVJGQUNFX01PREVfUkdNSUkgJiYKPiArICAgICAgICAgICAgICAgICAgIHBy
aXYtPnBoeV9pZiAhPSBQSFlfSU5URVJGQUNFX01PREVfUkdNSUlfSUQgJiYKPiArICAgICAgICAg
ICAgICAgICAgIHByaXYtPnBoeV9pZiAhPSBQSFlfSU5URVJGQUNFX01PREVfUkdNSUlfUlhJRCAm
Jgo+ICsgICAgICAgICAgICAgICAgICAgcHJpdi0+cGh5X2lmICE9IFBIWV9JTlRFUkZBQ0VfTU9E
RV9SR01JSV9UWElEKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcHJfZXJyKCJpbnZhbGlk
IHBoeS1tb2RlXG4iKTsKPiArICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsK
PiArICAgICAgICAgICAgICAgfQo+ICsKPiAgICAgICAgICAgICAgICAgcHJpdi0+aGFzX21kaW8g
PSB0cnVlOwo+ICAgICAgICAgfQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3RzZWMuYyBi
L2RyaXZlcnMvbmV0L3RzZWMuYwo+IGluZGV4IGJlY2E4ODZiMjUuLmZlYzA1MWViYjcgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy9uZXQvdHNlYy5jCj4gKysrIGIvZHJpdmVycy9uZXQvdHNlYy5jCj4g
QEAgLTgzNCw3ICs4MzQsNiBAQCBpbnQgdHNlY19wcm9iZShzdHJ1Y3QgdWRldmljZSAqZGV2KQo+
ICAgICAgICAgc3RydWN0IG9mbm9kZV9waGFuZGxlX2FyZ3MgcGhhbmRsZV9hcmdzOwo+ICAgICAg
ICAgdTMyIHRiaWFkZHIgPSBDT05GSUdfU1lTX1RCSVBBX1ZBTFVFOwo+ICAgICAgICAgc3RydWN0
IHRzZWNfZGF0YSAqZGF0YTsKPiAtICAgICAgIGNvbnN0IGNoYXIgKnBoeV9tb2RlOwo+ICAgICAg
ICAgb2Zub2RlIHBhcmVudCwgY2hpbGQ7Cj4gICAgICAgICBmZHRfYWRkcl90IHJlZzsKPiAgICAg
ICAgIHUzMiBtYXhfc3BlZWQ7Cj4gQEAgLTg5NCwxMiArODkzLDggQEAgaW50IHRzZWNfcHJvYmUo
c3RydWN0IHVkZXZpY2UgKmRldikKPgo+ICAgICAgICAgcHJpdi0+dGJpYWRkciA9IHRiaWFkZHI7
Cj4KPiAtICAgICAgIHBoeV9tb2RlID0gZGV2X3JlYWRfcHJvcChkZXYsICJwaHktY29ubmVjdGlv
bi10eXBlIiwgTlVMTCk7Cj4gLSAgICAgICBpZiAoIXBoeV9tb2RlKQo+IC0gICAgICAgICAgICAg
ICBwaHlfbW9kZSA9IGRldl9yZWFkX3Byb3AoZGV2LCAicGh5LW1vZGUiLCBOVUxMKTsKPiAtICAg
ICAgIGlmIChwaHlfbW9kZSkKPiAtICAgICAgICAgICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2Ug
PSBwaHlfZ2V0X2ludGVyZmFjZV9ieV9uYW1lKHBoeV9tb2RlKTsKPiAtICAgICAgIGlmIChwZGF0
YS0+cGh5X2ludGVyZmFjZSA9PSAtMSkKPiArICAgICAgIHBkYXRhLT5waHlfaW50ZXJmYWNlID0g
ZGV2X3JlYWRfcGh5X21vZGUoZGV2KTsKPiArICAgICAgIGlmIChwZGF0YS0+cGh5X2ludGVyZmFj
ZSA9PSBQSFlfSU5URVJGQUNFX01PREVfTk9ORSkKPiAgICAgICAgICAgICAgICAgcGRhdGEtPnBo
eV9pbnRlcmZhY2UgPSB0c2VjX2dldF9pbnRlcmZhY2UocHJpdik7Cj4KPiAgICAgICAgIHByaXYt
PmludGVyZmFjZSA9IHBkYXRhLT5waHlfaW50ZXJmYWNlOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L25ldC94aWxpbnhfYXhpX2VtYWMuYyBiL2RyaXZlcnMvbmV0L3hpbGlueF9heGlfZW1hYy5jCj4g
aW5kZXggZjIxYWRkYjRkMC4uMDJkMTNjM2UwYSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC94
aWxpbnhfYXhpX2VtYWMuYwo+ICsrKyBiL2RyaXZlcnMvbmV0L3hpbGlueF9heGlfZW1hYy5jCj4g
QEAgLTgyMSw3ICs4MjEsNiBAQCBzdGF0aWMgaW50IGF4aV9lbWFjX29mX3RvX3BsYXQoc3RydWN0
IHVkZXZpY2UgKmRldikKPiAgICAgICAgIHN0cnVjdCBldGhfcGRhdGEgKnBkYXRhID0gJnBsYXQt
PmV0aF9wZGF0YTsKPiAgICAgICAgIGludCBub2RlID0gZGV2X29mX29mZnNldChkZXYpOwo+ICAg
ICAgICAgaW50IG9mZnNldCA9IDA7Cj4gLSAgICAgICBjb25zdCBjaGFyICpwaHlfbW9kZTsKPgo+
ICAgICAgICAgcGRhdGEtPmlvYmFzZSA9IGRldl9yZWFkX2FkZHIoZGV2KTsKPiAgICAgICAgIHBs
YXQtPm1hY3R5cGUgPSBkZXZfZ2V0X2RyaXZlcl9kYXRhKGRldik7Cj4gQEAgLTg1MCwxNCArODQ5
LDkgQEAgc3RhdGljIGludCBheGlfZW1hY19vZl90b19wbGF0KHN0cnVjdCB1ZGV2aWNlICpkZXYp
Cj4gICAgICAgICAgICAgICAgICAgICAgICAgcGxhdC0+cGh5X29mX2hhbmRsZSA9IG9mZnNldDsK
PiAgICAgICAgICAgICAgICAgfQo+Cj4gLSAgICAgICAgICAgICAgIHBoeV9tb2RlID0gZmR0X2dl
dHByb3AoZ2QtPmZkdF9ibG9iLCBub2RlLCAicGh5LW1vZGUiLCBOVUxMKTsKPiAtICAgICAgICAg
ICAgICAgaWYgKHBoeV9tb2RlKQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHBkYXRhLT5waHlf
aW50ZXJmYWNlID0gcGh5X2dldF9pbnRlcmZhY2VfYnlfbmFtZShwaHlfbW9kZSk7Cj4gLSAgICAg
ICAgICAgICAgIGlmIChwZGF0YS0+cGh5X2ludGVyZmFjZSA9PSAtMSkgewo+IC0gICAgICAgICAg
ICAgICAgICAgICAgIHByaW50ZigiJXM6IEludmFsaWQgUEhZIGludGVyZmFjZSAnJXMnXG4iLCBf
X2Z1bmNfXywKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGh5X21vZGUpOwo+ICsg
ICAgICAgICAgICAgICBwZGF0YS0+cGh5X2ludGVyZmFjZSA9IGRldl9yZWFkX3BoeV9tb2RlKGRl
dik7Cj4gKyAgICAgICAgICAgICAgIGlmIChwZGF0YS0+cGh5X2ludGVyZmFjZSA9PSBQSFlfSU5U
RVJGQUNFX01PREVfTk9ORSkKPiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZB
TDsKPiAtICAgICAgICAgICAgICAgfQo+Cj4gICAgICAgICAgICAgICAgIHBsYXQtPmV0aF9oYXNu
b2J1ZiA9IGZkdGRlY19nZXRfYm9vbChnZC0+ZmR0X2Jsb2IsIG5vZGUsCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAieGxueCxldGgtaGFzbm9i
dWYiKTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvenlucV9nZW0uYyBiL2RyaXZlcnMvbmV0
L3p5bnFfZ2VtLmMKPiBpbmRleCAzMTE4ZDE0NzI2Li4wMDYyODUxMTM0IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvbmV0L3p5bnFfZ2VtLmMKPiArKysgYi9kcml2ZXJzL25ldC96eW5xX2dlbS5jCj4g
QEAgLTgyNyw3ICs4MjcsNiBAQCBzdGF0aWMgaW50IHp5bnFfZ2VtX29mX3RvX3BsYXQoc3RydWN0
IHVkZXZpY2UgKmRldikKPiAgICAgICAgIHN0cnVjdCBldGhfcGRhdGEgKnBkYXRhID0gZGV2X2dl
dF9wbGF0KGRldik7Cj4gICAgICAgICBzdHJ1Y3QgenlucV9nZW1fcHJpdiAqcHJpdiA9IGRldl9n
ZXRfcHJpdihkZXYpOwo+ICAgICAgICAgc3RydWN0IG9mbm9kZV9waGFuZGxlX2FyZ3MgcGhhbmRs
ZV9hcmdzOwo+IC0gICAgICAgY29uc3QgY2hhciAqcGh5X21vZGU7Cj4KPiAgICAgICAgIHBkYXRh
LT5pb2Jhc2UgPSAocGh5c19hZGRyX3QpZGV2X3JlYWRfYWRkcihkZXYpOwo+ICAgICAgICAgcHJp
di0+aW9iYXNlID0gKHN0cnVjdCB6eW5xX2dlbV9yZWdzICopcGRhdGEtPmlvYmFzZTsKPiBAQCAt
ODU5LDEzICs4NTgsOSBAQCBzdGF0aWMgaW50IHp5bnFfZ2VtX29mX3RvX3BsYXQoc3RydWN0IHVk
ZXZpY2UgKmRldikKPiAgICAgICAgICAgICAgICAgfQo+ICAgICAgICAgfQo+Cj4gLSAgICAgICBw
aHlfbW9kZSA9IGRldl9yZWFkX3Byb3AoZGV2LCAicGh5LW1vZGUiLCBOVUxMKTsKPiAtICAgICAg
IGlmIChwaHlfbW9kZSkKPiAtICAgICAgICAgICAgICAgcGRhdGEtPnBoeV9pbnRlcmZhY2UgPSBw
aHlfZ2V0X2ludGVyZmFjZV9ieV9uYW1lKHBoeV9tb2RlKTsKPiAtICAgICAgIGlmIChwZGF0YS0+
cGh5X2ludGVyZmFjZSA9PSAtMSkgewo+IC0gICAgICAgICAgICAgICBkZWJ1ZygiJXM6IEludmFs
aWQgUEhZIGludGVyZmFjZSAnJXMnXG4iLCBfX2Z1bmNfXywgcGh5X21vZGUpOwo+ICsgICAgICAg
cGRhdGEtPnBoeV9pbnRlcmZhY2UgPSBkZXZfcmVhZF9waHlfbW9kZShkZXYpOwo+ICsgICAgICAg
aWYgKHBkYXRhLT5waHlfaW50ZXJmYWNlID09IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05FKQo+ICAg
ICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiAtICAgICAgIH0KPiAgICAgICAgIHByaXYt
PmludGVyZmFjZSA9IHBkYXRhLT5waHlfaW50ZXJmYWNlOwo+Cj4gICAgICAgICBwcml2LT5pbnRf
cGNzID0gZGV2X3JlYWRfYm9vbChkZXYsICJpcy1pbnRlcm5hbC1wY3NwbWEiKTsKPiBkaWZmIC0t
Z2l0IGEvaW5jbHVkZS9kbS9vZm5vZGUuaCBiL2luY2x1ZGUvZG0vb2Zub2RlLmgKPiBpbmRleCA4
MTY0Mzg2MDQzLi44YTM4YzE0M2Y5IDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvZG0vb2Zub2RlLmgK
PiArKysgYi9pbmNsdWRlL2RtL29mbm9kZS5oCj4gQEAgLTEyLDYgKzEyLDcgQEAKPiAgI2luY2x1
ZGUgPGRtL29mLmg+Cj4gICNpbmNsdWRlIDxkbS9vZl9hY2Nlc3MuaD4KPiAgI2luY2x1ZGUgPGxv
Zy5oPgo+ICsjaW5jbHVkZSA8cGh5X2ludGVyZmFjZS5oPgo+Cj4gIC8qIEVuYWJsZSBjaGVja3Mg
dG8gcHJvdGVjdCBhZ2FpbnN0IGludmFsaWQgY2FsbHMgKi8KPiAgI3VuZGVmIE9GX0NIRUNLUwo+
IEBAIC0xMjE4LDQgKzEyMTksMTYgQEAgY29uc3QgY2hhciAqb2Zub2RlX2NvbmZfcmVhZF9zdHIo
Y29uc3QgY2hhciAqcHJvcF9uYW1lKTsKPiAgICovCj4gIG9mbm9kZSBvZm5vZGVfZ2V0X3BoeV9u
b2RlKG9mbm9kZSBldGhfbm9kZSk7Cj4KPiArLyoqCj4gKyAqIG9mbm9kZV9yZWFkX3BoeV9tb2Rl
KCkgLSBSZWFkIFBIWSBjb25uZWN0aW9uIHR5cGUgZnJvbSBhIE1BQyBub2RlCj4gKyAqCj4gKyAq
IFRoaXMgZnVuY3Rpb24gcGFyc2VzIHRoZSAicGh5LW1vZGUiIC8gInBoeS1jb25uZWN0aW9uLXR5
cGUiIHByb3BlcnR5IGFuZAo+ICsgKiByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIFBIWSBpbnRl
cmZhY2UgdHlwZS4KPiArICoKPiArICogQG1hY19ub2RlOiAgb2Zub2RlIGNvbnRhaW5pbmcgdGhl
IHByb3BlcnR5Cj4gKyAqIFJldHVybjogb25lIG9mIFBIWV9JTlRFUkZBQ0VfTU9ERV8qIGNvbnN0
YW50cywgUEhZX0lOVEVSRkFDRV9NT0RFX05PTkUgb24KPiArICogICAgICAgIGVycm9yCj4gKyAq
Lwo+ICtwaHlfaW50ZXJmYWNlX3Qgb2Zub2RlX3JlYWRfcGh5X21vZGUob2Zub2RlIG1hY19ub2Rl
KTsKPiArCj4gICNlbmRpZgo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2RtL3JlYWQuaCBiL2luY2x1
ZGUvZG0vcmVhZC5oCj4gaW5kZXggODk5ZWI4MTNmZC4uYmZhMjY0NTk2NyAxMDA2NDQKPiAtLS0g
YS9pbmNsdWRlL2RtL3JlYWQuaAo+ICsrKyBiL2luY2x1ZGUvZG0vcmVhZC5oCj4gQEAgLTc1Nyw2
ICs3NTcsMTggQEAgaW50IGRldl9kZWNvZGVfZGlzcGxheV90aW1pbmcoY29uc3Qgc3RydWN0IHVk
ZXZpY2UgKmRldiwgaW50IGluZGV4LAo+ICAgKi8KPiAgb2Zub2RlIGRldl9nZXRfcGh5X25vZGUo
Y29uc3Qgc3RydWN0IHVkZXZpY2UgKmRldik7Cj4KPiArLyoqCj4gKyAqIGRldl9yZWFkX3BoeV9t
b2RlKCkgLSBSZWFkIFBIWSBjb25uZWN0aW9uIHR5cGUgZnJvbSBhIE1BQwo+ICsgKgo+ICsgKiBU
aGlzIGZ1bmN0aW9uIHBhcnNlcyB0aGUgInBoeS1tb2RlIiAvICJwaHktY29ubmVjdGlvbi10eXBl
IiBwcm9wZXJ0eSBhbmQKPiArICogcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBQSFkgaW50ZXJm
YWNlIHR5cGUuCj4gKyAqCj4gKyAqIEBkZXY6IGRldmljZSByZXByZXNlbnRpbmcgdGhlIE1BQwo+
ICsgKiBSZXR1cm46IG9uZSBvZiBQSFlfSU5URVJGQUNFX01PREVfKiBjb25zdGFudHMsIFBIWV9J
TlRFUkZBQ0VfTU9ERV9OT05FIG9uCj4gKyAqICAgICAgICBlcnJvcgo+ICsgKi8KPiArcGh5X2lu
dGVyZmFjZV90IGRldl9yZWFkX3BoeV9tb2RlKGNvbnN0IHN0cnVjdCB1ZGV2aWNlICpkZXYpOwo+
ICsKPiAgI2Vsc2UgLyogQ09ORklHX0RNX0RFVl9SRUFEX0lOTElORSBpcyBlbmFibGVkICovCj4g
ICNpbmNsdWRlIDxhc20vZ2xvYmFsX2RhdGEuaD4KPgo+IEBAIC0xMTExLDYgKzExMjMsMTEgQEAg
c3RhdGljIGlubGluZSBvZm5vZGUgZGV2X2dldF9waHlfbm9kZShjb25zdCBzdHJ1Y3QgdWRldmlj
ZSAqZGV2KQo+ICAgICAgICAgcmV0dXJuIG9mbm9kZV9nZXRfcGh5X25vZGUoZGV2X29mbm9kZShk
ZXYpKTsKPiAgfQo+Cj4gK3N0YXRpYyBpbmxpbmUgcGh5X2ludGVyZmFjZV90IGRldl9yZWFkX3Bo
eV9tb2RlKGNvbnN0IHN0cnVjdCB1ZGV2aWNlICpkZXYpCj4gK3sKPiArICAgICAgIHJldHVybiBv
Zm5vZGVfcmVhZF9waHlfbW9kZShkZXZfb2Zub2RlKGRldikpOwo+ICt9Cj4gKwo+ICAjZW5kaWYg
LyogQ09ORklHX0RNX0RFVl9SRUFEX0lOTElORSAqLwo+Cj4gIC8qKgo+IGRpZmYgLS1naXQgYS9p
bmNsdWRlL3BoeS5oIGIvaW5jbHVkZS9waHkuaAo+IGluZGV4IGM2NmZkNDNlYTguLmRlZThmYjVm
MmUgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9waHkuaAo+ICsrKyBiL2luY2x1ZGUvcGh5LmgKPiBA
QCAtNTQyLDE0ICs1NDIsNiBAQCBpbnQgcGh5X3hpbGlueF9nbWlpMnJnbWlpX2luaXQodm9pZCk7
Cj4gIGludCBib2FyZF9waHlfY29uZmlnKHN0cnVjdCBwaHlfZGV2aWNlICpwaHlkZXYpOwo+ICBp
bnQgZ2V0X3BoeV9pZChzdHJ1Y3QgbWlpX2RldiAqYnVzLCBpbnQgYWRkciwgaW50IGRldmFkLCB1
MzIgKnBoeV9pZCk7Cj4KPiAtLyoqCj4gLSAqIHBoeV9nZXRfaW50ZXJmYWNlX2J5X25hbWUoKSAt
IExvb2sgdXAgYSBQSFkgaW50ZXJmYWNlIG5hbWUKPiAtICoKPiAtICogQHN0cjogICAgICAgUEhZ
IGludGVyZmFjZSBuYW1lLCBlLmcuICJtaWkiCj4gLSAqIEByZXR1cm46IFBIWV9JTlRFUkZBQ0Vf
TU9ERV8uLi4gdmFsdWUsIG9yIC0xIGlmIG5vdCBmb3VuZAo+IC0gKi8KPiAtaW50IHBoeV9nZXRf
aW50ZXJmYWNlX2J5X25hbWUoY29uc3QgY2hhciAqc3RyKTsKPiAtCj4gIC8qKgo+ICAgKiBwaHlf
aW50ZXJmYWNlX2lzX3JnbWlpIC0gQ29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIHRlc3RpbmcgaWYg
YSBQSFkgaW50ZXJmYWNlCj4gICAqIGlzIFJHTUlJIChhbGwgdmFyaWFudHMpCj4gZGlmZiAtLWdp
dCBhL25ldC9tZGlvLXVjbGFzcy5jIGIvbmV0L21kaW8tdWNsYXNzLmMKPiBpbmRleCBiZWY4Mjgw
ZTIxLi44NzRmNTk0MTNhIDEwMDY0NAo+IC0tLSBhL25ldC9tZGlvLXVjbGFzcy5jCj4gKysrIGIv
bmV0L21kaW8tdWNsYXNzLmMKPiBAQCAtMTUsMTEgKzE1LDYgQEAKPiAgI2luY2x1ZGUgPGRtL3Vj
bGFzcy1pbnRlcm5hbC5oPgo+ICAjaW5jbHVkZSA8bGludXgvY29tcGF0Lmg+Cj4KPiAtLyogRFQg
bm9kZSBwcm9wZXJ0aWVzIGZvciBNQUMtUEhZIGludGVyZmFjZSAqLwo+IC1zdGF0aWMgY29uc3Qg
Y2hhciAqIGNvbnN0IHBoeV9tb2RlX3N0cltdID0gewo+IC0gICAgICAgInBoeS1tb2RlIiwgInBo
eS1jb25uZWN0aW9uLXR5cGUiCj4gLX07Cj4gLQo+ICB2b2lkIGRtX21kaW9fcHJvYmVfZGV2aWNl
cyh2b2lkKQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgdWRldmljZSAqaXQ7Cj4gQEAgLTE5NSwyNiAr
MTkwLDE1IEBAIG91dDoKPiAgLyogQ29ubmVjdCB0byBhIFBIWSBsaW5rZWQgaW4gZXRoIERUIG5v
ZGUgKi8KPiAgc3RydWN0IHBoeV9kZXZpY2UgKmRtX2V0aF9waHlfY29ubmVjdChzdHJ1Y3QgdWRl
dmljZSAqZXRoZGV2KQo+ICB7Cj4gLSAgICAgICBjb25zdCBjaGFyICppZl9zdHI7Cj4gICAgICAg
ICBwaHlfaW50ZXJmYWNlX3QgaW50ZXJmYWNlOwo+ICAgICAgICAgc3RydWN0IHBoeV9kZXZpY2Ug
KnBoeTsKPiAtICAgICAgIGludCBpOwo+Cj4gICAgICAgICBpZiAoIWRldl9oYXNfb2Zub2RlKGV0
aGRldikpIHsKPiAgICAgICAgICAgICAgICAgZGVidWcoIiVzOiBzdXBwbGllZCBldGggZGV2IGhh
cyBubyBEVCBub2RlIVxuIiwgZXRoZGV2LT5uYW1lKTsKPiAgICAgICAgICAgICAgICAgcmV0dXJu
IE5VTEw7Cj4gICAgICAgICB9Cj4KPiAtICAgICAgIGludGVyZmFjZSA9IFBIWV9JTlRFUkZBQ0Vf
TU9ERV9OT05FOwo+IC0gICAgICAgZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUocGh5X21vZGVf
c3RyKTsgaSsrKSB7Cj4gLSAgICAgICAgICAgICAgIGlmX3N0ciA9IGRldl9yZWFkX3N0cmluZyhl
dGhkZXYsIHBoeV9tb2RlX3N0cltpXSk7Cj4gLSAgICAgICAgICAgICAgIGlmIChpZl9zdHIpIHsK
PiAtICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmZhY2UgPSBwaHlfZ2V0X2ludGVyZmFjZV9i
eV9uYW1lKGlmX3N0cik7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gLSAgICAg
ICAgICAgICAgIH0KPiAtICAgICAgIH0KPiAtICAgICAgIGlmIChpbnRlcmZhY2UgPCAwKQo+IC0g
ICAgICAgICAgICAgICBpbnRlcmZhY2UgPSBQSFlfSU5URVJGQUNFX01PREVfTk9ORTsKPiArICAg
ICAgIGludGVyZmFjZSA9IGRldl9yZWFkX3BoeV9tb2RlKGV0aGRldik7Cj4gICAgICAgICBpZiAo
aW50ZXJmYWNlID09IFBIWV9JTlRFUkZBQ0VfTU9ERV9OT05FKQo+ICAgICAgICAgICAgICAgICBk
ZXZfZGJnKGV0aGRldiwgImNhbid0IGZpbmQgaW50ZXJmYWNlIG1vZGUsIGRlZmF1bHQgdG8gTk9O
RVxuIik7Cj4KPiAtLQo+IDIuMzQuMQo+ClJldmlld2VkLWJ5OiBSYW1vbiBGcmllZCA8cmZyaWVk
LmRldkBnbWFpbC5jb20+Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fClVib290LXN0bTMyIG1haWxpbmcgbGlzdApVYm9vdC1zdG0zMkBzdC1tZC1tYWlsbWFu
LnN0b3JtcmVwbHkuY29tCmh0dHBzOi8vc3QtbWQtbWFpbG1hbi5zdG9ybXJlcGx5LmNvbS9tYWls
bWFuL2xpc3RpbmZvL3Vib290LXN0bTMyCg==
