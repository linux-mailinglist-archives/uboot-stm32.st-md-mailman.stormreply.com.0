Return-Path: <uboot-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+uboot-stm32@lfdr.de
Delivered-To: lists+uboot-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id 1E6EDB41EE9
	for <lists+uboot-stm32@lfdr.de>; Wed,  3 Sep 2025 14:27:06 +0200 (CEST)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id D7956C3FAC8;
	Wed,  3 Sep 2025 12:27:05 +0000 (UTC)
Received: from mx07-00178001.pphosted.com (mx07-00178001.pphosted.com
 [185.132.182.106])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 1F47FC3FAC7
 for <uboot-stm32@st-md-mailman.stormreply.com>;
 Wed,  3 Sep 2025 12:27:05 +0000 (UTC)
Received: from pps.filterd (m0241204.ppops.net [127.0.0.1])
 by mx07-00178001.pphosted.com (8.18.1.2/8.18.1.2) with ESMTP id 583AEkN8009823;
 Wed, 3 Sep 2025 14:26:57 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=foss.st.com; h=
 cc:content-transfer-encoding:content-type:date:from:in-reply-to
 :message-id:mime-version:references:subject:to; s=selector1; bh=
 9wTJIJMvx1qU54SD8Am4YNw6J1hC1fSwbFsy1watcUM=; b=JTfvu5eVjx7E7XVL
 /0dXkPgVdPyqs99Nh+c4hCk+6OMhfOF/XYhoxW+UkFjkIkICPl0TKeoRy4s96joc
 fpbg09yneu02so2LE17H5YMa65Qdz8ybkWcwcymQcCniKI+M14YWw73dULhzQ4lh
 DkUmxK6ezZJzE/cwWyqwjklOL2wKhPdNFnGHSSV0EEqLNDrO8LCd/29eX6nXjv0i
 YpbzH6cpUnUAuC4icNAXgoq8Af82CZAjWDuTbNmgXPJCHowOgsSZnSnO9JPWF+IW
 2+pNvH+k0oCFLShP31nbR/ftFfSCLBYD5cR+Eg9Z/iNRjvFRxMWNEsX0QM0xKr4c
 SfPW1g==
Received: from beta.dmz-ap.st.com (beta.dmz-ap.st.com [138.198.100.35])
 by mx07-00178001.pphosted.com (PPS) with ESMTPS id 48urmxgygd-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Wed, 03 Sep 2025 14:26:57 +0200 (MEST)
Received: from euls16034.sgp.st.com (euls16034.sgp.st.com [10.75.44.20])
 by beta.dmz-ap.st.com (STMicroelectronics) with ESMTP id BB6CE40048;
 Wed,  3 Sep 2025 14:26:05 +0200 (CEST)
Received: from Webmail-eu.st.com (shfdag1node2.st.com [10.75.129.70])
 by euls16034.sgp.st.com (STMicroelectronics) with ESMTP id 01A782B4F72;
 Wed,  3 Sep 2025 14:25:41 +0200 (CEST)
Received: from localhost (10.130.74.180) by SHFDAG1NODE2.st.com (10.75.129.70)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.2507.57; Wed, 3 Sep
 2025 14:25:40 +0200
From: Raphael Gallais-Pou <raphael.gallais-pou@foss.st.com>
Date: Wed, 3 Sep 2025 14:25:37 +0200
MIME-Version: 1.0
Message-ID: <20250903-master-v2-3-5cdf73bff42c@foss.st.com>
References: <20250903-master-v2-0-5cdf73bff42c@foss.st.com>
In-Reply-To: <20250903-master-v2-0-5cdf73bff42c@foss.st.com>
To: Tom Rini <trini@konsulko.com>, Kamil Lulko <kamil.lulko@gmail.com>,
 Patrice Chotard <patrice.chotard@foss.st.com>, Dillon Min
 <dillon.minfei@gmail.com>, Patrick Delaunay <patrick.delaunay@foss.st.com>,
 Anatolij Gustschin <ag.dev.uboot@gmail.com>,
 Simon Glass <sjg@chromium.org>, Sumit Garg <sumit.garg@kernel.org>,
 Philippe Cornu <philippe.cornu@foss.st.com>,
 Yannick Fertre <yannick.fertre@foss.st.com>
X-Mailer: b4 0.14.2
X-Originating-IP: [10.130.74.180]
X-ClientProxiedBy: EQNCAS1NODE4.st.com (10.75.129.82) To SHFDAG1NODE2.st.com
 (10.75.129.70)
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.293,Aquarius:18.0.1117,Hydra:6.1.9,FMLib:17.12.80.40
 definitions=2025-09-03_06,2025-08-28_01,2025-03-28_01
Cc: uboot-stm32@st-md-mailman.stormreply.com, u-boot@lists.denx.de
Subject: [Uboot-stm32] [PATCH v2 3/7] video: stm32: STM32 driver support for
	LVDS
X-BeenThere: uboot-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <uboot-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/uboot-stm32>, 
 <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/uboot-stm32/>
List-Post: <mailto:uboot-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/uboot-stm32>, 
 <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: uboot-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Uboot-stm32" <uboot-stm32-bounces@st-md-mailman.stormreply.com>

VGhlIExWRFMgRGlzcGxheSBJbnRlcmZhY2UgVHJhbnNtaXR0ZXIgaGFuZGxlcyB0aGUgTFZEUyBw
cm90b2NvbDoKaXQgbWFwcyB0aGUgcGl4ZWxzIHJlY2VpdmVkIGZyb20gdGhlIHVwc3RyZWFtIFBp
eGVsLURNQSAoTFREQykKb250byB0aGUgTFZEUyBQSFkuCgpUaGUgTFZEUyBjb250cm9sbGVyIGRy
aXZlciBzdXBwb3J0cyB0aGUgZm9sbG93aW5nIGhpZ2gtbGV2ZWwgZmVhdHVyZXM6CiAgICAgICAg
4oCiIEZEUC1MaW5rLUkgYW5kIE9wZW5MREkgKHYwLjk1KSBwcm90b2NvbHMKICAgICAgICDigKIg
U2luZ2xlLUxpbmsgb3IgRHVhbC1MaW5rIG9wZXJhdGlvbgogICAgICAgIOKAoiBTaW5nbGUtRGlz
cGxheSBvciBEb3VibGUtRGlzcGxheSAod2l0aCB0aGUgc2FtZSBjb250ZW50CiAgICAgICAgICBk
dXBsaWNhdGVkIG9uIGJvdGgpCiAgICAgICAg4oCiIEZsZXhpYmxlIEJpdC1NYXBwaW5nLCBpbmNs
dWRpbmcgSkVJREEgYW5kIFZFU0EKICAgICAgICDigKIgUkdCODg4IG9yIFJHQjY2NiBvdXRwdXQK
ICAgICAgICDigKIgU3luY2hyb25vdXMgZGVzaWduLCB3aXRoIG9uZSBpbnB1dCBwaXhlbCBwZXIg
Y2xvY2sgY3ljbGUKICAgICAgICDigKIgTm8gcmVzb2x1dGlvbiBsaW1pdGF0aW9uLgoKU2lnbmVk
LW9mZi1ieTogUmFwaGFlbCBHYWxsYWlzLVBvdSA8cmFwaGFlbC5nYWxsYWlzLXBvdUBmb3NzLnN0
LmNvbT4KLS0tCiBNQUlOVEFJTkVSUyAgICAgICAgICAgICAgICAgICAgICB8ICAgMSArCiBkb2Mv
Ym9hcmQvc3Qvc3QtZHQucnN0ICAgICAgICAgICB8ICAgMSArCiBkcml2ZXJzL3ZpZGVvL3N0bTMy
L0tjb25maWcgICAgICB8ICAgOSArCiBkcml2ZXJzL3ZpZGVvL3N0bTMyL01ha2VmaWxlICAgICB8
ICAgMSArCiBkcml2ZXJzL3ZpZGVvL3N0bTMyL3N0bTMyX2x2ZHMuYyB8IDY5MyArKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDUgZmlsZXMgY2hhbmdlZCwgNzA1IGluc2Vy
dGlvbnMoKykKCmRpZmYgLS1naXQgYS9NQUlOVEFJTkVSUyBiL01BSU5UQUlORVJTCmluZGV4IDNm
YjE2M2FhMWRiMWRiYTI0OWU2MGI0MGFiM2U3ODVkYjRmZGU1ZDMuLjYwNGJhNGNhMDRjMTA3OWIx
NGNkOGY0YzFmZmY0YzEyZGEwZTI3OGQgMTAwNjQ0Ci0tLSBhL01BSU5UQUlORVJTCisrKyBiL01B
SU5UQUlORVJTCkBAIC03MjgsNiArNzI4LDcgQEAgRjoJZHJpdmVycy9zZXJpYWwvc2VyaWFsX3N0
bTMyLioKIEY6CWRyaXZlcnMvc3BpL3N0bTMyX3FzcGkuYwogRjoJZHJpdmVycy9zcGkvc3RtMzJf
c3BpLmMKIEY6CWRyaXZlcnMvdmlkZW8vc3RtMzIvc3RtMzJfbHRkYy5jCitGOglkcml2ZXJzL3Zp
ZGVvL3N0bTMyL3N0bTMyX2x2ZHMuYwogRjoJZHJpdmVycy93YXRjaGRvZy9zdG0zMm1wX3dkdC5j
CiBGOglpbmNsdWRlL2R0LWJpbmRpbmdzL2Nsb2NrL3N0bTMyZngtY2xvY2suaAogRjoJaW5jbHVk
ZS9kdC1iaW5kaW5ncy9jbG9jay9zdG0zMm1wKgpkaWZmIC0tZ2l0IGEvZG9jL2JvYXJkL3N0L3N0
LWR0LnJzdCBiL2RvYy9ib2FyZC9zdC9zdC1kdC5yc3QKaW5kZXggMmEyODVjODE4MDdlZTI2OTI0
OTQ4ZDhjMjQ5N2YxMWRmZTQ1YjZlNi4uMjhjYWRhOTdlNzJkYTcxMTQwOGExYWFhYTkyOGFkM2Zh
YTUxMTYyZSAxMDA2NDQKLS0tIGEvZG9jL2JvYXJkL3N0L3N0LWR0LnJzdAorKysgYi9kb2MvYm9h
cmQvc3Qvc3QtZHQucnN0CkBAIC0yNSw2ICsyNSw3IEBAIGtlcm5lbCBiaW5kaW5nIGRpcmVjdG9y
eSA9IERvY3VtZW50YXRpb24vZGV2aWNldHJlZS9iaW5kaW5ncy8KICogZGlzcGxheQogCS0gZGlz
cGxheS9zdCxzdG0zMi1kc2kueWFtbAogCS0gZGlzcGxheS9zdCxzdG0zMi1sdGRjLnlhbWwKKyAg
ICAgICAgLSBkaXNwbGF5L3N0LHN0bTMybXAyNS1sdmRzLnlhbWwKICogZ3BpbwogCS0gcGluY3Ry
bC9zdCxzdG0zMi1waW5jdHJsLnlhbWwKICogaHdsb2NrCmRpZmYgLS1naXQgYS9kcml2ZXJzL3Zp
ZGVvL3N0bTMyL0tjb25maWcgYi9kcml2ZXJzL3ZpZGVvL3N0bTMyL0tjb25maWcKaW5kZXggYzM1
NGM0MDJjMjg4YjRjMDA0YmQyYjVjYzc0YTRkMDBiZWVmMjc3My4uNGNiOGE4NDFjYWY1MWFhYmE1
MTE1YjlmY2RkYjk2N2Y3M2EzZDliNCAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9zdG0zMi9L
Y29uZmlnCisrKyBiL2RyaXZlcnMvdmlkZW8vc3RtMzIvS2NvbmZpZwpAQCAtMjMsNiArMjMsMTUg
QEAgY29uZmlnIFZJREVPX1NUTTMyX0RTSQogCSAgVGhpcyBvcHRpb24gZW5hYmxlcyBzdXBwb3J0
IERTSSBpbnRlcm5hbCBicmlkZ2Ugd2hpY2ggY2FuIGJlIHVzZWQgb24KIAkgIGRldmljZXMgd2hp
Y2ggaGF2ZSBEU0kgZGV2aWNlcyBjb25uZWN0ZWQuCiAKK2NvbmZpZyBWSURFT19TVE0zMl9MVkRT
CisJYm9vbCAiRW5hYmxlIFNUTTMyIExWRFMgdmlkZW8gc3VwcG9ydCIKKwlkZXBlbmRzIG9uIFZJ
REVPX1NUTTMyCisJc2VsZWN0IFZJREVPX0JSSURHRQorCXNlbGVjdCBWSURFT19EV19NSVBJX0RT
SQorCWhlbHAKKwkgIFRoaXMgZW5hYmxlcyBMb3cgVm9sdGFnZSBEaWZmZXJlbnRpYWwgU2lnbmFs
aW5nIChMVkRTKSBkaXNwbGF5CisJICBzdXBwb3J0LgorCiBjb25maWcgVklERU9fU1RNMzJfTUFY
X1hSRVMKIAlpbnQgIk1heGltdW0gaG9yaXpvbnRhbCByZXNvbHV0aW9uIChmb3IgbWVtb3J5IGFs
bG9jYXRpb24gcHVycG9zZXMpIgogCWRlcGVuZHMgb24gVklERU9fU1RNMzIKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvdmlkZW8vc3RtMzIvTWFrZWZpbGUgYi9kcml2ZXJzL3ZpZGVvL3N0bTMyL01ha2Vm
aWxlCmluZGV4IGY4YjQyZDFhNGQxMjZhMzFhYTExY2U4MjBlODI5YjEzM2NhM2JiMmQuLjA1OWQ5
MDAwYzFkNzc2MmQwNmJmZjM2ZDU0MDgxNDNhMzQ4NDgyMjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
dmlkZW8vc3RtMzIvTWFrZWZpbGUKKysrIGIvZHJpdmVycy92aWRlby9zdG0zMi9NYWtlZmlsZQpA
QCAtNywzICs3LDQgQEAKIAogb2JqLSR7Q09ORklHX1ZJREVPX1NUTTMyfSA9IHN0bTMyX2x0ZGMu
bwogb2JqLSR7Q09ORklHX1ZJREVPX1NUTTMyX0RTSX0gKz0gc3RtMzJfZHNpLm8KK29iai0ke0NP
TkZJR19WSURFT19TVE0zMl9MVkRTfSArPSBzdG0zMl9sdmRzLm8KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvdmlkZW8vc3RtMzIvc3RtMzJfbHZkcy5jIGIvZHJpdmVycy92aWRlby9zdG0zMi9zdG0zMl9s
dmRzLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAw
MDAwMDAwMDAwMDAwMDAwMC4uN2UxMmQ0ZjZjMTViMzQ2MDMyNmVhOTkzMjRjNzAxYTE4MzA5ZjE2
ZQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvdmlkZW8vc3RtMzIvc3RtMzJfbHZkcy5jCkBA
IC0wLDAgKzEsNjkzIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1s
YXRlcgorLyoKKyAqIENvcHlyaWdodCAoQykgMjAyNSBTVE1pY3JvZWxlY3Ryb25pY3MgLSBBbGwg
UmlnaHRzIFJlc2VydmVkCisgKiBBdXRob3Iocyk6IFJhcGhhw6tsIEdhbGxhaXMtUG91IDxyYXBo
YWVsLmdhbGxhaXMtcG91QGZvc3Muc3QuY29tPiBmb3IgU1RNaWNyb2VsZWN0cm9uaWNzLgorICoK
KyAqIFRoaXMgTG93IFZvbHRhZ2UgRGlmZmVyZW50aWFsIFNpZ25hbCBjb250cm9sbGVyIGRyaXZl
ciBpcyBiYXNlZCBvbiB0aGUgTGludXggS2VybmVsIGRyaXZlciBmcm9tCisgKiBkcml2ZXJzL2dw
dS9kcm0vc3RtL2x0ZGMuYworICovCisKKyNkZWZpbmUgTE9HX0NBVEVHT1JZIFVDTEFTU19WSURF
T19CUklER0UKKworI2luY2x1ZGUgPGNsay5oPgorI2luY2x1ZGUgPGRtLmg+CisjaW5jbHVkZSA8
bG9nLmg+CisjaW5jbHVkZSA8bWVkaWFfYnVzX2Zvcm1hdC5oPgorI2luY2x1ZGUgPHBhbmVsLmg+
CisjaW5jbHVkZSA8cmVzZXQuaD4KKyNpbmNsdWRlIDx2aWRlby5oPgorI2luY2x1ZGUgPHZpZGVv
X2JyaWRnZS5oPgorI2luY2x1ZGUgPGFzbS9pby5oPgorI2luY2x1ZGUgPGRtL2RldmljZV9jb21w
YXQuaD4KKyNpbmNsdWRlIDxkbS9vZm5vZGUuaD4KKyNpbmNsdWRlIDxsaW51eC9pb3BvbGwuaD4K
KworLyogTFZEUyBIb3N0IHJlZ2lzdGVycyAqLworI2RlZmluZSBMVkRTX0NSCQkweDAwMDAgIC8q
IGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgKi8KKyNkZWZpbmUgTFZEU19ETUxDUjAJMHgwMDA0ICAv
KiBkYXRhIG1hcHBpbmcgbHNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgMAkqLworI2RlZmluZSBM
VkRTX0RNTUNSMAkweDAwMDggIC8qIGRhdGEgbWFwcGluZyBtc2IgY29uZmlndXJhdGlvbiByZWdp
c3RlciAwCSovCisjZGVmaW5lIExWRFNfRE1MQ1IxCTB4MDAwQyAgLyogZGF0YSBtYXBwaW5nIGxz
YiBjb25maWd1cmF0aW9uIHJlZ2lzdGVyIDEJKi8KKyNkZWZpbmUgTFZEU19ETU1DUjEJMHgwMDEw
ICAvKiBkYXRhIG1hcHBpbmcgbXNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgMQkqLworI2RlZmlu
ZSBMVkRTX0RNTENSMgkweDAwMTQgIC8qIGRhdGEgbWFwcGluZyBsc2IgY29uZmlndXJhdGlvbiBy
ZWdpc3RlciAyCSovCisjZGVmaW5lIExWRFNfRE1NQ1IyCTB4MDAxOCAgLyogZGF0YSBtYXBwaW5n
IG1zYiBjb25maWd1cmF0aW9uIHJlZ2lzdGVyIDIJKi8KKyNkZWZpbmUgTFZEU19ETUxDUjMJMHgw
MDFDICAvKiBkYXRhIG1hcHBpbmcgbHNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgMwkqLworI2Rl
ZmluZSBMVkRTX0RNTUNSMwkweDAwMjAgIC8qIGRhdGEgbWFwcGluZyBtc2IgY29uZmlndXJhdGlv
biByZWdpc3RlciAzCSovCisjZGVmaW5lIExWRFNfRE1MQ1I0CTB4MDAyNCAgLyogZGF0YSBtYXBw
aW5nIGxzYiBjb25maWd1cmF0aW9uIHJlZ2lzdGVyIDQJKi8KKyNkZWZpbmUgTFZEU19ETU1DUjQJ
MHgwMDI4ICAvKiBkYXRhIG1hcHBpbmcgbXNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgNAkqLwor
I2RlZmluZSBMVkRTX0RNTENSKGlkKQkoTFZEU19ETUxDUjAgKyA4VSAqIChpZCkpCisjZGVmaW5l
IExWRFNfRE1NQ1IoaWQpCShMVkRTX0RNTUNSMCArIDhVICogKGlkKSkKKyNkZWZpbmUgTFZEU19D
REwxQ1IJMHgwMDJDICAvKiBjaGFubmVsIGRpc3RyaWIgbGluayAxIGNvbmZpZ3VyYXRpb24gcmVn
aXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19DREwyQ1IJMHgwMDMwICAvKiBjaGFubmVsIGRpc3RyaWIg
bGluayAyIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIJKi8KKworI2RlZmluZSBDREwxQ1JfREVGQVVM
VAkweDQzMjEKKyNkZWZpbmUgQ0RMMkNSX0RFRkFVTFQJMHg1OTg3NgorCisvKiBMVkRTIEhvc3Qg
cmVnaXN0ZXJzICovCisjZGVmaW5lIExWRFNfUEhZX01BU1RFUgkweDAKKyNkZWZpbmUgTFZEU19Q
SFlfU0xBVkUJMHgxMDAKKworLyogcGh5IHBhcmFtZXRlciBjYW4gb25seSBiZSBvbmUgb2YgdGhv
c2UgdHdvIGFib3ZlICovCisjZGVmaW5lIExWRFNfUFhHQ1IocGh5KQkJKChwaHkpICsgMHgxMDAw
KSAgIC8qIEdsb2JhbCBDb250cm9sIFJlZ2lzdGVyCSovCisjZGVmaW5lIExWRFNfUFhDTUNSMShw
aHkpCSgocGh5KSArIDB4MTAwQykgICAvKiBDdXJyZW50IE1vZGUgQ29udHJvbCBSZWdpc3RlciAx
ICovCisjZGVmaW5lIExWRFNfUFhDTUNSMihwaHkpCSgocGh5KSArIDB4MTAxMCkgIC8qIEN1cnJl
bnQgTW9kZSBDb250cm9sIFJlZ2lzdGVyIDIgKi8KKyNkZWZpbmUgTFZEU19QWFNDUihwaHkpCQko
KHBoeSkgKyAweDEwMjApICAvKiBTZXJpYWwgQ29udHJvbCBSZWdpc3RlcgkqLworI2RlZmluZSBM
VkRTX1BYQkNSMShwaHkpCSgocGh5KSArIDB4MTAyQykgIC8qIEJpYXMgQ29udHJvbCBSZWdpc3Rl
ciAxCSovCisjZGVmaW5lIExWRFNfUFhCQ1IyKHBoeSkJKChwaHkpICsgMHgxMDMwKSAgLyogQmlh
cyBDb250cm9sIFJlZ2lzdGVyIDIJKi8KKyNkZWZpbmUgTFZEU19QWEJDUjMocGh5KQkoKHBoeSkg
KyAweDEwMzQpICAvKiBCaWFzIENvbnRyb2wgUmVnaXN0ZXIgMwkqLworI2RlZmluZSBMVkRTX1BY
TVBMQ1IocGh5KQkoKHBoeSkgKyAweDEwNjQpICAvKiBNb25pdG9yIFBMTCBMb2NrIENvbnRyb2wg
UmVnaXN0ZXIgKi8KKyNkZWZpbmUgTFZEU19QWERDUihwaHkpCQkoKHBoeSkgKyAweDEwODQpICAv
KiBEZWJ1ZyBDb250cm9sIFJlZ2lzdGVyCSovCisjZGVmaW5lIExWRFNfUFhTU1IxKHBoeSkJKChw
aHkpICsgMHgxMDg4KSAgLyogU3BhcmUgU3RhdHVzIFJlZ2lzdGVyIDEJKi8KKyNkZWZpbmUgTFZE
U19QWENGR0NSKHBoeSkJKChwaHkpICsgMHgxMEEwKSAgLyogQ29uZmlndXJhdGlvbiBDb250cm9s
IFJlZ2lzdGVyICovCisjZGVmaW5lIExWRFNfUFhQTExDUjEocGh5KQkoKHBoeSkgKyAweDEwQzAp
ICAvKiBQTExfTU9ERSAxIENvbnRyb2wgUmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19QWFBMTENS
MihwaHkpCSgocGh5KSArIDB4MTBDNCkgIC8qIFBMTF9NT0RFIDIgQ29udHJvbCBSZWdpc3Rlcgkq
LworI2RlZmluZSBMVkRTX1BYUExMU1IocGh5KQkoKHBoeSkgKyAweDEwQzgpICAvKiBQTEwgU3Rh
dHVzIFJlZ2lzdGVyCSovCisjZGVmaW5lIExWRFNfUFhQTExTRENSMShwaHkpCSgocGh5KSArIDB4
MTBDQykgIC8qIFBMTF9TRF8xIENvbnRyb2wgUmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19QWFBM
TFNEQ1IyKHBoeSkJKChwaHkpICsgMHgxMEQwKSAgLyogUExMX1NEXzIgQ29udHJvbCBSZWdpc3Rl
cgkqLworI2RlZmluZSBMVkRTX1BYUExMVFdHQ1IxKHBoeSkJKChwaHkpICsgMHgxMEQ0KSAgLyog
UExMX1RXR18xIENvbnRyb2wgUmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19QWFBMTFRXR0NSMihw
aHkpCSgocGh5KSArIDB4MTBEOCkgIC8qIFBMTF9UV0dfMiBDb250cm9sIFJlZ2lzdGVyCSovCisj
ZGVmaW5lIExWRFNfUFhQTExDUENSKHBoeSkJKChwaHkpICsgMHgxMEUwKSAgLyogUExMX0NQIENv
bnRyb2wgUmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19QWFBMTFRFU1RDUihwaHkpCSgocGh5KSAr
IDB4MTBFOCkgIC8qIFBMTF9URVNUIENvbnRyb2wgUmVnaXN0ZXIJKi8KKworLyogTFZEUyBXcmFw
cGVyIHJlZ2lzdGVycyAqLworI2RlZmluZSBMVkRTX1dDTEtDUgkweDExQjAgIC8qIFdyYXBwZXIg
Y2xvY2sgY29udHJvbCByZWdpc3RlciAqLworI2RlZmluZSBMVkRTX0hXQ0ZHUgkweDFGRjAgIC8q
IEhXIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19WRVJSCTB4MUZGNCAg
LyogVmVyc2lvbiByZWdpc3RlcgkqLworI2RlZmluZSBMVkRTX0lQSURSCTB4MUZGOCAgLyogSWRl
bnRpZmljYXRpb24gcmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19TSURSCTB4MUZGQyAgLyogU2l6
ZSBJZGVudGlmaWNhdGlvbiByZWdpc3RlcgkqLworCisjZGVmaW5lIENSX0xWRFNFTglCSVQoMCkg
IC8qIExWRFMgUEhZIEVuYWJsZSAqLworI2RlZmluZSBDUl9IU1BPTAlCSVQoMSkgIC8qIEhTIFBv
bGFyaXR5IChob3Jpem9udGFsIHN5bmMpICovCisjZGVmaW5lIENSX1ZTUE9MCUJJVCgyKSAgLyog
VlMgUG9sYXJpdHkgKHZlcnRpY2FsIHN5bmMpICovCisjZGVmaW5lIENSX0RFUE9MCUJJVCgzKSAg
LyogREUgUG9sYXJpdHkgKGRhdGEgZW5hYmxlKSAqLworI2RlZmluZSBDUl9DSQkJQklUKDQpICAv
KiBDb250cm9sIEludGVybmFsIChzb2Z0d2FyZSBjb250cm9sbGVkIGJpdCkgKi8KKyNkZWZpbmUg
Q1JfTEtNT0QJQklUKDUpICAvKiBMaW5rIE1vZGUsIGZvciBib3RoIExpbmtzICovCisjZGVmaW5l
IENSX0xLUEhBCUJJVCg2KSAgLyogTGluayBQaGFzZSwgZm9yIGJvdGggTGlua3MgKi8KKyNkZWZp
bmUgQ1JfTEsxUE9MCUdFTk1BU0soMjAsIDE2KSAgLyogTGluay0xIG91dHB1dCBQb2xhcml0eSAq
LworI2RlZmluZSBDUl9MSzJQT0wJR0VOTUFTSygyNSwgMjEpICAvKiBMaW5rLTIgb3V0cHV0IFBv
bGFyaXR5ICovCisKKyNkZWZpbmUgRE1NQ1JYX01BUDAJR0VOTUFTSyg0LCAwKQorI2RlZmluZSBE
TU1DUlhfTUFQMQlHRU5NQVNLKDksIDUpCisjZGVmaW5lIERNTUNSWF9NQVAyCUdFTk1BU0soMTQs
IDEwKQorI2RlZmluZSBETU1DUlhfTUFQMwlHRU5NQVNLKDE5LCAxNSkKKyNkZWZpbmUgRE1MQ1JY
X01BUDQJR0VOTUFTSyg0LCAwKQorI2RlZmluZSBETUxDUlhfTUFQNQlHRU5NQVNLKDksIDUpCisj
ZGVmaW5lIERNTENSWF9NQVA2CUdFTk1BU0soMTQsIDEwKQorCisjZGVmaW5lIENETENSWF9ESVNU
UjAJR0VOTUFTSygzLCAwKQorI2RlZmluZSBDRExDUlhfRElTVFIxCUdFTk1BU0soNywgNCkKKyNk
ZWZpbmUgQ0RMQ1JYX0RJU1RSMglHRU5NQVNLKDExLCA4KQorI2RlZmluZSBDRExDUlhfRElTVFIz
CUdFTk1BU0soMTUsIDEyKQorI2RlZmluZSBDRExDUlhfRElTVFI0CUdFTk1BU0soMTksIDE2KQor
CisjZGVmaW5lIEZSRUZfSU5ERVgJMAorI2RlZmluZSBORElWX0lOREVYCTEKKyNkZWZpbmUgRlBG
RF9JTkRFWAkyCisjZGVmaW5lIE1ESVZfSU5ERVgJMworI2RlZmluZSBGVkNPX0lOREVYCTQKKyNk
ZWZpbmUgQkRJVl9JTkRFWAk1CisjZGVmaW5lIEZCSVRfSU5ERVgJNgorI2RlZmluZSBGTFNfSU5E
RVgJNworI2RlZmluZSBGRFBfSU5ERVgJOAorCisjZGVmaW5lIFBYR0NSX0JJVF9DTEtfT1VUCUJJ
VCgwKQorI2RlZmluZSBQWEdDUl9MU19DTEtfT1VUCUJJVCg0KQorI2RlZmluZSBQWEdDUl9EUF9D
TEtfT1VUCUJJVCg4KQorI2RlZmluZSBQWEdDUl9SU1RaCQlCSVQoMjQpCisjZGVmaW5lIFBYR0NS
X0RJVl9SU1ROCQlCSVQoMjUpCisKKyNkZWZpbmUgUFhDTUNSMV9DTV9FTl9ETAkoQklUKDI4KSB8
IEJJVCgyMCkgfCBCSVQoMTIpIHwgQklUKDQpKQorI2RlZmluZSBQWENNQ1IyX0NNX0VOX0RMNAlC
SVQoNCkKKyNkZWZpbmUgUFhTQ1JfU0VSX0RBVEFfT0sJQklUKDE2KQorI2RlZmluZSBQWEJDUjFf
RU5fQklBU19ETAkoQklUKDE2KSB8IEJJVCgxMikgfCBCSVQoOCkgfCBCSVQoNCkgfCBCSVQoMCkp
CisjZGVmaW5lIFBYQkNSMl9CSUFTX0VOCQlCSVQoMjgpCisjZGVmaW5lIFBYQkNSM19WTV9FTl9E
TAkJKEJJVCgxNikgfCBCSVQoMTIpIHwgQklUKDgpIHwgQklUKDQpIHwgQklUKDApKQorI2RlZmlu
ZSBQWERDUl9QT1dFUl9PSwkJQklUKDEyKQorI2RlZmluZSBQWENGR0NSX0VOX0RJR19ETAlHRU5N
QVNLKDQsIDApCisKKyNkZWZpbmUgUFhQTExDUjFfUExMX0VOCQlCSVQoMCkKKyNkZWZpbmUgUHhQ
TExDUjFfU0RfRU4JCUJJVCgxKQorI2RlZmluZSBQWFBMTENSMV9UV0dfRU4JCUJJVCgyKQorI2Rl
ZmluZSBQWFBMTENSMV9QTExfRElWSURFUlNfRU4JQklUKDgpCisjZGVmaW5lIFBYUExMQ1IyX05E
SVYJCUdFTk1BU0soMjUsIDE2KQorI2RlZmluZSBQWFBMTENSMl9CRElWCQlHRU5NQVNLKDksIDAp
CisjZGVmaW5lIFBYUExMU1JfUExMX0xPQ0sJQklUKDApCisjZGVmaW5lIFBYUExMU0RDUjFfTURJ
VgkJR0VOTUFTSyg5LCAwKQorI2RlZmluZSBQWFBMTENQQ1JfQ1BDVFJMX0RFRkFVTFQJMHgxCisj
ZGVmaW5lIFBYUExMVEVTVENSX1BMTF9URVNUX0NMS19FTglCSVQoMCkKKyNkZWZpbmUgUFhQTExU
RVNUQ1JfUExMX1RESVZfRU4JCUJJVCg4KQorI2RlZmluZSBQWFBMTFRFU1RDUl9URElWCUdFTk1B
U0soMjUsIDE2KQorI2RlZmluZSBQWFBMTFRFU1RDUl9URElWX1ZBTFVFCTcwCisKKyNkZWZpbmUg
V0NMS0NSX1NMVl9DTEtQSVhfU0VMCUJJVCgwKQorI2RlZmluZSBXQ0xLQ1JfU1JDU0VMCQlCSVQo
OCkKKworLyogU2xlZXAgJiB0aW1lb3V0IGZvciBwbGwgbG9jay91bmxvY2sgKi8KKyNkZWZpbmUg
U0xFRVBfVVMJMTAwMAorI2RlZmluZSBUSU1FT1VUX1VTCTIwMDAwMDAwCisKKyNkZWZpbmUgUEhZ
X1NMVl9PRlMJMHgxMDAKKworLyogUExMIHBhcmFtZXRlcnMgKi8KKyNkZWZpbmUgTkRJVl9NSU4J
MgorI2RlZmluZSBORElWX01BWAk2CisjZGVmaW5lIEJESVZfTUlOCTIKKyNkZWZpbmUgQkRJVl9N
QVgJNgorI2RlZmluZSBNRElWX01JTgkxCisjZGVmaW5lIE1ESVZfTUFYCTEwMjMKKworc3RydWN0
IHN0bTMyX2x2ZHNfcGxhdCB7CisJdm9pZCBfX2lvbWVtICpiYXNlOworCXN0cnVjdCB1ZGV2aWNl
ICpwYW5lbDsKKwlzdHJ1Y3QgcmVzZXRfY3RsIHJzdDsKKwlzdHJ1Y3QgY2xrIHBjbGs7CisJc3Ry
dWN0IGNsayByZWZjbGs7Cit9OworCitzdHJ1Y3Qgc3RtMzJfbHZkc19wcml2IHsKKwlzdHJ1Y3Qg
ZGlzcGxheV90aW1pbmcgdGltaW5nczsKKwl1MzIgcmVmY2xrX3JhdGU7CisJaW50IGR1YWxfbGlu
azsKKwlpbnQgYnVzX2Zvcm1hdDsKK307CisKKy8qCisgKiBlbnVtIGx2ZHNfcGl4ZWxzX29yZGVy
IC0gUGl4ZWwgb3JkZXIgb2YgYW4gTFZEUyBjb25uZWN0aW9uCisgKiBATFZEU19EVUFMX0xJTktf
RVZFTl9PRERfUElYRUxTOiBFdmVuIHBpeGVscyBhcmUgZXhwZWN0ZWQgdG8gYmUgZ2VuZXJhdGVk
CisgKiAgICBmcm9tIHRoZSBmaXJzdCBwb3J0LCBvZGQgcGl4ZWxzIGZyb20gdGhlIHNlY29uZCBw
b3J0CisgKiBATFZEU19EVUFMX0xJTktfT0REX0VWRU5fUElYRUxTOiBPZGQgcGl4ZWxzIGFyZSBl
eHBlY3RlZCB0byBiZSBnZW5lcmF0ZWQKKyAqICAgIGZyb20gdGhlIGZpcnN0IHBvcnQsIGV2ZW4g
cGl4ZWxzIGZyb20gdGhlIHNlY29uZCBwb3J0CisgKi8KK2VudW0gbHZkc19waXhlbHNfb3JkZXIg
eworCUxWRFNfRFVBTF9MSU5LX0VWRU5fT0REX1BJWEVMUyA9IEJJVCgwKSwKKwlMVkRTX0RVQUxf
TElOS19PRERfRVZFTl9QSVhFTFMgPSBCSVQoMSksCit9OworCitlbnVtIGx2ZHNfcGl4ZWwgewor
CVBJWF9SXzAJCT0gMHgwMCwKKwlQSVhfUl8xCQk9IDB4MDEsCisJUElYX1JfMgkJPSAweDAyLAor
CVBJWF9SXzMJCT0gMHgwMywKKwlQSVhfUl80CQk9IDB4MDQsCisJUElYX1JfNQkJPSAweDA1LAor
CVBJWF9SXzYJCT0gMHgwNiwKKwlQSVhfUl83CQk9IDB4MDcsCisJUElYX0dfMAkJPSAweDA4LAor
CVBJWF9HXzEJCT0gMHgwOSwKKwlQSVhfR18yCQk9IDB4MEEsCisJUElYX0dfMwkJPSAweDBCLAor
CVBJWF9HXzQJCT0gMHgwQywKKwlQSVhfR181CQk9IDB4MEQsCisJUElYX0dfNgkJPSAweDBFLAor
CVBJWF9HXzcJCT0gMHgwRiwKKwlQSVhfQl8wCQk9IDB4MTAsCisJUElYX0JfMQkJPSAweDExLAor
CVBJWF9CXzIJCT0gMHgxMiwKKwlQSVhfQl8zCQk9IDB4MTMsCisJUElYX0JfNAkJPSAweDE0LAor
CVBJWF9CXzUJCT0gMHgxNSwKKwlQSVhfQl82CQk9IDB4MTYsCisJUElYX0JfNwkJPSAweDE3LAor
CVBJWF9IX1MJCT0gMHgxOCwKKwlQSVhfVl9TCQk9IDB4MTksCisJUElYX0RfRQkJPSAweDFBLAor
CVBJWF9DX0UJCT0gMHgxQiwKKwlQSVhfQ19JCQk9IDB4MUMsCisJUElYX1RPRwkJPSAweDFELAor
CVBJWF9PTkUJCT0gMHgxRSwKKwlQSVhfWkVSCQk9IDB4MUYsCit9OworCisvKgorICogRXhwZWN0
ZWQgSkVJREEtUkdCODg4IGRhdGEgdG8gYmUgc2VudCBpbiBMU0IgZm9ybWF0CisgKgkgICAgYml0
NiAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uYml0MAorICovCitjb25zdCBlbnVtIGx2ZHNf
cGl4ZWwgbHZkc19iaXRtYXBfamVpZGFfcmdiODg4WzVdWzddID0geworCXsgUElYX09ORSwgUElY
X09ORSwgUElYX1pFUiwgUElYX1pFUiwgUElYX1pFUiwgUElYX09ORSwgUElYX09ORSB9LAorCXsg
UElYX0dfMiwgUElYX1JfNywgUElYX1JfNiwgUElYX1JfNSwgUElYX1JfNCwgUElYX1JfMywgUElY
X1JfMiB9LAorCXsgUElYX0JfMywgUElYX0JfMiwgUElYX0dfNywgUElYX0dfNiwgUElYX0dfNSwg
UElYX0dfNCwgUElYX0dfMyB9LAorCXsgUElYX0RfRSwgUElYX1ZfUywgUElYX0hfUywgUElYX0Jf
NywgUElYX0JfNiwgUElYX0JfNSwgUElYX0JfNCB9LAorCXsgUElYX0NfRSwgUElYX0JfMSwgUElY
X0JfMCwgUElYX0dfMSwgUElYX0dfMCwgUElYX1JfMSwgUElYX1JfMCB9Cit9OworCisvKgorICog
RXhwZWN0ZWQgVkVTQS1SR0I4ODggZGF0YSB0byBiZSBzZW50IGluIExTQiBmb3JtYXQKKyAqCSAg
ICBiaXQ2IC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5iaXQwCisgKi8KK2NvbnN0IGVudW0g
bHZkc19waXhlbCBsdmRzX2JpdG1hcF92ZXNhX3JnYjg4OFs1XVs3XSA9IHsKKwl7IFBJWF9PTkUs
IFBJWF9PTkUsIFBJWF9aRVIsIFBJWF9aRVIsIFBJWF9aRVIsIFBJWF9PTkUsIFBJWF9PTkUgfSwK
Kwl7IFBJWF9HXzAsIFBJWF9SXzUsIFBJWF9SXzQsIFBJWF9SXzMsIFBJWF9SXzIsIFBJWF9SXzEs
IFBJWF9SXzAgfSwKKwl7IFBJWF9CXzEsIFBJWF9CXzAsIFBJWF9HXzUsIFBJWF9HXzQsIFBJWF9H
XzMsIFBJWF9HXzIsIFBJWF9HXzEgfSwKKwl7IFBJWF9EX0UsIFBJWF9WX1MsIFBJWF9IX1MsIFBJ
WF9CXzUsIFBJWF9CXzQsIFBJWF9CXzMsIFBJWF9CXzIgfSwKKwl7IFBJWF9DX0UsIFBJWF9CXzcs
IFBJWF9CXzYsIFBJWF9HXzcsIFBJWF9HXzYsIFBJWF9SXzcsIFBJWF9SXzYgfQorfTsKKworc3Rh
dGljIGlubGluZSB2b2lkIGx2ZHNfd3JpdGVsKHZvaWQgX19pb21lbSAqYmFzZSwgdTMyIHJlZywg
dTMyIHZhbCkKK3sKKwl3cml0ZWwodmFsLCBiYXNlICsgcmVnKTsKK30KKworc3RhdGljIGlubGlu
ZSB1MzIgbHZkc19yZWFkbCh2b2lkIF9faW9tZW0gKmJhc2UsIHUzMiByZWcpCit7CisJcmV0dXJu
IHJlYWRsKGJhc2UgKyByZWcpOworfQorCitzdGF0aWMgaW5saW5lIHZvaWQgbHZkc19zZXQodm9p
ZCBfX2lvbWVtICpiYXNlLCB1MzIgcmVnLCB1MzIgbWFzaykKK3sKKwlsdmRzX3dyaXRlbChiYXNl
LCByZWcsIGx2ZHNfcmVhZGwoYmFzZSwgcmVnKSB8IG1hc2spOworfQorCitzdGF0aWMgaW5saW5l
IHZvaWQgbHZkc19jbGVhcih2b2lkIF9faW9tZW0gKmJhc2UsIHUzMiByZWcsIHUzMiBtYXNrKQor
eworCWx2ZHNfd3JpdGVsKGJhc2UsIHJlZywgbHZkc19yZWFkbChiYXNlLCByZWcpICYgfm1hc2sp
OworfQorCitzdGF0aWMgdTMyIHBsbF9nZXRfY2xrb3V0X2toeih1MzIgY2xraW5fa2h6LCB1MzIg
YmRpdiwgdTMyIG1kaXYsIHUzMiBuZGl2KQoreworCWludCBkaXZpc29yID0gbmRpdiAqIGJkaXY7
CisKKwkvKiBQcmV2ZW50cyBmcm9tIGRpdmlzaW9uIGJ5IDAgKi8KKwlpZiAoIWRpdmlzb3IpCisJ
CXJldHVybiAwOworCisJcmV0dXJuIGNsa2luX2toeiAqIG1kaXYgLyBkaXZpc29yOworfQorCitz
dGF0aWMgaW50IGx2ZHNfcGxsX2dldF9wYXJhbXModTMyIGNsa2luX2toeiwgdTMyIGNsa291dF9r
aHosCisJCQkgICAgICAgdTMyICpiZGl2LCB1MzIgKm1kaXYsIHUzMiAqbmRpdikKK3sKKwl1MzIg
aSwgbywgbjsKKwl1MzIgZGVsdGEsIGJlc3RfZGVsdGE7IC8qIGFsbCBpbiBraHogKi8KKworCS8q
IEVhcmx5IGNoZWNrcyBwcmV2ZW50aW5nIGRpdmlzaW9uIGJ5IDAgJiBvZGQgcmVzdWx0cyAqLwor
CWlmIChjbGtpbl9raHogPT0gMCB8fCBjbGtvdXRfa2h6ID09IDApCisJCXJldHVybiAtRUlOVkFM
OworCisJYmVzdF9kZWx0YSA9IDEwMDAwMDA7IC8qIGJpZyBzdGFydGVkIHZhbHVlICgxMDAwMDAw
a2h6KSAqLworCisJZm9yIChpID0gTkRJVl9NSU47IGkgPD0gTkRJVl9NQVg7IGkrKykgeworCQlm
b3IgKG8gPSBCRElWX01JTjsgbyA8PSBCRElWX01BWDsgbysrKSB7CisJCQluID0gRElWX1JPVU5E
X0NMT1NFU1QoaSAqIG8gKiBjbGtvdXRfa2h6LCBjbGtpbl9raHopOworCQkJLyogQ2hlY2sgbmRp
diBhY2NvcmRpbmcgdG8gdmNvIHJhbmdlICovCisJCQlpZiAobiA8IE1ESVZfTUlOIHx8IG4gPiBN
RElWX01BWCkKKwkJCQljb250aW51ZTsKKwkJCS8qIENoZWNrIGlmIG5ldyBkZWx0YSBpcyBiZXR0
ZXIgJiBzYXZlcyBwYXJhbWV0ZXJzICovCisJCQlkZWx0YSA9IGFicyhwbGxfZ2V0X2Nsa291dF9r
aHooY2xraW5fa2h6LCBpLCBuLCBvKSAtIGNsa291dF9raHopOworCQkJaWYgKGRlbHRhIDwgYmVz
dF9kZWx0YSkgeworCQkJCSpuZGl2ID0gaTsKKwkJCQkqbWRpdiA9IG47CisJCQkJKmJkaXYgPSBv
OworCQkJCWJlc3RfZGVsdGEgPSBkZWx0YTsKKwkJCX0KKwkJCS8qIGZhc3QgcmV0dXJuIGluIGNh
c2Ugb2YgInBlcmZlY3QgcmVzdWx0IiAqLworCQkJaWYgKCFkZWx0YSkKKwkJCQlyZXR1cm4gMDsK
KwkJfQorCX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHN0bTMyX2x2ZHNfcGxsX2Vu
YWJsZShzdHJ1Y3QgdWRldmljZSAqZGV2LAorCQkJCSBpbnQgcGh5KQoreworCXN0cnVjdCBzdG0z
Ml9sdmRzX3BsYXQgKnBsYXQgPSBkZXZfZ2V0X3BsYXQoZGV2KTsKKwlzdHJ1Y3Qgc3RtMzJfbHZk
c19wcml2ICpwcml2ID0gZGV2X2dldF9wcml2KGRldik7CisJc3RydWN0IGRpc3BsYXlfdGltaW5n
IHRpbWluZ3MgPSBwcml2LT50aW1pbmdzOworCXUzMiBwbGxfaW5fa2h6LCBiZGl2ID0gMCwgbWRp
diA9IDAsIG5kaXYgPSAwOworCWludCByZXQsIHZhbCwgbXVsdGlwbGllcjsKKworCS8qIFJlbGVh
c2UgUEhZIGZyb20gcmVzZXQgKi8KKwlsdmRzX3NldChwbGF0LT5iYXNlLCBMVkRTX1BYR0NSKHBo
eSksIFBYR0NSX0RJVl9SU1ROIHwgUFhHQ1JfUlNUWik7CisKKwkvKiBsdmRzX3BsbF9jb25maWcg
Ki8KKwkvKiBTZXQgUExMIFNsdiAmIE1zdCBjb25maWdzIGFuZCB0aW1pbmdzICovCisJcGxsX2lu
X2toeiA9IHByaXYtPnJlZmNsa19yYXRlIC8gMTAwMDsKKworCWlmIChwcml2LT5kdWFsX2xpbmsp
CisJCW11bHRpcGxpZXIgPSAyOworCWVsc2UKKwkJbXVsdGlwbGllciA9IDE7CisKKwlyZXQgPSBs
dmRzX3BsbF9nZXRfcGFyYW1zKHBsbF9pbl9raHosIHRpbWluZ3MucGl4ZWxjbG9jay50eXAgKiA3
IC8gMTAwMCAvIG11bHRpcGxpZXIsCisJCQkJICAmYmRpdiwgJm1kaXYsICZuZGl2KTsKKwlpZiAo
cmV0KQorCQlyZXR1cm4gcmV0OworCisJLyogU2V0IFBMTCBwYXJhbWV0ZXJzICovCisJbHZkc193
cml0ZWwocGxhdC0+YmFzZSwgTFZEU19QWFBMTENSMihwaHkpLCAobmRpdiA8PCAxNikgfCBiZGl2
KTsKKwlsdmRzX3dyaXRlbChwbGF0LT5iYXNlLCBMVkRTX1BYUExMU0RDUjEocGh5KSwgbWRpdik7
CisJbHZkc193cml0ZWwocGxhdC0+YmFzZSwgTFZEU19QWFBMTFRFU1RDUihwaHkpLCBQWFBMTFRF
U1RDUl9URElWX1ZBTFVFIDw8IDE2KTsKKworCS8qIERpc2FibGUgVFdHIGFuZCBTRDogZm9yIG5v
dywgUExMIGp1c3QgbmVlZCB0byBiZSBpbiBpbnRlZ2VyIG1vZGUgKi8KKwlsdmRzX2NsZWFyKHBs
YXQtPmJhc2UsIExWRFNfUFhQTExDUjEocGh5KSwgUFhQTExDUjFfVFdHX0VOIHwgUHhQTExDUjFf
U0RfRU4pOworCisJLyogUG93ZXIgdXAgYmlhcyBhbmQgUExMIGRpdmlkZXJzICovCisJbHZkc19z
ZXQocGxhdC0+YmFzZSwgTFZEU19QWERDUihwaHkpLCBQWERDUl9QT1dFUl9PSyk7CisKKwlsdmRz
X3NldChwbGF0LT5iYXNlLCBMVkRTX1BYQ01DUjEocGh5KSwgUFhDTUNSMV9DTV9FTl9ETCk7CisJ
bHZkc19zZXQocGxhdC0+YmFzZSwgTFZEU19QWENNQ1IyKHBoeSksIFBYQ01DUjJfQ01fRU5fREw0
KTsKKworCWx2ZHNfc2V0KHBsYXQtPmJhc2UsIExWRFNfUFhQTExDUENSKHBoeSksIFBYUExMQ1BD
Ul9DUENUUkxfREVGQVVMVCk7CisJbHZkc19zZXQocGxhdC0+YmFzZSwgTFZEU19QWEJDUjMocGh5
KSwgUFhCQ1IzX1ZNX0VOX0RMKTsKKwlsdmRzX3NldChwbGF0LT5iYXNlLCBMVkRTX1BYQkNSMShw
aHkpLCBQWEJDUjFfRU5fQklBU19ETCk7CisJbHZkc19zZXQocGxhdC0+YmFzZSwgTFZEU19QWENG
R0NSKHBoeSksIFBYQ0ZHQ1JfRU5fRElHX0RMKTsKKworCS8qIGx2ZHNfcGxsX2VuYWJsZSAqLwor
CS8qIFBMTCBsb2NrIHRpbWluZyBjb250cm9sIGZvciB0aGUgbW9uaXRvciB1bm1hc2sgYWZ0ZXIg
c3RhcnR1cCAocGxsX2VuKSAqLworCS8qIEFkanVzdCB0aGUgdmFsdWUgc28gdGhhdCB0aGUgbWFz
a2luZyB3aW5kb3cgaXMgb3BlbmVkIGF0IHN0YXJ0LXVwICovCisJLyogTVNUX01PTl9QTExfTE9D
S19VTk1BU0tfVFVORSAqLworCWx2ZHNfd3JpdGVsKHBsYXQtPmJhc2UsIExWRFNfUFhNUExDUihw
aHkpLCAoMHgyMDAgLSAweDE2MCkgPDwgMTYpOworCisJbHZkc193cml0ZWwocGxhdC0+YmFzZSwg
TFZEU19QWEJDUjIocGh5KSwgUFhCQ1IyX0JJQVNfRU4pOworCisJbHZkc19zZXQocGxhdC0+YmFz
ZSwgTFZEU19QWEdDUihwaHkpLAorCQkgUFhHQ1JfRFBfQ0xLX09VVCB8IFBYR0NSX0xTX0NMS19P
VVQgfCBQWEdDUl9CSVRfQ0xLX09VVCk7CisKKwlsdmRzX3NldChwbGF0LT5iYXNlLCBMVkRTX1BY
UExMVEVTVENSKHBoeSksIFBYUExMVEVTVENSX1BMTF9URElWX0VOKTsKKwlsdmRzX3NldChwbGF0
LT5iYXNlLCBMVkRTX1BYUExMQ1IxKHBoeSksIFBYUExMQ1IxX1BMTF9ESVZJREVSU19FTik7CisJ
bHZkc19zZXQocGxhdC0+YmFzZSwgTFZEU19QWFNDUihwaHkpLCBQWFNDUl9TRVJfREFUQV9PSyk7
CisKKwkvKiBFbmFibGUgdGhlIExWRFMgUExMICYgd2FpdCBmb3IgaXRzIGxvY2sgKi8KKwlsdmRz
X3NldChwbGF0LT5iYXNlLCBMVkRTX1BYUExMQ1IxKHBoeSksIFBYUExMQ1IxX1BMTF9FTik7CisJ
cmV0ID0gcmVhZGxfcG9sbF9zbGVlcF90aW1lb3V0KHBsYXQtPmJhc2UgKyBMVkRTX1BYUExMU1Io
cGh5KSwKKwkJCQkgICAgICAgdmFsLCB2YWwgJiBQWFBMTFNSX1BMTF9MT0NLLCBTTEVFUF9VUywg
VElNRU9VVF9VUyk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCS8qIFNlbGVjdCBNU1Qg
UEhZIGNsb2NrIGFzIHBpeGVsIGNsb2NrIGZvciB0aGUgTERJVFggaW5zdGVhZCBvZiBGUkVGICov
CisJLyogV0NMS0NSX1NMVl9DTEtQSVhfU0VMIGlzIGZvciBkdWFsIGxpbmsgKi8KKwlsdmRzX3dy
aXRlbChwbGF0LT5iYXNlLCBMVkRTX1dDTEtDUiwgV0NMS0NSX1NMVl9DTEtQSVhfU0VMKTsKKwor
CWx2ZHNfc2V0KHBsYXQtPmJhc2UsIExWRFNfUFhQTExURVNUQ1IocGh5KSwgUFhQTExURVNUQ1Jf
UExMX1RFU1RfQ0xLX0VOKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHN0bTMyX2x2
ZHNfZW5hYmxlKHN0cnVjdCB1ZGV2aWNlICpkZXYpCit7CisJc3RydWN0IHN0bTMyX2x2ZHNfcGxh
dCAqcGxhdCA9IGRldl9nZXRfcGxhdChkZXYpOworCXN0cnVjdCBzdG0zMl9sdmRzX3ByaXYgKnBy
aXYgPSBkZXZfZ2V0X3ByaXYoZGV2KTsKKwlzdHJ1Y3QgZGlzcGxheV90aW1pbmcgdGltaW5ncyA9
IHByaXYtPnRpbWluZ3M7CisJdTMyIGx2ZHNfY2RsMWNyID0gMDsKKwl1MzIgbHZkc19jZGwyY3Ig
PSAwOworCXUzMiBsdmRzX2RtbGNyID0gMDsKKwl1MzIgbHZkc19kbW1jciA9IDA7CisJdTMyIGx2
ZHNfY3IgPSAwOworCWludCBpOworCisJbHZkc19jbGVhcihwbGF0LT5iYXNlLCBMVkRTX0NETDFD
UiwgQ0RMQ1JYX0RJU1RSMCB8IENETENSWF9ESVNUUjEgfCBDRExDUlhfRElTVFIyCisJCQkJCXwg
Q0RMQ1JYX0RJU1RSMyB8IENETENSWF9ESVNUUjQpOworCWx2ZHNfY2xlYXIocGxhdC0+YmFzZSwg
TFZEU19DREwyQ1IsIENETENSWF9ESVNUUjAgfCBDRExDUlhfRElTVFIxIHwgQ0RMQ1JYX0RJU1RS
MgorCQkJCQl8IENETENSWF9ESVNUUjMgfCBDRExDUlhfRElTVFI0KTsKKworCS8qIFNldCBjaGFu
bmVsIGRpc3RyaWJ1dGlvbiAqLworCWx2ZHNfY3IgJj0gfkNSX0xLTU9EOworCWx2ZHNfY2RsMWNy
ID0gQ0RMMUNSX0RFRkFVTFQ7CisKKwlpZiAocHJpdi0+ZHVhbF9saW5rKSB7CisJCWx2ZHNfY3Ig
fD0gQ1JfTEtNT0Q7CisJCWx2ZHNfY2RsMmNyID0gQ0RMMkNSX0RFRkFVTFQ7CisJfQorCisJLyog
U2V0IHNpZ25hbCBwb2xhcml0eSAqLworCWlmICh0aW1pbmdzLmZsYWdzICYgRElTUExBWV9GTEFH
U19ERV9MT1cpCisJCWx2ZHNfY3IgfD0gQ1JfREVQT0w7CisKKwlpZiAodGltaW5ncy5mbGFncyAm
IERJU1BMQVlfRkxBR1NfSFNZTkNfTE9XKQorCQlsdmRzX2NyIHw9IENSX0hTUE9MOworCisJaWYg
KHRpbWluZ3MuZmxhZ3MgJiBESVNQTEFZX0ZMQUdTX1ZTWU5DX0xPVykKKwkJbHZkc19jciB8PSBD
Ul9WU1BPTDsKKworCS8qIFNldCBsaW5rIHBoYXNlICovCisJc3dpdGNoIChwcml2LT5kdWFsX2xp
bmspIHsKKwljYXNlIExWRFNfRFVBTF9MSU5LX0VWRU5fT0REX1BJWEVMUzogLyogTEtQSEEgPSAw
ICovCisJCWx2ZHNfY3IgJj0gfkNSX0xLUEhBOworCQlicmVhazsKKwljYXNlIExWRFNfRFVBTF9M
SU5LX09ERF9FVkVOX1BJWEVMUzogLyogTEtQSEEgPSAxICovCisJCWx2ZHNfY3IgfD0gQ1JfTEtQ
SEE7CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCWRldl9kYmcoZGV2LCAiTm8gcGhhc2UgcHJlY2lz
ZWQsIHNldHRpbmcgZGVmYXVsdFxuIik7CisJCWx2ZHNfY3IgJj0gfkNSX0xLUEhBOworCQlicmVh
azsKKwl9CisKKwkvKiBTZXQgRGF0YSBNYXBwaW5nICovCisJc3dpdGNoIChwcml2LT5idXNfZm9y
bWF0KSB7CisJY2FzZSBNRURJQV9CVVNfRk1UX1JHQjg4OF8xWDdYNF9TUFdHOiAvKiBWRVNBLVJH
Qjg4OCAqLworCQlmb3IgKGkgPSAwOyBpIDwgNTsgaSsrKSB7CisJCQlsdmRzX2RtbGNyID0gKChs
dmRzX2JpdG1hcF92ZXNhX3JnYjg4OFtpXVswXSkKKwkJCQkgICAgICArIChsdmRzX2JpdG1hcF92
ZXNhX3JnYjg4OFtpXVsxXSA8PCA1KQorCQkJCSAgICAgICsgKGx2ZHNfYml0bWFwX3Zlc2Ffcmdi
ODg4W2ldWzJdIDw8IDEwKQorCQkJCSAgICAgICsgKGx2ZHNfYml0bWFwX3Zlc2FfcmdiODg4W2ld
WzNdIDw8IDE1KSk7CisJCQlsdmRzX2RtbWNyID0gKChsdmRzX2JpdG1hcF92ZXNhX3JnYjg4OFtp
XVs0XSkKKwkJCQkgICAgICArIChsdmRzX2JpdG1hcF92ZXNhX3JnYjg4OFtpXVs1XSA8PCA1KQor
CQkJCSAgICAgICsgKGx2ZHNfYml0bWFwX3Zlc2FfcmdiODg4W2ldWzZdIDw8IDEwKSk7CisKKwkJ
CS8qIFdyaXRlIHJlZ2lzdGVycyBhdCB0aGUgZW5kIG9mIGNvbXB1dGF0aW9ucyAqLworCQkJbHZk
c193cml0ZWwocGxhdC0+YmFzZSwgTFZEU19ETUxDUihpKSwgbHZkc19kbWxjcik7CisJCQlsdmRz
X3dyaXRlbChwbGF0LT5iYXNlLCBMVkRTX0RNTUNSKGkpLCBsdmRzX2RtbWNyKTsKKwkJfQorCQli
cmVhazsKKwljYXNlIE1FRElBX0JVU19GTVRfUkdCODg4XzFYN1g0X0pFSURBOiAvKiBKRUlEQS1S
R0I4ODggKi8KKwkJZm9yIChpID0gMDsgaSA8IDU7IGkrKykgeworCQkJbHZkc19kbWxjciA9ICgo
bHZkc19iaXRtYXBfamVpZGFfcmdiODg4W2ldWzBdKQorCQkJCSAgICAgICsgKGx2ZHNfYml0bWFw
X2plaWRhX3JnYjg4OFtpXVsxXSA8PCA1KQorCQkJCSAgICAgICsgKGx2ZHNfYml0bWFwX2plaWRh
X3JnYjg4OFtpXVsyXSA8PCAxMCkKKwkJCQkgICAgICArIChsdmRzX2JpdG1hcF9qZWlkYV9yZ2I4
ODhbaV1bM10gPDwgMTUpKTsKKwkJCWx2ZHNfZG1tY3IgPSAoKGx2ZHNfYml0bWFwX2plaWRhX3Jn
Yjg4OFtpXVs0XSkKKwkJCQkgICAgICArIChsdmRzX2JpdG1hcF9qZWlkYV9yZ2I4ODhbaV1bNV0g
PDwgNSkKKwkJCQkgICAgICArIChsdmRzX2JpdG1hcF9qZWlkYV9yZ2I4ODhbaV1bNl0gPDwgMTAp
KTsKKworCQkJLyogV3JpdGUgcmVnaXN0ZXJzIGF0IHRoZSBlbmQgb2YgY29tcHV0YXRpb25zICov
CisJCQlsdmRzX3dyaXRlbChwbGF0LT5iYXNlLCBMVkRTX0RNTENSKGkpLCBsdmRzX2RtbGNyKTsK
KwkJCWx2ZHNfd3JpdGVsKHBsYXQtPmJhc2UsIExWRFNfRE1NQ1IoaSksIGx2ZHNfZG1tY3IpOwor
CQl9CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCWRldl9kYmcoZGV2LCAiVW5zdXBwb3J0ZWQgTFZE
UyBidXMgZm9ybWF0IDB4JTA0eFxuIiwgcHJpdi0+YnVzX2Zvcm1hdCk7CisJfQorCisJLyogVHVy
biB0aGUgb3V0cHV0IG9uICovCisJbHZkc19jciB8PSBDUl9MVkRTRU47CisKKwkvKiBDb21taXQg
Y29uZmlnIHRvIHJlZ2lzdGVycyAqLworCWx2ZHNfc2V0KHBsYXQtPmJhc2UsIExWRFNfQ1IsIGx2
ZHNfY3IpOworCWx2ZHNfd3JpdGVsKHBsYXQtPmJhc2UsIExWRFNfQ0RMMUNSLCBsdmRzX2NkbDFj
cik7CisJbHZkc193cml0ZWwocGxhdC0+YmFzZSwgTFZEU19DREwyQ1IsIGx2ZHNfY2RsMmNyKTsK
KworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHN0bTMyX2x2ZHNfYXR0YWNoKHN0cnVjdCB1
ZGV2aWNlICpkZXYpCit7CisJc3RydWN0IHN0bTMyX2x2ZHNfcGxhdCAqcGxhdCA9IGRldl9nZXRf
cGxhdChkZXYpOworCXN0cnVjdCBzdG0zMl9sdmRzX3ByaXYgKnByaXYgPSBkZXZfZ2V0X3ByaXYo
ZGV2KTsKKwlpbnQgcmV0OworCisJcmV0ID0gcGFuZWxfZ2V0X2Rpc3BsYXlfdGltaW5nKHBsYXQt
PnBhbmVsLCAmcHJpdi0+dGltaW5ncyk7CisJaWYgKHJldCkgeworCQlyZXQgPSBvZm5vZGVfZGVj
b2RlX2Rpc3BsYXlfdGltaW5nKGRldl9vZm5vZGUocGxhdC0+cGFuZWwpLAorCQkJCQkJICAgMCwg
JnByaXYtPnRpbWluZ3MpOworCQlpZiAocmV0KSB7CisJCQlkZXZfZXJyKGRldiwgImRlY29kZSBk
aXNwbGF5IHRpbWluZyBlcnJvciAlZFxuIiwgcmV0KTsKKwkJCXJldHVybiByZXQ7CisJCX0KKwl9
CisKKwlyZXQgPSBzdG0zMl9sdmRzX2VuYWJsZShkZXYpOworCisJcmV0dXJuIHJldDsKK30KKwor
c3RhdGljIGludCBzdG0zMl9sdmRzX3NldF9iYWNrbGlnaHQoc3RydWN0IHVkZXZpY2UgKmRldiwg
aW50IHBlcmNlbnQpCit7CisJc3RydWN0IHN0bTMyX2x2ZHNfcGxhdCAqcGxhdCA9IGRldl9nZXRf
cGxhdChkZXYpOworCWludCByZXQ7CisKKwlyZXQgPSBwYW5lbF9lbmFibGVfYmFja2xpZ2h0KHBs
YXQtPnBhbmVsKTsKKwlpZiAocmV0KSB7CisJCWRldl9lcnIoZGV2LCAicGFuZWwgJXMgZW5hYmxl
IGJhY2tsaWdodCBlcnJvciAlZFxuIiwKKwkJCXBsYXQtPnBhbmVsLT5uYW1lLCByZXQpOworCX0K
KworCXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBpbnQgbHZkc19oYW5kbGVfcGl4ZWxfb3JkZXIo
c3RydWN0IHN0bTMyX2x2ZHNfcGxhdCAqcGxhdCkKK3sKKwlvZm5vZGUgcGFyZW50LCBwYW5lbF9w
b3J0MCwgcGFuZWxfcG9ydDE7CisJYm9vbCBldmVuX3BpeGVscywgb2RkX3BpeGVsczsKKwlpbnQg
cG9ydDAsIHBvcnQxOworCisJLyoKKwkgKiBJbiBjYXNlIHdlIGFyZSBvcGVyYXRpbmcgaW4gc2lu
Z2xlIGxpbmssCisJICogdGhlcmUgaXMgb25seSBvbmUgcG9ydCBsaW5rZWQgdG8gdGhlIExWRFMu
CisJICogQ2hlY2sgd2hldGhlciB3ZSBhcmUgaW4gdGhpcyBjYXNlIGFuZCBleGl0IGlmIHllcy4K
KwkgKi8KKwlwYXJlbnQgPSBvZm5vZGVfZmluZF9zdWJub2RlKGRldl9vZm5vZGUocGxhdC0+cGFu
ZWwpLCAicG9ydHMiKTsKKwlpZiAoIW9mbm9kZV92YWxpZChwYXJlbnQpKQorCQlyZXR1cm4gMDsK
KworCXBhbmVsX3BvcnQwID0gb2Zub2RlX2ZpcnN0X3N1Ym5vZGUocGFyZW50KTsKKwlpZiAoIW9m
bm9kZV92YWxpZChwYW5lbF9wb3J0MCkpCisJCXJldHVybiAtRVBJUEU7CisKKwlldmVuX3BpeGVs
cyA9IG9mbm9kZV9yZWFkX2Jvb2wocGFuZWxfcG9ydDAsICJkdWFsLWx2ZHMtZXZlbi1waXhlbHMi
KTsKKwlvZGRfcGl4ZWxzID0gb2Zub2RlX3JlYWRfYm9vbChwYW5lbF9wb3J0MCwgImR1YWwtbHZk
cy1vZGQtcGl4ZWxzIik7CisJaWYgKGV2ZW5fcGl4ZWxzICYmIG9kZF9waXhlbHMpCisJCXJldHVy
biAtRUlOVkFMOworCisJcG9ydDAgPSBldmVuX3BpeGVscyA/IExWRFNfRFVBTF9MSU5LX0VWRU5f
T0REX1BJWEVMUyA6CisJCUxWRFNfRFVBTF9MSU5LX09ERF9FVkVOX1BJWEVMUzsKKworCXBhbmVs
X3BvcnQxID0gb2Zub2RlX25leHRfc3Vibm9kZShwYW5lbF9wb3J0MCk7CisJaWYgKCFvZm5vZGVf
dmFsaWQocGFuZWxfcG9ydDEpKQorCQlyZXR1cm4gLUVQSVBFOworCisJZXZlbl9waXhlbHMgPSBv
Zm5vZGVfcmVhZF9ib29sKHBhbmVsX3BvcnQxLCAiZHVhbC1sdmRzLWV2ZW4tcGl4ZWxzIik7CisJ
b2RkX3BpeGVscyA9IG9mbm9kZV9yZWFkX2Jvb2wocGFuZWxfcG9ydDEsICJkdWFsLWx2ZHMtb2Rk
LXBpeGVscyIpOworCWlmIChldmVuX3BpeGVscyAmJiBvZGRfcGl4ZWxzKQorCQlyZXR1cm4gLUVJ
TlZBTDsKKworCXBvcnQxID0gZXZlbl9waXhlbHMgPyBMVkRTX0RVQUxfTElOS19FVkVOX09ERF9Q
SVhFTFMgOgorCQlMVkRTX0RVQUxfTElOS19PRERfRVZFTl9QSVhFTFM7CisKKwkvKgorCSAqIEEg
dmFsaWQgZHVhbC1MVkRTIGJ1cyBpcyBmb3VuZCB3aGVuIG9uZSBwb3J0IGlzIG1hcmtlZCB3aXRo
CisJICogImR1YWwtbHZkcy1ldmVuLXBpeGVscyIsIGFuZCB0aGUgb3RoZXIgcG9ydCBpcyBtYXJr
ZWQgd2l0aAorCSAqICJkdWFsLWx2ZHMtb2RkLXBpeGVscyIsIGJhaWwgb3V0IGlmIHRoZSBtYXJr
ZXJzIGFyZSBub3QgcmlnaHQuCisJICovCisJaWYgKHBvcnQwICsgcG9ydDEgIT0gTFZEU19EVUFM
X0xJTktfRVZFTl9PRERfUElYRUxTICsgTFZEU19EVUFMX0xJTktfT0REX0VWRU5fUElYRUxTKQor
CQlyZXR1cm4gLUVJTlZBTDsKKworCXJldHVybiBwb3J0MDsKK30KKworc3RhdGljIGludCBzdG0z
Ml9sdmRzX29mX3RvX3BsYXQoc3RydWN0IHVkZXZpY2UgKmRldikKK3sKKwlzdHJ1Y3Qgc3RtMzJf
bHZkc19wbGF0ICpwbGF0ID0gZGV2X2dldF9wbGF0KGRldik7CisJc3RydWN0IHN0bTMyX2x2ZHNf
cHJpdiAqcHJpdiA9IGRldl9nZXRfcHJpdihkZXYpOworCWNvbnN0IGNoYXIgKmRhdGFfbWFwcGlu
ZzsKKwlpbnQgcmV0OworCisJcGxhdC0+YmFzZSA9IGRldl9yZWFkX2FkZHJfcHRyKGRldik7CisJ
aWYgKChmZHRfYWRkcl90KXBsYXQtPmJhc2UgPT0gRkRUX0FERFJfVF9OT05FKSB7CisJCWRldl9l
cnIoZGV2LCAiVW5hYmxlIHRvIHJlYWQgTFZEUyBiYXNlIGFkZHJlc3NcbiIpOworCQlyZXR1cm4g
LUVJTlZBTDsKKwl9CisKKwlyZXQgPSBjbGtfZ2V0X2J5X25hbWUoZGV2LCAicGNsayIsICZwbGF0
LT5wY2xrKTsKKwlpZiAocmV0KSB7CisJCWRldl9lcnIoZGV2LCAiVW5hYmxlIHRvIGdldCBwZXJp
cGhlcmFsIGNsb2NrOiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlyZXQgPSBj
bGtfZ2V0X2J5X25hbWUoZGV2LCAicmVmIiwgJnBsYXQtPnJlZmNsayk7CisJaWYgKHJldCkgewor
CQlkZXZfZXJyKGRldiwgIlVuYWJsZSB0byBnZXQgcmVmZXJlbmNlIGNsb2NrOiAlZFxuIiwgcmV0
KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlyZXQgPSByZXNldF9nZXRfYnlfaW5kZXgoZGV2LCAw
LCAmcGxhdC0+cnN0KTsKKwlpZiAocmV0KSB7CisJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIGdl
dCBMVkRTIHJlc2V0OiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlyZXQgPSB1
Y2xhc3NfZ2V0X2RldmljZV9ieV9kcml2ZXIoVUNMQVNTX1BBTkVMLAorCQkJCQkgIERNX0RSSVZF
Ul9HRVQoc2ltcGxlX3BhbmVsKSwgJnBsYXQtPnBhbmVsKTsKKwlpZiAocmV0KSB7CisJCWRldl9l
cnIoZGV2LCAicGFuZWwgZGV2aWNlIGVycm9yICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0Owor
CX0KKworCXJldCA9IHBhbmVsX2dldF9kaXNwbGF5X3RpbWluZyhwbGF0LT5wYW5lbCwgJnByaXYt
PnRpbWluZ3MpOworCWlmIChyZXQpIHsKKwkJcmV0ID0gb2Zub2RlX2RlY29kZV9kaXNwbGF5X3Rp
bWluZyhkZXZfb2Zub2RlKHBsYXQtPnBhbmVsKSwKKwkJCQkJCSAgIDAsICZwcml2LT50aW1pbmdz
KTsKKwkJaWYgKHJldCkgeworCQkJZGV2X2VycihkZXYsICJkZWNvZGUgZGlzcGxheSB0aW1pbmcg
ZXJyb3IgJWRcbiIsIHJldCk7CisJCQlyZXR1cm4gcmV0OworCQl9CisJfQorCisJZGF0YV9tYXBw
aW5nID0gb2Zub2RlX3JlYWRfc3RyaW5nKGRldl9vZm5vZGUocGxhdC0+cGFuZWwpLCAiZGF0YS1t
YXBwaW5nIik7CisJaWYgKCFzdHJjbXAoZGF0YV9tYXBwaW5nLCAidmVzYS0yNCIpKQorCQlwcml2
LT5idXNfZm9ybWF0ID0gTUVESUFfQlVTX0ZNVF9SR0I4ODhfMVg3WDRfU1BXRzsKKwllbHNlIGlm
ICghc3RyY21wKGRhdGFfbWFwcGluZywgImplaWRhLTI0IikpCisJCXByaXYtPmJ1c19mb3JtYXQg
PSBNRURJQV9CVVNfRk1UX1JHQjg4OF8xWDdYNF9KRUlEQTsKKwllbHNlCisJCXByaXYtPmJ1c19m
b3JtYXQgPSBNRURJQV9CVVNfRk1UX1JHQjg4OF8xWDdYNF9TUFdHOworCisJcmV0dXJuIDA7Cit9
CisKK3N0YXRpYyBpbnQgc3RtMzJfbHZkc19wcm9iZShzdHJ1Y3QgdWRldmljZSAqZGV2KQorewor
CXN0cnVjdCBzdG0zMl9sdmRzX3BsYXQgKnBsYXQgPSBkZXZfZ2V0X3BsYXQoZGV2KTsKKwlzdHJ1
Y3Qgc3RtMzJfbHZkc19wcml2ICpwcml2ID0gZGV2X2dldF9wcml2KGRldik7CisJaW50IHJldDsK
KworCXJldCA9IGNsa19lbmFibGUoJnBsYXQtPnBjbGspOworCWlmIChyZXQpIHsKKwkJZGV2X2Vy
cihkZXYsICJGYWlsZWQgdG8gZW5hYmxlIHBlcmlwaGVyYWwgY2xvY2s6ICVkXG4iLCByZXQpOwor
CQlyZXR1cm4gcmV0OworCX0KKworCXJldCA9IGNsa19lbmFibGUoJnBsYXQtPnJlZmNsayk7CisJ
aWYgKHJldCkgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBlbmFibGUgcmVmZXJlbmNlIGNs
b2NrOiAlZFxuIiwgcmV0KTsKKwkJZ290byBlcnJfY2xrOworCX0KKworCXByaXYtPnJlZmNsa19y
YXRlID0gKHVuc2lnbmVkIGludCljbGtfZ2V0X3JhdGUoJnBsYXQtPnJlZmNsayk7CisKKwlyZXNl
dF9kZWFzc2VydCgmcGxhdC0+cnN0KTsKKworCS8qIEhhbmRsZSBkdWFsIGxpbmsgY29uZmlnICov
CisJcHJpdi0+ZHVhbF9saW5rID0gbHZkc19oYW5kbGVfcGl4ZWxfb3JkZXIocGxhdCk7CisJaWYg
KHByaXYtPmR1YWxfbGluayA8IDApCisJCWdvdG8gZXJyX3JzdDsKKworCWlmIChwcml2LT5kdWFs
X2xpbmsgPiAwKSB7CisJCXJldCA9IHN0bTMyX2x2ZHNfcGxsX2VuYWJsZShkZXYsIExWRFNfUEhZ
X1NMQVZFKTsKKwkJaWYgKHJldCkKKwkJCWdvdG8gZXJyX3JzdDsKKwl9CisKKwlyZXQgPSBzdG0z
Ml9sdmRzX3BsbF9lbmFibGUoZGV2LCBMVkRTX1BIWV9NQVNURVIpOworCWlmIChyZXQpCisJCWdv
dG8gZXJyX3JzdDsKKworCXJldHVybiAwOworCitlcnJfcnN0OgorCWNsa19kaXNhYmxlKCZwbGF0
LT5yZWZjbGspOworZXJyX2NsazoKKwljbGtfZGlzYWJsZSgmcGxhdC0+cGNsayk7CisKKwlyZXR1
cm4gcmV0OworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IHZpZGVvX2JyaWRnZV9vcHMgc3RtMzJf
bHZkc19vcHMgPSB7CisJLmF0dGFjaCA9IHN0bTMyX2x2ZHNfYXR0YWNoLAorCS5zZXRfYmFja2xp
Z2h0ID0gc3RtMzJfbHZkc19zZXRfYmFja2xpZ2h0LAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVj
dCB1ZGV2aWNlX2lkIHN0bTMyX2x2ZHNfaWRzW10gPSB7CisJey5jb21wYXRpYmxlID0gInN0LHN0
bTMybXAyNS1sdmRzIn0sCisJe30KK307CisKK1VfQk9PVF9EUklWRVIoc3RtMzJfbHZkcykgPSB7
CisJLm5hbWUJCT0gInN0bTMyLWRpc3BsYXktbHZkcyIsCisJLmlkCQk9IFVDTEFTU19WSURFT19C
UklER0UsCisJLm9mX21hdGNoCT0gc3RtMzJfbHZkc19pZHMsCisJLm9wcwkJPSAmc3RtMzJfbHZk
c19vcHMsCisJLm9mX3RvX3BsYXQJPSBzdG0zMl9sdmRzX29mX3RvX3BsYXQsCisJLnByb2JlCQk9
IHN0bTMyX2x2ZHNfcHJvYmUsCisJLnBsYXRfYXV0bwk9IHNpemVvZihzdHJ1Y3Qgc3RtMzJfbHZk
c19wbGF0KSwKKwkucHJpdl9hdXRvCT0gc2l6ZW9mKHN0cnVjdCBzdG0zMl9sdmRzX3ByaXYpLAor
fTsKCi0tIAoyLjI1LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fClVib290LXN0bTMyIG1haWxpbmcgbGlzdApVYm9vdC1zdG0zMkBzdC1tZC1tYWlsbWFu
LnN0b3JtcmVwbHkuY29tCmh0dHBzOi8vc3QtbWQtbWFpbG1hbi5zdG9ybXJlcGx5LmNvbS9tYWls
bWFuL2xpc3RpbmZvL3Vib290LXN0bTMyCg==
