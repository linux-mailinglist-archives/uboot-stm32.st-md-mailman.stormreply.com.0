Return-Path: <uboot-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+uboot-stm32@lfdr.de
Delivered-To: lists+uboot-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id B4744B2EEE1
	for <lists+uboot-stm32@lfdr.de>; Thu, 21 Aug 2025 08:58:28 +0200 (CEST)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 4B2D3C3F954;
	Thu, 21 Aug 2025 06:58:28 +0000 (UTC)
Received: from mx07-00178001.pphosted.com (mx07-00178001.pphosted.com
 [185.132.182.106])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 66AACC36B2D
 for <uboot-stm32@st-md-mailman.stormreply.com>;
 Wed, 20 Aug 2025 16:20:19 +0000 (UTC)
Received: from pps.filterd (m0288072.ppops.net [127.0.0.1])
 by mx07-00178001.pphosted.com (8.18.1.2/8.18.1.2) with ESMTP id 57KG7W75021768;
 Wed, 20 Aug 2025 18:20:11 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=foss.st.com; h=
 cc:content-transfer-encoding:content-type:date:from:in-reply-to
 :message-id:mime-version:references:subject:to; s=selector1; bh=
 hL/R07UmuSxhktl9qB5Roei1mjMvTB29ARg2p2NSwsM=; b=o9YER8MChkQiu/3v
 DUkIF2wovdOYAkuUOZsxySRnlxpeDarDYeYtlkmrMszdCQIczp4xnC0J8iGJuL5v
 GWqIbS/JtEH+DT95GA5Tp2n8XvWvIbtO/LDyNSxpLVaFHN54Fg7r0pJecgxRZdLR
 UOIOk9rDLsH9u9eohjJPVjCgLKKXcVHoVtR407wkDm8IYEhWrrlNbLh7f7HQF/wF
 4ZP/hhX3pCbpcspEICc1AFXu9F/HtzVDxye/dSK5cXxGLaKUOcN/QS3tQlER6uN8
 WZ1Ahc30K+lZ6X0q7FpHh5HwjQCgOpGbCgl4zq8623lTMvazE4V5da5MdyPlilLq
 NaGwCA==
Received: from beta.dmz-ap.st.com (beta.dmz-ap.st.com [138.198.100.35])
 by mx07-00178001.pphosted.com (PPS) with ESMTPS id 48n754as7u-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Wed, 20 Aug 2025 18:20:11 +0200 (MEST)
Received: from euls16034.sgp.st.com (euls16034.sgp.st.com [10.75.44.20])
 by beta.dmz-ap.st.com (STMicroelectronics) with ESMTP id 404B240051;
 Wed, 20 Aug 2025 18:19:18 +0200 (CEST)
Received: from Webmail-eu.st.com (shfdag1node2.st.com [10.75.129.70])
 by euls16034.sgp.st.com (STMicroelectronics) with ESMTP id 950F572B81A;
 Wed, 20 Aug 2025 18:18:58 +0200 (CEST)
Received: from localhost (10.252.7.99) by SHFDAG1NODE2.st.com (10.75.129.70)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.2507.39; Wed, 20 Aug
 2025 18:18:58 +0200
From: Raphael Gallais-Pou <raphael.gallais-pou@foss.st.com>
Date: Wed, 20 Aug 2025 18:17:42 +0200
MIME-Version: 1.0
Message-ID: <20250820-master-v1-3-fc76f18ab2fd@foss.st.com>
References: <20250820-master-v1-0-fc76f18ab2fd@foss.st.com>
In-Reply-To: <20250820-master-v1-0-fc76f18ab2fd@foss.st.com>
To: Tom Rini <trini@konsulko.com>, Kamil Lulko <kamil.lulko@gmail.com>,
 Patrice Chotard <patrice.chotard@foss.st.com>, Dillon Min
 <dillon.minfei@gmail.com>, Patrick Delaunay <patrick.delaunay@foss.st.com>,
 Anatolij Gustschin <ag.dev.uboot@gmail.com>,
 Simon Glass <sjg@chromium.org>, Sumit Garg <sumit.garg@kernel.org>
X-Mailer: b4 0.14.2
X-Originating-IP: [10.252.7.99]
X-ClientProxiedBy: SHFCAS1NODE2.st.com (10.75.129.73) To SHFDAG1NODE2.st.com
 (10.75.129.70)
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.293,Aquarius:18.0.1099,Hydra:6.1.9,FMLib:17.12.80.40
 definitions=2025-08-20_04,2025-08-20_02,2025-03-28_01
X-Mailman-Approved-At: Thu, 21 Aug 2025 06:58:27 +0000
Cc: uboot-stm32@st-md-mailman.stormreply.com, u-boot@lists.denx.de
Subject: [Uboot-stm32] [PATCH 3/8] video: stm32: STM32 driver support for
	LVDS
X-BeenThere: uboot-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <uboot-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/uboot-stm32>, 
 <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/uboot-stm32/>
List-Post: <mailto:uboot-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/uboot-stm32>, 
 <mailto:uboot-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: uboot-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Uboot-stm32" <uboot-stm32-bounces@st-md-mailman.stormreply.com>

VGhlIExWRFMgRGlzcGxheSBJbnRlcmZhY2UgVHJhbnNtaXR0ZXIgaGFuZGxlcyB0aGUgTFZEUyBw
cm90b2NvbDoKaXQgbWFwcyB0aGUgcGl4ZWxzIHJlY2VpdmVkIGZyb20gdGhlIHVwc3RyZWFtIFBp
eGVsLURNQSAoTFREQykKb250byB0aGUgTFZEUyBQSFkuCgpUaGUgTFZEUyBjb250cm9sbGVyIGRy
aXZlciBzdXBwb3J0cyB0aGUgZm9sbG93aW5nIGhpZ2gtbGV2ZWwgZmVhdHVyZXM6CiAgICAgICAg
4oCiIEZEUC1MaW5rLUkgYW5kIE9wZW5MREkgKHYwLjk1KSBwcm90b2NvbHMKICAgICAgICDigKIg
U2luZ2xlLUxpbmsgb3IgRHVhbC1MaW5rIG9wZXJhdGlvbgogICAgICAgIOKAoiBTaW5nbGUtRGlz
cGxheSBvciBEb3VibGUtRGlzcGxheSAod2l0aCB0aGUgc2FtZSBjb250ZW50CiAgICAgICAgICBk
dXBsaWNhdGVkIG9uIGJvdGgpCiAgICAgICAg4oCiIEZsZXhpYmxlIEJpdC1NYXBwaW5nLCBpbmNs
dWRpbmcgSkVJREEgYW5kIFZFU0EKICAgICAgICDigKIgUkdCODg4IG9yIFJHQjY2NiBvdXRwdXQK
ICAgICAgICDigKIgU3luY2hyb25vdXMgZGVzaWduLCB3aXRoIG9uZSBpbnB1dCBwaXhlbCBwZXIg
Y2xvY2sgY3ljbGUKICAgICAgICDigKIgTm8gcmVzb2x1dGlvbiBsaW1pdGF0aW9uLgoKU2lnbmVk
LW9mZi1ieTogUmFwaGFlbCBHYWxsYWlzLVBvdSA8cmFwaGFlbC5nYWxsYWlzLXBvdUBmb3NzLnN0
LmNvbT4KLS0tCiBNQUlOVEFJTkVSUyAgICAgICAgICAgICAgICAgICAgICB8ICAgMSArCiBkb2Mv
Ym9hcmQvc3Qvc3QtZHQucnN0ICAgICAgICAgICB8ICAgMSArCiBkcml2ZXJzL3ZpZGVvL3N0bTMy
L0tjb25maWcgICAgICB8ICAgOSArCiBkcml2ZXJzL3ZpZGVvL3N0bTMyL01ha2VmaWxlICAgICB8
ICAgMSArCiBkcml2ZXJzL3ZpZGVvL3N0bTMyL3N0bTMyX2x2ZHMuYyB8IDY3MyArKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDUgZmlsZXMgY2hhbmdlZCwgNjg1IGluc2Vy
dGlvbnMoKykKCmRpZmYgLS1naXQgYS9NQUlOVEFJTkVSUyBiL01BSU5UQUlORVJTCmluZGV4IDNm
YjE2M2FhMWRiMWRiYTI0OWU2MGI0MGFiM2U3ODVkYjRmZGU1ZDMuLjYwNGJhNGNhMDRjMTA3OWIx
NGNkOGY0YzFmZmY0YzEyZGEwZTI3OGQgMTAwNjQ0Ci0tLSBhL01BSU5UQUlORVJTCisrKyBiL01B
SU5UQUlORVJTCkBAIC03MjgsNiArNzI4LDcgQEAgRjoJZHJpdmVycy9zZXJpYWwvc2VyaWFsX3N0
bTMyLioKIEY6CWRyaXZlcnMvc3BpL3N0bTMyX3FzcGkuYwogRjoJZHJpdmVycy9zcGkvc3RtMzJf
c3BpLmMKIEY6CWRyaXZlcnMvdmlkZW8vc3RtMzIvc3RtMzJfbHRkYy5jCitGOglkcml2ZXJzL3Zp
ZGVvL3N0bTMyL3N0bTMyX2x2ZHMuYwogRjoJZHJpdmVycy93YXRjaGRvZy9zdG0zMm1wX3dkdC5j
CiBGOglpbmNsdWRlL2R0LWJpbmRpbmdzL2Nsb2NrL3N0bTMyZngtY2xvY2suaAogRjoJaW5jbHVk
ZS9kdC1iaW5kaW5ncy9jbG9jay9zdG0zMm1wKgpkaWZmIC0tZ2l0IGEvZG9jL2JvYXJkL3N0L3N0
LWR0LnJzdCBiL2RvYy9ib2FyZC9zdC9zdC1kdC5yc3QKaW5kZXggMmEyODVjODE4MDdlZTI2OTI0
OTQ4ZDhjMjQ5N2YxMWRmZTQ1YjZlNi4uMjhjYWRhOTdlNzJkYTcxMTQwOGExYWFhYTkyOGFkM2Zh
YTUxMTYyZSAxMDA2NDQKLS0tIGEvZG9jL2JvYXJkL3N0L3N0LWR0LnJzdAorKysgYi9kb2MvYm9h
cmQvc3Qvc3QtZHQucnN0CkBAIC0yNSw2ICsyNSw3IEBAIGtlcm5lbCBiaW5kaW5nIGRpcmVjdG9y
eSA9IERvY3VtZW50YXRpb24vZGV2aWNldHJlZS9iaW5kaW5ncy8KICogZGlzcGxheQogCS0gZGlz
cGxheS9zdCxzdG0zMi1kc2kueWFtbAogCS0gZGlzcGxheS9zdCxzdG0zMi1sdGRjLnlhbWwKKyAg
ICAgICAgLSBkaXNwbGF5L3N0LHN0bTMybXAyNS1sdmRzLnlhbWwKICogZ3BpbwogCS0gcGluY3Ry
bC9zdCxzdG0zMi1waW5jdHJsLnlhbWwKICogaHdsb2NrCmRpZmYgLS1naXQgYS9kcml2ZXJzL3Zp
ZGVvL3N0bTMyL0tjb25maWcgYi9kcml2ZXJzL3ZpZGVvL3N0bTMyL0tjb25maWcKaW5kZXggYzM1
NGM0MDJjMjg4YjRjMDA0YmQyYjVjYzc0YTRkMDBiZWVmMjc3My4uNGNiOGE4NDFjYWY1MWFhYmE1
MTE1YjlmY2RkYjk2N2Y3M2EzZDliNCAxMDA2NDQKLS0tIGEvZHJpdmVycy92aWRlby9zdG0zMi9L
Y29uZmlnCisrKyBiL2RyaXZlcnMvdmlkZW8vc3RtMzIvS2NvbmZpZwpAQCAtMjMsNiArMjMsMTUg
QEAgY29uZmlnIFZJREVPX1NUTTMyX0RTSQogCSAgVGhpcyBvcHRpb24gZW5hYmxlcyBzdXBwb3J0
IERTSSBpbnRlcm5hbCBicmlkZ2Ugd2hpY2ggY2FuIGJlIHVzZWQgb24KIAkgIGRldmljZXMgd2hp
Y2ggaGF2ZSBEU0kgZGV2aWNlcyBjb25uZWN0ZWQuCiAKK2NvbmZpZyBWSURFT19TVE0zMl9MVkRT
CisJYm9vbCAiRW5hYmxlIFNUTTMyIExWRFMgdmlkZW8gc3VwcG9ydCIKKwlkZXBlbmRzIG9uIFZJ
REVPX1NUTTMyCisJc2VsZWN0IFZJREVPX0JSSURHRQorCXNlbGVjdCBWSURFT19EV19NSVBJX0RT
SQorCWhlbHAKKwkgIFRoaXMgZW5hYmxlcyBMb3cgVm9sdGFnZSBEaWZmZXJlbnRpYWwgU2lnbmFs
aW5nIChMVkRTKSBkaXNwbGF5CisJICBzdXBwb3J0LgorCiBjb25maWcgVklERU9fU1RNMzJfTUFY
X1hSRVMKIAlpbnQgIk1heGltdW0gaG9yaXpvbnRhbCByZXNvbHV0aW9uIChmb3IgbWVtb3J5IGFs
bG9jYXRpb24gcHVycG9zZXMpIgogCWRlcGVuZHMgb24gVklERU9fU1RNMzIKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvdmlkZW8vc3RtMzIvTWFrZWZpbGUgYi9kcml2ZXJzL3ZpZGVvL3N0bTMyL01ha2Vm
aWxlCmluZGV4IGY4YjQyZDFhNGQxMjZhMzFhYTExY2U4MjBlODI5YjEzM2NhM2JiMmQuLjA1OWQ5
MDAwYzFkNzc2MmQwNmJmZjM2ZDU0MDgxNDNhMzQ4NDgyMjcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
dmlkZW8vc3RtMzIvTWFrZWZpbGUKKysrIGIvZHJpdmVycy92aWRlby9zdG0zMi9NYWtlZmlsZQpA
QCAtNywzICs3LDQgQEAKIAogb2JqLSR7Q09ORklHX1ZJREVPX1NUTTMyfSA9IHN0bTMyX2x0ZGMu
bwogb2JqLSR7Q09ORklHX1ZJREVPX1NUTTMyX0RTSX0gKz0gc3RtMzJfZHNpLm8KK29iai0ke0NP
TkZJR19WSURFT19TVE0zMl9MVkRTfSArPSBzdG0zMl9sdmRzLm8KZGlmZiAtLWdpdCBhL2RyaXZl
cnMvdmlkZW8vc3RtMzIvc3RtMzJfbHZkcy5jIGIvZHJpdmVycy92aWRlby9zdG0zMi9zdG0zMl9s
dmRzLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAw
MDAwMDAwMDAwMDAwMDAwMC4uMWUzZTc0MDEyMmRmZWUwYzk0NzgxOTUzMmRhNjRmMGQ5OTMyN2Jk
ZQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvdmlkZW8vc3RtMzIvc3RtMzJfbHZkcy5jCkBA
IC0wLDAgKzEsNjczIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vci1s
YXRlcgorLyoKKyAqIENvcHlyaWdodCAoQykgMjAyNSBTVE1pY3JvZWxlY3Ryb25pY3MgLSBBbGwg
UmlnaHRzIFJlc2VydmVkCisgKiBBdXRob3Iocyk6IFJhcGhhw6tsIEdhbGxhaXMtUG91IDxyYXBo
YWVsLmdhbGxhaXMtcG91QGZvc3Muc3QuY29tPiBmb3IgU1RNaWNyb2VsZWN0cm9uaWNzLgorICoK
KyAqIFRoaXMgTG93IFZvbHRhZ2UgRGlmZmVyZW50aWFsIFNpZ25hbCBjb250cm9sbGVyIGRyaXZl
ciBpcyBiYXNlZCBvbiB0aGUgTGludXggS2VybmVsIGRyaXZlciBmcm9tCisgKiBkcml2ZXJzL2dw
dS9kcm0vc3RtL2x0ZGMuYworICovCisKKyNkZWZpbmUgTE9HX0NBVEVHT1JZIFVDTEFTU19WSURF
T19CUklER0UKKworI2luY2x1ZGUgPGNsay5oPgorI2luY2x1ZGUgPGRtLmg+CisjaW5jbHVkZSA8
bG9nLmg+CisjaW5jbHVkZSA8bWVkaWFfYnVzX2Zvcm1hdC5oPgorI2luY2x1ZGUgPHBhbmVsLmg+
CisjaW5jbHVkZSA8cmVzZXQuaD4KKyNpbmNsdWRlIDx2aWRlby5oPgorI2luY2x1ZGUgPHZpZGVv
X2JyaWRnZS5oPgorI2luY2x1ZGUgPGFzbS9pby5oPgorI2luY2x1ZGUgPGRtL2RldmljZV9jb21w
YXQuaD4KKyNpbmNsdWRlIDxkbS9vZm5vZGUuaD4KKyNpbmNsdWRlIDxsaW51eC9pb3BvbGwuaD4K
KworLyogTFZEUyBIb3N0IHJlZ2lzdGVycyAqLworI2RlZmluZSBMVkRTX0NSCQkweDAwMDAgIC8q
IGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgKi8KKyNkZWZpbmUgTFZEU19ETUxDUjAJMHgwMDA0ICAv
KiBkYXRhIG1hcHBpbmcgbHNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgMAkqLworI2RlZmluZSBM
VkRTX0RNTUNSMAkweDAwMDggIC8qIGRhdGEgbWFwcGluZyBtc2IgY29uZmlndXJhdGlvbiByZWdp
c3RlciAwCSovCisjZGVmaW5lIExWRFNfRE1MQ1IxCTB4MDAwQyAgLyogZGF0YSBtYXBwaW5nIGxz
YiBjb25maWd1cmF0aW9uIHJlZ2lzdGVyIDEJKi8KKyNkZWZpbmUgTFZEU19ETU1DUjEJMHgwMDEw
ICAvKiBkYXRhIG1hcHBpbmcgbXNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgMQkqLworI2RlZmlu
ZSBMVkRTX0RNTENSMgkweDAwMTQgIC8qIGRhdGEgbWFwcGluZyBsc2IgY29uZmlndXJhdGlvbiBy
ZWdpc3RlciAyCSovCisjZGVmaW5lIExWRFNfRE1NQ1IyCTB4MDAxOCAgLyogZGF0YSBtYXBwaW5n
IG1zYiBjb25maWd1cmF0aW9uIHJlZ2lzdGVyIDIJKi8KKyNkZWZpbmUgTFZEU19ETUxDUjMJMHgw
MDFDICAvKiBkYXRhIG1hcHBpbmcgbHNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgMwkqLworI2Rl
ZmluZSBMVkRTX0RNTUNSMwkweDAwMjAgIC8qIGRhdGEgbWFwcGluZyBtc2IgY29uZmlndXJhdGlv
biByZWdpc3RlciAzCSovCisjZGVmaW5lIExWRFNfRE1MQ1I0CTB4MDAyNCAgLyogZGF0YSBtYXBw
aW5nIGxzYiBjb25maWd1cmF0aW9uIHJlZ2lzdGVyIDQJKi8KKyNkZWZpbmUgTFZEU19ETU1DUjQJ
MHgwMDI4ICAvKiBkYXRhIG1hcHBpbmcgbXNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgNAkqLwor
I2RlZmluZSBMVkRTX0RNTENSKGlkKQkoTFZEU19ETUxDUjAgKyA4VSAqIChpZCkpCisjZGVmaW5l
IExWRFNfRE1NQ1IoaWQpCShMVkRTX0RNTUNSMCArIDhVICogKGlkKSkKKyNkZWZpbmUgTFZEU19D
REwxQ1IJMHgwMDJDICAvKiBjaGFubmVsIGRpc3RyaWIgbGluayAxIGNvbmZpZ3VyYXRpb24gcmVn
aXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19DREwyQ1IJMHgwMDMwICAvKiBjaGFubmVsIGRpc3RyaWIg
bGluayAyIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIJKi8KKworI2RlZmluZSBDREwxQ1JfREVGQVVM
VAkweDQzMjEKKyNkZWZpbmUgQ0RMMkNSX0RFRkFVTFQJMHg1OTg3NgorCisvKiBMVkRTIEhvc3Qg
cmVnaXN0ZXJzICovCisjZGVmaW5lIExWRFNfUEhZX01BU1RFUgkweDAKKyNkZWZpbmUgTFZEU19Q
SFlfU0xBVkUJMHgxMDAKKworLyogcGh5IHBhcmFtZXRlciBjYW4gb25seSBiZSBvbmUgb2YgdGhv
c2UgdHdvIGFib3ZlICovCisjZGVmaW5lIExWRFNfUHhHQ1IocGh5KQkJKChwaHkpICsgMHgxMDAw
KSAgIC8qIEdsb2JhbCBDb250cm9sIFJlZ2lzdGVyCSovCisjZGVmaW5lIExWRFNfUHhDTUNSMShw
aHkpCSgocGh5KSArIDB4MTAwQykgICAvKiBDdXJyZW50IE1vZGUgQ29udHJvbCBSZWdpc3RlciAx
ICovCisjZGVmaW5lIExWRFNfUHhDTUNSMihwaHkpCSgocGh5KSArIDB4MTAxMCkgIC8qIEN1cnJl
bnQgTW9kZSBDb250cm9sIFJlZ2lzdGVyIDIgKi8KKyNkZWZpbmUgTFZEU19QeFNDUihwaHkpCQko
KHBoeSkgKyAweDEwMjApICAvKiBTZXJpYWwgQ29udHJvbCBSZWdpc3RlcgkqLworI2RlZmluZSBM
VkRTX1B4QkNSMShwaHkpCSgocGh5KSArIDB4MTAyQykgIC8qIEJpYXMgQ29udHJvbCBSZWdpc3Rl
ciAxCSovCisjZGVmaW5lIExWRFNfUHhCQ1IyKHBoeSkJKChwaHkpICsgMHgxMDMwKSAgLyogQmlh
cyBDb250cm9sIFJlZ2lzdGVyIDIJKi8KKyNkZWZpbmUgTFZEU19QeEJDUjMocGh5KQkoKHBoeSkg
KyAweDEwMzQpICAvKiBCaWFzIENvbnRyb2wgUmVnaXN0ZXIgMwkqLworI2RlZmluZSBMVkRTX1B4
TVBMQ1IocGh5KQkoKHBoeSkgKyAweDEwNjQpICAvKiBNb25pdG9yIFBMTCBMb2NrIENvbnRyb2wg
UmVnaXN0ZXIgKi8KKyNkZWZpbmUgTFZEU19QeERDUihwaHkpCQkoKHBoeSkgKyAweDEwODQpICAv
KiBEZWJ1ZyBDb250cm9sIFJlZ2lzdGVyCSovCisjZGVmaW5lIExWRFNfUHhTU1IxKHBoeSkJKChw
aHkpICsgMHgxMDg4KSAgLyogU3BhcmUgU3RhdHVzIFJlZ2lzdGVyIDEJKi8KKyNkZWZpbmUgTFZE
U19QeENGR0NSKHBoeSkJKChwaHkpICsgMHgxMEEwKSAgLyogQ29uZmlndXJhdGlvbiBDb250cm9s
IFJlZ2lzdGVyICovCisjZGVmaW5lIExWRFNfUHhQTExDUjEocGh5KQkoKHBoeSkgKyAweDEwQzAp
ICAvKiBQTExfTU9ERSAxIENvbnRyb2wgUmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19QeFBMTENS
MihwaHkpCSgocGh5KSArIDB4MTBDNCkgIC8qIFBMTF9NT0RFIDIgQ29udHJvbCBSZWdpc3Rlcgkq
LworI2RlZmluZSBMVkRTX1B4UExMU1IocGh5KQkoKHBoeSkgKyAweDEwQzgpICAvKiBQTEwgU3Rh
dHVzIFJlZ2lzdGVyCSovCisjZGVmaW5lIExWRFNfUHhQTExTRENSMShwaHkpCSgocGh5KSArIDB4
MTBDQykgIC8qIFBMTF9TRF8xIENvbnRyb2wgUmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19QeFBM
TFNEQ1IyKHBoeSkJKChwaHkpICsgMHgxMEQwKSAgLyogUExMX1NEXzIgQ29udHJvbCBSZWdpc3Rl
cgkqLworI2RlZmluZSBMVkRTX1B4UExMVFdHQ1IxKHBoeSkJKChwaHkpICsgMHgxMEQ0KSAgLyog
UExMX1RXR18xIENvbnRyb2wgUmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19QeFBMTFRXR0NSMihw
aHkpCSgocGh5KSArIDB4MTBEOCkgIC8qIFBMTF9UV0dfMiBDb250cm9sIFJlZ2lzdGVyCSovCisj
ZGVmaW5lIExWRFNfUHhQTExDUENSKHBoeSkJKChwaHkpICsgMHgxMEUwKSAgLyogUExMX0NQIENv
bnRyb2wgUmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19QeFBMTFRFU1RDUihwaHkpCSgocGh5KSAr
IDB4MTBFOCkgIC8qIFBMTF9URVNUIENvbnRyb2wgUmVnaXN0ZXIJKi8KKworLyogTFZEUyBXcmFw
cGVyIHJlZ2lzdGVycyAqLworI2RlZmluZSBMVkRTX1dDTEtDUgkweDExQjAgIC8qIFdyYXBwZXIg
Y2xvY2sgY29udHJvbCByZWdpc3RlciAqLworI2RlZmluZSBMVkRTX0hXQ0ZHUgkweDFGRjAgIC8q
IEhXIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19WRVJSCTB4MUZGNCAg
LyogVmVyc2lvbiByZWdpc3RlcgkqLworI2RlZmluZSBMVkRTX0lQSURSCTB4MUZGOCAgLyogSWRl
bnRpZmljYXRpb24gcmVnaXN0ZXIJKi8KKyNkZWZpbmUgTFZEU19TSURSCTB4MUZGQyAgLyogU2l6
ZSBJZGVudGlmaWNhdGlvbiByZWdpc3RlcgkqLworCisjZGVmaW5lIENSX0xWRFNFTglCSVQoMCkg
IC8qIExWRFMgUEhZIEVuYWJsZSAqLworI2RlZmluZSBDUl9IU1BPTAlCSVQoMSkgIC8qIEhTIFBv
bGFyaXR5IChob3Jpem9udGFsIHN5bmMpICovCisjZGVmaW5lIENSX1ZTUE9MCUJJVCgyKSAgLyog
VlMgUG9sYXJpdHkgKHZlcnRpY2FsIHN5bmMpICovCisjZGVmaW5lIENSX0RFUE9MCUJJVCgzKSAg
LyogREUgUG9sYXJpdHkgKGRhdGEgZW5hYmxlKSAqLworI2RlZmluZSBDUl9DSQkJQklUKDQpICAv
KiBDb250cm9sIEludGVybmFsIChzb2Z0d2FyZSBjb250cm9sbGVkIGJpdCkgKi8KKyNkZWZpbmUg
Q1JfTEtNT0QJQklUKDUpICAvKiBMaW5rIE1vZGUsIGZvciBib3RoIExpbmtzICovCisjZGVmaW5l
IENSX0xLUEhBCUJJVCg2KSAgLyogTGluayBQaGFzZSwgZm9yIGJvdGggTGlua3MgKi8KKyNkZWZp
bmUgQ1JfTEsxUE9MCUdFTk1BU0soMjAsIDE2KSAgLyogTGluay0xIG91dHB1dCBQb2xhcml0eSAq
LworI2RlZmluZSBDUl9MSzJQT0wJR0VOTUFTSygyNSwgMjEpICAvKiBMaW5rLTIgb3V0cHV0IFBv
bGFyaXR5ICovCisKKyNkZWZpbmUgRE1NQ1J4X01BUDAJR0VOTUFTSyg0LCAwKQorI2RlZmluZSBE
TU1DUnhfTUFQMQlHRU5NQVNLKDksIDUpCisjZGVmaW5lIERNTUNSeF9NQVAyCUdFTk1BU0soMTQs
IDEwKQorI2RlZmluZSBETU1DUnhfTUFQMwlHRU5NQVNLKDE5LCAxNSkKKyNkZWZpbmUgRE1MQ1J4
X01BUDQJR0VOTUFTSyg0LCAwKQorI2RlZmluZSBETUxDUnhfTUFQNQlHRU5NQVNLKDksIDUpCisj
ZGVmaW5lIERNTENSeF9NQVA2CUdFTk1BU0soMTQsIDEwKQorCisjZGVmaW5lIENETENSeF9ESVNU
UjAJR0VOTUFTSygzLCAwKQorI2RlZmluZSBDRExDUnhfRElTVFIxCUdFTk1BU0soNywgNCkKKyNk
ZWZpbmUgQ0RMQ1J4X0RJU1RSMglHRU5NQVNLKDExLCA4KQorI2RlZmluZSBDRExDUnhfRElTVFIz
CUdFTk1BU0soMTUsIDEyKQorI2RlZmluZSBDRExDUnhfRElTVFI0CUdFTk1BU0soMTksIDE2KQor
CisjZGVmaW5lIEZSRUZfSU5ERVgJMAorI2RlZmluZSBORElWX0lOREVYCTEKKyNkZWZpbmUgRlBG
RF9JTkRFWAkyCisjZGVmaW5lIE1ESVZfSU5ERVgJMworI2RlZmluZSBGVkNPX0lOREVYCTQKKyNk
ZWZpbmUgQkRJVl9JTkRFWAk1CisjZGVmaW5lIEZCSVRfSU5ERVgJNgorI2RlZmluZSBGTFNfSU5E
RVgJNworI2RlZmluZSBGRFBfSU5ERVgJOAorCisjZGVmaW5lIFBIWV9HQ1JfQklUX0NMS19PVVQJ
QklUKDApCisjZGVmaW5lIFBIWV9HQ1JfTFNfQ0xLX09VVAlCSVQoNCkKKyNkZWZpbmUgUEhZX0dD
Ul9EUF9DTEtfT1VUCUJJVCg4KQorI2RlZmluZSBQSFlfR0NSX1JTVFoJCUJJVCgyNCkKKyNkZWZp
bmUgUEhZX0dDUl9ESVZfUlNUTglCSVQoMjUpCisKKyNkZWZpbmUgUEhZX1B4UExMVEVTVENSX1RE
SVYJR0VOTUFTSygyNSwgMTYpCisjZGVmaW5lIFBIWV9QeFBMTENSMl9ORElWCUdFTk1BU0soMjUs
IDE2KQorI2RlZmluZSBQSFlfUHhQTExDUjJfQkRJVglHRU5NQVNLKDksIDApCisjZGVmaW5lIFBI
WV9QeFBMTFNEQ1IxX01ESVYJR0VOTUFTSyg5LCAwKQorCisjZGVmaW5lIFBMTF9FTgkJQklUKDAp
CisjZGVmaW5lIFBMTF9MT0NLCUJJVCgwKQorI2RlZmluZSBDTV9FTl9ETAkoQklUKDI4KSB8IEJJ
VCgyMCkgfCBCSVQoMTIpIHwgQklUKDQpKQorI2RlZmluZSBDTV9FTl9ETDQJQklUKDQpCisjZGVm
aW5lIFZNX0VOX0RMCShCSVQoMTYpIHwgQklUKDEyKSB8IEJJVCg4KSB8IEJJVCg0KSB8IEJJVCgw
KSkKKyNkZWZpbmUgRU5fQklBU19ETAkoQklUKDE2KSB8IEJJVCgxMikgfCBCSVQoOCkgfCBCSVQo
NCkgfCBCSVQoMCkpCisjZGVmaW5lIEVOX0RJR19ETAlHRU5NQVNLKDQsIDApCisjZGVmaW5lIEJJ
QVNfRU4JCUJJVCgyOCkKKyNkZWZpbmUgUE9XRVJfT0sJQklUKDEyKQorCisjZGVmaW5lIFdDTEtD
Ul9TTFZfQ0xLUElYX1NFTAlCSVQoMCkKKyNkZWZpbmUgV0NMS0NSX1NSQ1NFTAkJQklUKDgpCisK
Ky8qIFNsZWVwICYgdGltZW91dCBmb3IgcGxsIGxvY2svdW5sb2NrICovCisjZGVmaW5lIFNMRUVQ
X1VTCTEwMDAKKyNkZWZpbmUgVElNRU9VVF9VUwkyMDAwMDAwMAorCisjZGVmaW5lIFBIWV9TTFZf
T0ZTCTB4MTAwCisKK3N0cnVjdCBzdG0zMl9sdmRzIHsKKwl2b2lkIF9faW9tZW0gKmJhc2U7CisJ
c3RydWN0IHVkZXZpY2UgKnBhbmVsOworCXUzMiByZWZjbGs7CisJaW50IGR1YWxfbGluazsKKwlp
bnQgYnVzX2Zvcm1hdDsKK307CisKKy8qCisgKiBlbnVtIGx2ZHNfcGl4ZWxzX29yZGVyIC0gUGl4
ZWwgb3JkZXIgb2YgYW4gTFZEUyBjb25uZWN0aW9uCisgKiBATFZEU19EVUFMX0xJTktfRVZFTl9P
RERfUElYRUxTOiBFdmVuIHBpeGVscyBhcmUgZXhwZWN0ZWQgdG8gYmUgZ2VuZXJhdGVkCisgKiAg
ICBmcm9tIHRoZSBmaXJzdCBwb3J0LCBvZGQgcGl4ZWxzIGZyb20gdGhlIHNlY29uZCBwb3J0Cisg
KiBATFZEU19EVUFMX0xJTktfT0REX0VWRU5fUElYRUxTOiBPZGQgcGl4ZWxzIGFyZSBleHBlY3Rl
ZCB0byBiZSBnZW5lcmF0ZWQKKyAqICAgIGZyb20gdGhlIGZpcnN0IHBvcnQsIGV2ZW4gcGl4ZWxz
IGZyb20gdGhlIHNlY29uZCBwb3J0CisgKi8KK2VudW0gbHZkc19waXhlbHNfb3JkZXIgeworCUxW
RFNfRFVBTF9MSU5LX0VWRU5fT0REX1BJWEVMUyA9IEJJVCgwKSwKKwlMVkRTX0RVQUxfTElOS19P
RERfRVZFTl9QSVhFTFMgPSBCSVQoMSksCit9OworCitlbnVtIGx2ZHNfcGl4ZWwgeworCVBJWF9S
XzAJCT0gMHgwMCwKKwlQSVhfUl8xCQk9IDB4MDEsCisJUElYX1JfMgkJPSAweDAyLAorCVBJWF9S
XzMJCT0gMHgwMywKKwlQSVhfUl80CQk9IDB4MDQsCisJUElYX1JfNQkJPSAweDA1LAorCVBJWF9S
XzYJCT0gMHgwNiwKKwlQSVhfUl83CQk9IDB4MDcsCisJUElYX0dfMAkJPSAweDA4LAorCVBJWF9H
XzEJCT0gMHgwOSwKKwlQSVhfR18yCQk9IDB4MEEsCisJUElYX0dfMwkJPSAweDBCLAorCVBJWF9H
XzQJCT0gMHgwQywKKwlQSVhfR181CQk9IDB4MEQsCisJUElYX0dfNgkJPSAweDBFLAorCVBJWF9H
XzcJCT0gMHgwRiwKKwlQSVhfQl8wCQk9IDB4MTAsCisJUElYX0JfMQkJPSAweDExLAorCVBJWF9C
XzIJCT0gMHgxMiwKKwlQSVhfQl8zCQk9IDB4MTMsCisJUElYX0JfNAkJPSAweDE0LAorCVBJWF9C
XzUJCT0gMHgxNSwKKwlQSVhfQl82CQk9IDB4MTYsCisJUElYX0JfNwkJPSAweDE3LAorCVBJWF9I
X1MJCT0gMHgxOCwKKwlQSVhfVl9TCQk9IDB4MTksCisJUElYX0RfRQkJPSAweDFBLAorCVBJWF9D
X0UJCT0gMHgxQiwKKwlQSVhfQ19JCQk9IDB4MUMsCisJUElYX1RPRwkJPSAweDFELAorCVBJWF9P
TkUJCT0gMHgxRSwKKwlQSVhfWkVSCQk9IDB4MUYsCit9OworCisvKgorICogRXhwZWN0ZWQgSkVJ
REEtUkdCODg4IGRhdGEgdG8gYmUgc2VudCBpbiBMU0IgZm9ybWF0CisgKgkgICAgYml0NiAuLi4u
Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uYml0MAorICovCitjb25zdCBlbnVtIGx2ZHNfcGl4ZWwg
bHZkc19iaXRtYXBfamVpZGFfcmdiODg4WzVdWzddID0geworCXsgUElYX09ORSwgUElYX09ORSwg
UElYX1pFUiwgUElYX1pFUiwgUElYX1pFUiwgUElYX09ORSwgUElYX09ORSB9LAorCXsgUElYX0df
MiwgUElYX1JfNywgUElYX1JfNiwgUElYX1JfNSwgUElYX1JfNCwgUElYX1JfMywgUElYX1JfMiB9
LAorCXsgUElYX0JfMywgUElYX0JfMiwgUElYX0dfNywgUElYX0dfNiwgUElYX0dfNSwgUElYX0df
NCwgUElYX0dfMyB9LAorCXsgUElYX0RfRSwgUElYX1ZfUywgUElYX0hfUywgUElYX0JfNywgUElY
X0JfNiwgUElYX0JfNSwgUElYX0JfNCB9LAorCXsgUElYX0NfRSwgUElYX0JfMSwgUElYX0JfMCwg
UElYX0dfMSwgUElYX0dfMCwgUElYX1JfMSwgUElYX1JfMCB9Cit9OworCisvKgorICogRXhwZWN0
ZWQgVkVTQS1SR0I4ODggZGF0YSB0byBiZSBzZW50IGluIExTQiBmb3JtYXQKKyAqCSAgICBiaXQ2
IC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5iaXQwCisgKi8KK2NvbnN0IGVudW0gbHZkc19w
aXhlbCBsdmRzX2JpdG1hcF92ZXNhX3JnYjg4OFs1XVs3XSA9IHsKKwl7IFBJWF9PTkUsIFBJWF9P
TkUsIFBJWF9aRVIsIFBJWF9aRVIsIFBJWF9aRVIsIFBJWF9PTkUsIFBJWF9PTkUgfSwKKwl7IFBJ
WF9HXzAsIFBJWF9SXzUsIFBJWF9SXzQsIFBJWF9SXzMsIFBJWF9SXzIsIFBJWF9SXzEsIFBJWF9S
XzAgfSwKKwl7IFBJWF9CXzEsIFBJWF9CXzAsIFBJWF9HXzUsIFBJWF9HXzQsIFBJWF9HXzMsIFBJ
WF9HXzIsIFBJWF9HXzEgfSwKKwl7IFBJWF9EX0UsIFBJWF9WX1MsIFBJWF9IX1MsIFBJWF9CXzUs
IFBJWF9CXzQsIFBJWF9CXzMsIFBJWF9CXzIgfSwKKwl7IFBJWF9DX0UsIFBJWF9CXzcsIFBJWF9C
XzYsIFBJWF9HXzcsIFBJWF9HXzYsIFBJWF9SXzcsIFBJWF9SXzYgfQorfTsKKworc3RhdGljIGlu
bGluZSB2b2lkIGx2ZHNfd3JpdGVsKHN0cnVjdCBzdG0zMl9sdmRzICpsdmRzLCB1MzIgcmVnLCB1
MzIgdmFsKQoreworCXdyaXRlbCh2YWwsIGx2ZHMtPmJhc2UgKyByZWcpOworfQorCitzdGF0aWMg
aW5saW5lIHUzMiBsdmRzX3JlYWRsKHN0cnVjdCBzdG0zMl9sdmRzICpsdmRzLCB1MzIgcmVnKQor
eworCXJldHVybiByZWFkbChsdmRzLT5iYXNlICsgcmVnKTsKK30KKworc3RhdGljIGlubGluZSB2
b2lkIGx2ZHNfc2V0KHN0cnVjdCBzdG0zMl9sdmRzICpsdmRzLCB1MzIgcmVnLCB1MzIgbWFzaykK
K3sKKwlsdmRzX3dyaXRlbChsdmRzLCByZWcsIGx2ZHNfcmVhZGwobHZkcywgcmVnKSB8IG1hc2sp
OworfQorCitzdGF0aWMgaW5saW5lIHZvaWQgbHZkc19jbGVhcihzdHJ1Y3Qgc3RtMzJfbHZkcyAq
bHZkcywgdTMyIHJlZywgdTMyIG1hc2spCit7CisJbHZkc193cml0ZWwobHZkcywgcmVnLCBsdmRz
X3JlYWRsKGx2ZHMsIHJlZykgJiB+bWFzayk7Cit9CisKKy8qIEludGVnZXIgbW9kZSAqLworI2Rl
ZmluZSBFTl9TRAkJMAorI2RlZmluZSBFTl9UV0cJCTAKKyNkZWZpbmUgRE9XTl9TUFJFQUQJMAor
I2RlZmluZSBURVNUX0RJVgk3MAorCitzdGF0aWMgdTMyIHBsbF9nZXRfY2xrb3V0X2toeih1MzIg
Y2xraW5fa2h6LCB1MzIgYmRpdiwgdTMyIG1kaXYsIHUzMiBuZGl2KQoreworCWludCBkaXZpc29y
ID0gbmRpdiAqIGJkaXY7CisKKwkvKiBQcmV2ZW50cyBmcm9tIGRpdmlzaW9uIGJ5IDAgKi8KKwlp
ZiAoIWRpdmlzb3IpCisJCXJldHVybiAwOworCisJcmV0dXJuIGNsa2luX2toeiAqIG1kaXYgLyBk
aXZpc29yOworfQorCisjZGVmaW5lIE5ESVZfTUlOCTIKKyNkZWZpbmUgTkRJVl9NQVgJNgorI2Rl
ZmluZSBCRElWX01JTgkyCisjZGVmaW5lIEJESVZfTUFYCTYKKyNkZWZpbmUgTURJVl9NSU4JMQor
I2RlZmluZSBNRElWX01BWAkxMDIzCisKK3N0YXRpYyBpbnQgbHZkc19wbGxfZ2V0X3BhcmFtcyh1
MzIgY2xraW5fa2h6LCB1MzIgY2xrb3V0X2toeiwKKwkJCSAgICAgICB1MzIgKmJkaXYsIHUzMiAq
bWRpdiwgdTMyICpuZGl2KQoreworCXUzMiBpLCBvLCBuOworCXUzMiBkZWx0YSwgYmVzdF9kZWx0
YTsgLyogYWxsIGluIGtoeiAqLworCisJLyogRWFybHkgY2hlY2tzIHByZXZlbnRpbmcgZGl2aXNp
b24gYnkgMCAmIG9kZCByZXN1bHRzICovCisJaWYgKGNsa2luX2toeiA8PSAwIHx8IGNsa291dF9r
aHogPD0gMCkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwliZXN0X2RlbHRhID0gMTAwMDAwMDsgLyog
YmlnIHN0YXJ0ZWQgdmFsdWUgKDEwMDAwMDBraHopICovCisKKwlmb3IgKGkgPSBORElWX01JTjsg
aSA8PSBORElWX01BWDsgaSsrKSB7CisJCWZvciAobyA9IEJESVZfTUlOOyBvIDw9IEJESVZfTUFY
OyBvKyspIHsKKwkJCW4gPSBESVZfUk9VTkRfQ0xPU0VTVChpICogbyAqIGNsa291dF9raHosIGNs
a2luX2toeik7CisJCQkvKiBDaGVjayBuZGl2IGFjY29yZGluZyB0byB2Y28gcmFuZ2UgKi8KKwkJ
CWlmIChuIDwgTURJVl9NSU4gfHwgbiA+IE1ESVZfTUFYKQorCQkJCWNvbnRpbnVlOworCQkJLyog
Q2hlY2sgaWYgbmV3IGRlbHRhIGlzIGJldHRlciAmIHNhdmVzIHBhcmFtZXRlcnMgKi8KKwkJCWRl
bHRhID0gYWJzKHBsbF9nZXRfY2xrb3V0X2toeihjbGtpbl9raHosIGksIG4sIG8pIC0gY2xrb3V0
X2toeik7CisJCQlpZiAoZGVsdGEgPCBiZXN0X2RlbHRhKSB7CisJCQkJKm5kaXYgPSBpOworCQkJ
CSptZGl2ID0gbjsKKwkJCQkqYmRpdiA9IG87CisJCQkJYmVzdF9kZWx0YSA9IGRlbHRhOworCQkJ
fQorCQkJLyogZmFzdCByZXR1cm4gaW4gY2FzZSBvZiAicGVyZmVjdCByZXN1bHQiICovCisJCQlp
ZiAoIWRlbHRhKQorCQkJCXJldHVybiAwOworCQl9CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0
YXRpYyBpbnQgc3RtMzJfbHZkc19wbGxfZW5hYmxlKHN0cnVjdCBzdG0zMl9sdmRzICpsdmRzLAor
CQkJCSBzdHJ1Y3QgZGlzcGxheV90aW1pbmcgKnRpbWluZ3MsCisJCQkJIGludCBwaHkpCit7CisJ
dTMyIHBsbF9pbl9raHosIGJkaXYgPSAwLCBtZGl2ID0gMCwgbmRpdiA9IDA7CisJaW50IHJldCwg
dmFsLCBtdWx0aXBsaWVyOworCisJLyogUmVsZWFzZSBQSFkgZnJvbSByZXNldCAqLworCWx2ZHNf
c2V0KGx2ZHMsIExWRFNfUHhHQ1IocGh5KSwgUEhZX0dDUl9ESVZfUlNUTiB8IFBIWV9HQ1JfUlNU
Wik7CisKKwkvKiBsdmRzX3BsbF9jb25maWcgKi8KKwkvKiBTZXQgUExMIFNsdiAmIE1zdCBjb25m
aWdzIGFuZCB0aW1pbmdzICovCisJcGxsX2luX2toeiA9IGx2ZHMtPnJlZmNsayAvIDEwMDA7CisK
KwlpZiAobHZkcy0+ZHVhbF9saW5rKQorCQltdWx0aXBsaWVyID0gMjsKKwllbHNlCisJCW11bHRp
cGxpZXIgPSAxOworCisJcmV0ID0gbHZkc19wbGxfZ2V0X3BhcmFtcyhwbGxfaW5fa2h6LCB0aW1p
bmdzLT5waXhlbGNsb2NrLnR5cCAqIDcgLyAxMDAwIC8gbXVsdGlwbGllciwKKwkJCQkgICZiZGl2
LCAmbWRpdiwgJm5kaXYpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwkvKiBTZXQgUExM
IHBhcmFtZXRlcnMgKi8KKwlsdmRzX3dyaXRlbChsdmRzLCBMVkRTX1B4UExMQ1IyKHBoeSksIChu
ZGl2IDw8IDE2KSB8IGJkaXYpOworCWx2ZHNfd3JpdGVsKGx2ZHMsIExWRFNfUHhQTExTRENSMShw
aHkpLCBtZGl2KTsKKwlsdmRzX3dyaXRlbChsdmRzLCBMVkRTX1B4UExMVEVTVENSKHBoeSksIFRF
U1RfRElWIDw8IDE2KTsKKworCS8qIERpc2FibGUgVFdHIGFuZCBTRDogZm9yIG5vdywgUExMIGp1
c3QgbmVlZCB0byBiZSBpbiBpbnRlZ2VyIG1vZGUgKi8KKwlsdmRzX2NsZWFyKGx2ZHMsIExWRFNf
UHhQTExDUjEocGh5KSwgRU5fVFdHIHwgRU5fU0QpOworCisJLyogUG93ZXIgdXAgYmlhcyBhbmQg
UExMIGRpdmlkZXJzICovCisJbHZkc19zZXQobHZkcywgTFZEU19QeERDUihwaHkpLCBQT1dFUl9P
Syk7CisKKwlsdmRzX3NldChsdmRzLCBMVkRTX1B4Q01DUjEocGh5KSwgQ01fRU5fREwpOworCWx2
ZHNfc2V0KGx2ZHMsIExWRFNfUHhDTUNSMihwaHkpLCBDTV9FTl9ETDQpOworCisJbHZkc19zZXQo
bHZkcywgTFZEU19QeFBMTENQQ1IocGh5KSwgMHgxKTsKKwlsdmRzX3NldChsdmRzLCBMVkRTX1B4
QkNSMyhwaHkpLCBWTV9FTl9ETCk7CisJbHZkc19zZXQobHZkcywgTFZEU19QeEJDUjEocGh5KSwg
RU5fQklBU19ETCk7CisJbHZkc19zZXQobHZkcywgTFZEU19QeENGR0NSKHBoeSksIEVOX0RJR19E
TCk7CisKKwkvKiBsdmRzX3BsbF9lbmFibGUgKi8KKwkvKiBQTEwgbG9jayB0aW1pbmcgY29udHJv
bCBmb3IgdGhlIG1vbml0b3IgdW5tYXNrIGFmdGVyIHN0YXJ0dXAgKHBsbF9lbikgKi8KKwkvKiBB
ZGp1c3QgdGhlIHZhbHVlIHNvIHRoYXQgdGhlIG1hc2tpbmcgd2luZG93IGlzIG9wZW5lZCBhdCBz
dGFydC11cCAqLworCS8qIE1TVF9NT05fUExMX0xPQ0tfVU5NQVNLX1RVTkUgKi8KKwlsdmRzX3dy
aXRlbChsdmRzLCBMVkRTX1B4TVBMQ1IocGh5KSwgKDB4MjAwIC0gMHgxNjApIDw8IDE2KTsKKwor
CWx2ZHNfd3JpdGVsKGx2ZHMsIExWRFNfUHhCQ1IyKHBoeSksIEJJQVNfRU4pOworCisJbHZkc19z
ZXQobHZkcywgTFZEU19QeEdDUihwaHkpLAorCQkgUEhZX0dDUl9EUF9DTEtfT1VUIHwgUEhZX0dD
Ul9MU19DTEtfT1VUIHwgUEhZX0dDUl9CSVRfQ0xLX09VVCk7CisKKwkvKiBUT0RPIGhhcmRjb2Rl
ZCB2YWx1ZXMgZm9yIG5vdyAqLworCWx2ZHNfc2V0KGx2ZHMsIExWRFNfUHhQTExURVNUQ1IocGh5
KSwgQklUKDgpIC8qIFBMTF9URVNUX0RJVl9FTiAqLyk7CisJbHZkc19zZXQobHZkcywgTFZEU19Q
eFBMTENSMShwaHkpLCBCSVQoOCkgLyogUExMX0RJVklERVJTX0VOQUJMRSAqLyk7CisKKwlsdmRz
X3NldChsdmRzLCBMVkRTX1B4U0NSKHBoeSksIEJJVCgxNikgLyogU0VSX0RBVEFfT0sgKi8pOwor
CisJLyogRW5hYmxlIHRoZSBMVkRTIFBMTCAmIHdhaXQgZm9yIGl0cyBsb2NrICovCisJbHZkc19z
ZXQobHZkcywgTFZEU19QeFBMTENSMShwaHkpLCBQTExfRU4pOworCXJldCA9IHJlYWRsX3BvbGxf
c2xlZXBfdGltZW91dChsdmRzLT5iYXNlICsgTFZEU19QeFBMTFNSKHBoeSksCisJCQkJICAgICAg
IHZhbCwgdmFsICYgUExMX0xPQ0ssIFNMRUVQX1VTLCBUSU1FT1VUX1VTKTsKKwlpZiAocmV0KQor
CQlyZXR1cm4gcmV0OworCisJLyogU2VsZWN0IE1TVCBQSFkgY2xvY2sgYXMgcGl4ZWwgY2xvY2sg
Zm9yIHRoZSBMRElUWCBpbnN0ZWFkIG9mIEZSRUYgKi8KKwkvKiBXQ0xLQ1JfU0xWX0NMS1BJWF9T
RUwgaXMgZm9yIGR1YWwgbGluayAqLworCWx2ZHNfd3JpdGVsKGx2ZHMsIExWRFNfV0NMS0NSLCBX
Q0xLQ1JfU0xWX0NMS1BJWF9TRUwpOworCisJbHZkc19zZXQobHZkcywgTFZEU19QeFBMTFRFU1RD
UihwaHkpLCBCSVQoMCkpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgc3RtMzJfbHZk
c19lbmFibGUoc3RydWN0IHVkZXZpY2UgKmRldiwKKwkJCSAgICAgY29uc3Qgc3RydWN0IGRpc3Bs
YXlfdGltaW5nICp0aW1pbmdzKQoreworCXN0cnVjdCBzdG0zMl9sdmRzICpsdmRzID0gZGV2X2dl
dF9wcml2KGRldik7CisJdTMyIGx2ZHNfY2RsMWNyID0gMDsKKwl1MzIgbHZkc19jZGwyY3IgPSAw
OworCXUzMiBsdmRzX2RtbGNyID0gMDsKKwl1MzIgbHZkc19kbW1jciA9IDA7CisJdTMyIGx2ZHNf
Y3IgPSAwOworCWludCBpOworCisJbHZkc19jbGVhcihsdmRzLCBMVkRTX0NETDFDUiwgQ0RMQ1J4
X0RJU1RSMCB8IENETENSeF9ESVNUUjEgfCBDRExDUnhfRElTVFIyCisJCQkJCXwgQ0RMQ1J4X0RJ
U1RSMyB8IENETENSeF9ESVNUUjQpOworCWx2ZHNfY2xlYXIobHZkcywgTFZEU19DREwyQ1IsIENE
TENSeF9ESVNUUjAgfCBDRExDUnhfRElTVFIxIHwgQ0RMQ1J4X0RJU1RSMgorCQkJCQl8IENETENS
eF9ESVNUUjMgfCBDRExDUnhfRElTVFI0KTsKKworCS8qIFNldCBjaGFubmVsIGRpc3RyaWJ1dGlv
biAqLworCWx2ZHNfY3IgJj0gfkNSX0xLTU9EOworCWx2ZHNfY2RsMWNyID0gQ0RMMUNSX0RFRkFV
TFQ7CisKKwlpZiAobHZkcy0+ZHVhbF9saW5rKSB7CisJCWx2ZHNfY3IgfD0gQ1JfTEtNT0Q7CisJ
CWx2ZHNfY2RsMmNyID0gQ0RMMkNSX0RFRkFVTFQ7CisJfQorCisJLyogU2V0IHNpZ25hbCBwb2xh
cml0eSAqLworCWlmICh0aW1pbmdzLT5mbGFncyAmIERJU1BMQVlfRkxBR1NfREVfTE9XKQorCQls
dmRzX2NyIHw9IENSX0RFUE9MOworCisJaWYgKHRpbWluZ3MtPmZsYWdzICYgRElTUExBWV9GTEFH
U19IU1lOQ19MT1cpCisJCWx2ZHNfY3IgfD0gQ1JfSFNQT0w7CisKKwlpZiAodGltaW5ncy0+Zmxh
Z3MgJiBESVNQTEFZX0ZMQUdTX1ZTWU5DX0xPVykKKwkJbHZkc19jciB8PSBDUl9WU1BPTDsKKwor
CS8qIFNldCBsaW5rIHBoYXNlICovCisJc3dpdGNoIChsdmRzLT5kdWFsX2xpbmspIHsKKwljYXNl
IExWRFNfRFVBTF9MSU5LX0VWRU5fT0REX1BJWEVMUzogLyogTEtQSEEgPSAwICovCisJCWx2ZHNf
Y3IgJj0gfkNSX0xLUEhBOworCQlicmVhazsKKwljYXNlIExWRFNfRFVBTF9MSU5LX09ERF9FVkVO
X1BJWEVMUzogLyogTEtQSEEgPSAxICovCisJCWx2ZHNfY3IgfD0gQ1JfTEtQSEE7CisJCWJyZWFr
OworCWRlZmF1bHQ6CisJCWRldl9kYmcoZGV2LCAiTm8gcGhhc2UgcHJlY2lzZWQsIHNldHRpbmcg
ZGVmYXVsdFxuIik7CisJCWx2ZHNfY3IgJj0gfkNSX0xLUEhBOworCQlicmVhazsKKwl9CisKKwkv
KiBTZXQgRGF0YSBNYXBwaW5nICovCisJc3dpdGNoIChsdmRzLT5idXNfZm9ybWF0KSB7CisJY2Fz
ZSBNRURJQV9CVVNfRk1UX1JHQjg4OF8xWDdYNF9TUFdHOiAvKiBWRVNBLVJHQjg4OCAqLworCQlm
b3IgKGkgPSAwOyBpIDwgNTsgaSsrKSB7CisJCQlsdmRzX2RtbGNyID0gKChsdmRzX2JpdG1hcF92
ZXNhX3JnYjg4OFtpXVswXSkKKwkJCQkgICAgICArIChsdmRzX2JpdG1hcF92ZXNhX3JnYjg4OFtp
XVsxXSA8PCA1KQorCQkJCSAgICAgICsgKGx2ZHNfYml0bWFwX3Zlc2FfcmdiODg4W2ldWzJdIDw8
IDEwKQorCQkJCSAgICAgICsgKGx2ZHNfYml0bWFwX3Zlc2FfcmdiODg4W2ldWzNdIDw8IDE1KSk7
CisJCQlsdmRzX2RtbWNyID0gKChsdmRzX2JpdG1hcF92ZXNhX3JnYjg4OFtpXVs0XSkKKwkJCQkg
ICAgICArIChsdmRzX2JpdG1hcF92ZXNhX3JnYjg4OFtpXVs1XSA8PCA1KQorCQkJCSAgICAgICsg
KGx2ZHNfYml0bWFwX3Zlc2FfcmdiODg4W2ldWzZdIDw8IDEwKSk7CisKKwkJCS8qIFdyaXRlIHJl
Z2lzdGVycyBhdCB0aGUgZW5kIG9mIGNvbXB1dGF0aW9ucyAqLworCQkJbHZkc193cml0ZWwobHZk
cywgTFZEU19ETUxDUihpKSwgbHZkc19kbWxjcik7CisJCQlsdmRzX3dyaXRlbChsdmRzLCBMVkRT
X0RNTUNSKGkpLCBsdmRzX2RtbWNyKTsKKwkJfQorCQlicmVhazsKKwljYXNlIE1FRElBX0JVU19G
TVRfUkdCODg4XzFYN1g0X0pFSURBOiAvKiBKRUlEQS1SR0I4ODggKi8KKwkJZm9yIChpID0gMDsg
aSA8IDU7IGkrKykgeworCQkJbHZkc19kbWxjciA9ICgobHZkc19iaXRtYXBfamVpZGFfcmdiODg4
W2ldWzBdKQorCQkJCSAgICAgICsgKGx2ZHNfYml0bWFwX2plaWRhX3JnYjg4OFtpXVsxXSA8PCA1
KQorCQkJCSAgICAgICsgKGx2ZHNfYml0bWFwX2plaWRhX3JnYjg4OFtpXVsyXSA8PCAxMCkKKwkJ
CQkgICAgICArIChsdmRzX2JpdG1hcF9qZWlkYV9yZ2I4ODhbaV1bM10gPDwgMTUpKTsKKwkJCWx2
ZHNfZG1tY3IgPSAoKGx2ZHNfYml0bWFwX2plaWRhX3JnYjg4OFtpXVs0XSkKKwkJCQkgICAgICAr
IChsdmRzX2JpdG1hcF9qZWlkYV9yZ2I4ODhbaV1bNV0gPDwgNSkKKwkJCQkgICAgICArIChsdmRz
X2JpdG1hcF9qZWlkYV9yZ2I4ODhbaV1bNl0gPDwgMTApKTsKKworCQkJLyogV3JpdGUgcmVnaXN0
ZXJzIGF0IHRoZSBlbmQgb2YgY29tcHV0YXRpb25zICovCisJCQlsdmRzX3dyaXRlbChsdmRzLCBM
VkRTX0RNTENSKGkpLCBsdmRzX2RtbGNyKTsKKwkJCWx2ZHNfd3JpdGVsKGx2ZHMsIExWRFNfRE1N
Q1IoaSksIGx2ZHNfZG1tY3IpOworCQl9CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCWRldl9kYmco
ZGV2LCAiVW5zdXBwb3J0ZWQgTFZEUyBidXMgZm9ybWF0IDB4JTA0eFxuIiwgbHZkcy0+YnVzX2Zv
cm1hdCk7CisJfQorCisJLyogVHVybiB0aGUgb3V0cHV0IG9uICovCisJbHZkc19jciB8PSBDUl9M
VkRTRU47CisKKwkvKiBDb21taXQgY29uZmlnIHRvIHJlZ2lzdGVycyAqLworCWx2ZHNfc2V0KGx2
ZHMsIExWRFNfQ1IsIGx2ZHNfY3IpOworCWx2ZHNfd3JpdGVsKGx2ZHMsIExWRFNfQ0RMMUNSLCBs
dmRzX2NkbDFjcik7CisJbHZkc193cml0ZWwobHZkcywgTFZEU19DREwyQ1IsIGx2ZHNfY2RsMmNy
KTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHN0bTMyX2x2ZHNfYXR0YWNoKHN0cnVj
dCB1ZGV2aWNlICpkZXYpCit7CisJc3RydWN0IHN0bTMyX2x2ZHMgKmx2ZHMgPSBkZXZfZ2V0X3By
aXYoZGV2KTsKKwlzdHJ1Y3QgZGlzcGxheV90aW1pbmcgdGltaW5nczsKKwlpbnQgcmV0OworCisJ
cmV0ID0gcGFuZWxfZ2V0X2Rpc3BsYXlfdGltaW5nKGx2ZHMtPnBhbmVsLCAmdGltaW5ncyk7CisJ
aWYgKHJldCkgeworCQlyZXQgPSBvZm5vZGVfZGVjb2RlX2Rpc3BsYXlfdGltaW5nKGRldl9vZm5v
ZGUobHZkcy0+cGFuZWwpLAorCQkJCQkJICAgMCwgJnRpbWluZ3MpOworCQlpZiAocmV0KSB7CisJ
CQlkZXZfZXJyKGRldiwgImRlY29kZSBkaXNwbGF5IHRpbWluZyBlcnJvciAlZFxuIiwgcmV0KTsK
KwkJCXJldHVybiByZXQ7CisJCX0KKwl9CisKKwlyZXQgPSBzdG0zMl9sdmRzX2VuYWJsZShkZXYs
ICZ0aW1pbmdzKTsKKworCXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBpbnQgc3RtMzJfbHZkc19z
ZXRfYmFja2xpZ2h0KHN0cnVjdCB1ZGV2aWNlICpkZXYsIGludCBwZXJjZW50KQoreworCXN0cnVj
dCBzdG0zMl9sdmRzICpsdmRzID0gZGV2X2dldF9wcml2KGRldik7CisJaW50IHJldDsKKworCXJl
dCA9IHBhbmVsX2VuYWJsZV9iYWNrbGlnaHQobHZkcy0+cGFuZWwpOworCWlmIChyZXQpIHsKKwkJ
ZGV2X2VycihkZXYsICJwYW5lbCAlcyBlbmFibGUgYmFja2xpZ2h0IGVycm9yICVkXG4iLAorCQkJ
bHZkcy0+cGFuZWwtPm5hbWUsIHJldCk7CisJfQorCisJcmV0dXJuIHJldDsKK30KKworc3RhdGlj
IGludCBsdmRzX2hhbmRsZV9waXhlbF9vcmRlcihzdHJ1Y3Qgc3RtMzJfbHZkcyAqbHZkcykKK3sK
KwlvZm5vZGUgcGFyZW50LCBwYW5lbF9wb3J0MCwgcGFuZWxfcG9ydDE7CisJYm9vbCBldmVuX3Bp
eGVscywgb2RkX3BpeGVsczsKKwlpbnQgcG9ydDAsIHBvcnQxOworCisJLyoKKwkgKiBJbiBjYXNl
IHdlIGFyZSBvcGVyYXRpbmcgaW4gc2luZ2xlIGxpbmssCisJICogdGhlcmUgaXMgb25seSBvbmUg
cG9ydCBsaW5rZWQgdG8gdGhlIExWRFMuCisJICogQ2hlY2sgd2hldGhlciB3ZSBhcmUgaW4gdGhp
cyBjYXNlIGFuZCBleGl0IGlmIHllcy4KKwkgKi8KKwlwYXJlbnQgPSBvZm5vZGVfZmluZF9zdWJu
b2RlKGRldl9vZm5vZGUobHZkcy0+cGFuZWwpLCAicG9ydHMiKTsKKwlpZiAoIW9mbm9kZV92YWxp
ZChwYXJlbnQpKQorCQlyZXR1cm4gMDsKKworCXBhbmVsX3BvcnQwID0gb2Zub2RlX2ZpcnN0X3N1
Ym5vZGUocGFyZW50KTsKKwlpZiAoIW9mbm9kZV92YWxpZChwYW5lbF9wb3J0MCkpCisJCXJldHVy
biAtRVBJUEU7CisKKwlldmVuX3BpeGVscyA9IG9mbm9kZV9yZWFkX2Jvb2wocGFuZWxfcG9ydDAs
ICJkdWFsLWx2ZHMtZXZlbi1waXhlbHMiKTsKKwlvZGRfcGl4ZWxzID0gb2Zub2RlX3JlYWRfYm9v
bChwYW5lbF9wb3J0MCwgImR1YWwtbHZkcy1vZGQtcGl4ZWxzIik7CisJaWYgKGV2ZW5fcGl4ZWxz
ICYmIG9kZF9waXhlbHMpCisJCXJldHVybiAtRUlOVkFMOworCisJcG9ydDAgPSBldmVuX3BpeGVs
cyA/IExWRFNfRFVBTF9MSU5LX0VWRU5fT0REX1BJWEVMUyA6CisJCUxWRFNfRFVBTF9MSU5LX09E
RF9FVkVOX1BJWEVMUzsKKworCXBhbmVsX3BvcnQxID0gb2Zub2RlX25leHRfc3Vibm9kZShwYW5l
bF9wb3J0MCk7CisJaWYgKCFvZm5vZGVfdmFsaWQocGFuZWxfcG9ydDEpKQorCQlyZXR1cm4gLUVQ
SVBFOworCisJZXZlbl9waXhlbHMgPSBvZm5vZGVfcmVhZF9ib29sKHBhbmVsX3BvcnQxLCAiZHVh
bC1sdmRzLWV2ZW4tcGl4ZWxzIik7CisJb2RkX3BpeGVscyA9IG9mbm9kZV9yZWFkX2Jvb2wocGFu
ZWxfcG9ydDEsICJkdWFsLWx2ZHMtb2RkLXBpeGVscyIpOworCWlmIChldmVuX3BpeGVscyAmJiBv
ZGRfcGl4ZWxzKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCXBvcnQxID0gZXZlbl9waXhlbHMgPyBM
VkRTX0RVQUxfTElOS19FVkVOX09ERF9QSVhFTFMgOgorCQlMVkRTX0RVQUxfTElOS19PRERfRVZF
Tl9QSVhFTFM7CisKKwkvKgorCSAqIEEgdmFsaWQgZHVhbC1MVkRTIGJ1cyBpcyBmb3VuZCB3aGVu
IG9uZSBwb3J0IGlzIG1hcmtlZCB3aXRoCisJICogImR1YWwtbHZkcy1ldmVuLXBpeGVscyIsIGFu
ZCB0aGUgb3RoZXIgcG9ydCBpcyBtYXJrZWQgd2l0aAorCSAqICJkdWFsLWx2ZHMtb2RkLXBpeGVs
cyIsIGJhaWwgb3V0IGlmIHRoZSBtYXJrZXJzIGFyZSBub3QgcmlnaHQuCisJICovCisJaWYgKHBv
cnQwICsgcG9ydDEgIT0gTFZEU19EVUFMX0xJTktfRVZFTl9PRERfUElYRUxTICsgTFZEU19EVUFM
X0xJTktfT0REX0VWRU5fUElYRUxTKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCXJldHVybiBwb3J0
MDsKK30KKworc3RhdGljIGludCBzdG0zMl9sdmRzX3Byb2JlKHN0cnVjdCB1ZGV2aWNlICpkZXYp
Cit7CisJc3RydWN0IHN0bTMyX2x2ZHMgKnByaXYgPSBkZXZfZ2V0X3ByaXYoZGV2KTsKKwlzdHJ1
Y3QgZGlzcGxheV90aW1pbmcgdGltaW5nczsKKwlzdHJ1Y3QgcmVzZXRfY3RsIHJzdDsKKwlzdHJ1
Y3QgY2xrIHBjbGssIHJlZmNsazsKKwljb25zdCBjaGFyICpkYXRhX21hcHBpbmc7CisJaW50IHJl
dDsKKworCXByaXYtPmJhc2UgPSBkZXZfcmVhZF9hZGRyX3B0cihkZXYpOworCWlmICgoZmR0X2Fk
ZHJfdClwcml2LT5iYXNlID09IEZEVF9BRERSX1RfTk9ORSkgeworCQlkZXZfZXJyKGRldiwgIlVu
YWJsZSB0byByZWFkIExWRFMgYmFzZSBhZGRyZXNzXG4iKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJ
fQorCisJcmV0ID0gY2xrX2dldF9ieV9uYW1lKGRldiwgInBjbGsiLCAmcGNsayk7CisJaWYgKHJl
dCkgeworCQlkZXZfZXJyKGRldiwgIlVuYWJsZSB0byBnZXQgcGVyaXBoZXJhbCBjbG9jazogJWRc
biIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJcmV0ID0gY2xrX2VuYWJsZSgmcGNsayk7
CisJaWYgKHJldCkgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBlbmFibGUgcGVyaXBoZXJh
bCBjbG9jazogJWRcbiIsIHJldCk7CisJCXJldHVybiByZXQ7CisJfQorCisJcmV0ID0gY2xrX2dl
dF9ieV9uYW1lKGRldiwgInJlZiIsICZyZWZjbGspOworCWlmIChyZXQpIHsKKwkJZGV2X2Vycihk
ZXYsICJVbmFibGUgdG8gZ2V0IHJlZmVyZW5jZSBjbG9jazogJWRcbiIsIHJldCk7CisJCWdvdG8g
ZXJyX2NsazsKKwl9CisKKwlyZXQgPSBjbGtfZW5hYmxlKCZyZWZjbGspOworCWlmIChyZXQpIHsK
KwkJZGV2X2VycihkZXYsICJGYWlsZWQgdG8gZW5hYmxlIHJlZmVyZW5jZSBjbG9jazogJWRcbiIs
IHJldCk7CisJCWdvdG8gZXJyX2NsazsKKwl9CisKKwlwcml2LT5yZWZjbGsgPSAodW5zaWduZWQg
aW50KWNsa19nZXRfcmF0ZSgmcmVmY2xrKTsKKworCXJldCA9IHJlc2V0X2dldF9ieV9pbmRleChk
ZXYsIDAsICZyc3QpOworCWlmIChyZXQpIHsKKwkJZGV2X2VycihkZXYsICJGYWlsZWQgdG8gZ2V0
IExWRFMgcmVzZXQ6ICVkXG4iLCByZXQpOworCQlnb3RvIGVycl9yc3Q7CisJfQorCisJcmVzZXRf
ZGVhc3NlcnQoJnJzdCk7CisKKwlyZXQgPSB1Y2xhc3NfZ2V0X2RldmljZV9ieV9kcml2ZXIoVUNM
QVNTX1BBTkVMLAorCQkJCQkgIERNX0RSSVZFUl9HRVQoc2ltcGxlX3BhbmVsKSwgJnByaXYtPnBh
bmVsKTsKKwlpZiAocmV0KSB7CisJCWRldl9lcnIoZGV2LCAicGFuZWwgZGV2aWNlIGVycm9yICVk
XG4iLCByZXQpOworCQlnb3RvIGVycl9yc3Q7CisJfQorCisJcmV0ID0gcGFuZWxfZ2V0X2Rpc3Bs
YXlfdGltaW5nKHByaXYtPnBhbmVsLCAmdGltaW5ncyk7CisJaWYgKHJldCkgeworCQlyZXQgPSBv
Zm5vZGVfZGVjb2RlX2Rpc3BsYXlfdGltaW5nKGRldl9vZm5vZGUocHJpdi0+cGFuZWwpLAorCQkJ
CQkJICAgMCwgJnRpbWluZ3MpOworCQlpZiAocmV0KSB7CisJCQlkZXZfZXJyKGRldiwgImRlY29k
ZSBkaXNwbGF5IHRpbWluZyBlcnJvciAlZFxuIiwgcmV0KTsKKwkJCWdvdG8gZXJyX3JzdDsKKwkJ
fQorCX0KKworCWRhdGFfbWFwcGluZyA9IG9mbm9kZV9yZWFkX3N0cmluZyhkZXZfb2Zub2RlKHBy
aXYtPnBhbmVsKSwgImRhdGEtbWFwcGluZyIpOworCWlmICghc3RyY21wKGRhdGFfbWFwcGluZywg
InZlc2EtMjQiKSkKKwkJcHJpdi0+YnVzX2Zvcm1hdCA9IE1FRElBX0JVU19GTVRfUkdCODg4XzFY
N1g0X1NQV0c7CisJZWxzZSBpZiAoIXN0cmNtcChkYXRhX21hcHBpbmcsICJqZWlkYS0yNCIpKQor
CQlwcml2LT5idXNfZm9ybWF0ID0gTUVESUFfQlVTX0ZNVF9SR0I4ODhfMVg3WDRfSkVJREE7CisJ
ZWxzZQorCQlwcml2LT5idXNfZm9ybWF0ID0gTUVESUFfQlVTX0ZNVF9SR0I4ODhfMVg3WDRfU1BX
RzsKKworCS8qIEhhbmRsZSBkdWFsIGxpbmsgY29uZmlnICovCisJcHJpdi0+ZHVhbF9saW5rID0g
bHZkc19oYW5kbGVfcGl4ZWxfb3JkZXIocHJpdik7CisJaWYgKHByaXYtPmR1YWxfbGluayA8IDAp
CisJCWdvdG8gZXJyX3JzdDsKKworCWlmIChwcml2LT5kdWFsX2xpbmsgPiAwKSB7CisJCXJldCA9
IHN0bTMyX2x2ZHNfcGxsX2VuYWJsZShwcml2LCAmdGltaW5ncywgTFZEU19QSFlfU0xBVkUpOwor
CQlpZiAocmV0KQorCQkJZ290byBlcnJfcnN0OworCX0KKworCXJldCA9IHN0bTMyX2x2ZHNfcGxs
X2VuYWJsZShwcml2LCAmdGltaW5ncywgTFZEU19QSFlfTUFTVEVSKTsKKwlpZiAocmV0KQorCQln
b3RvIGVycl9yc3Q7CisKKwlyZXR1cm4gMDsKKworZXJyX3JzdDoKKwljbGtfZGlzYWJsZSgmcmVm
Y2xrKTsKK2Vycl9jbGs6CisJY2xrX2Rpc2FibGUoJnBjbGspOworCisJcmV0dXJuIHJldDsKK30K
Kworc3RhdGljIGNvbnN0IHN0cnVjdCB2aWRlb19icmlkZ2Vfb3BzIHN0bTMyX2x2ZHNfb3BzID0g
eworCS5hdHRhY2ggPSBzdG0zMl9sdmRzX2F0dGFjaCwKKwkuc2V0X2JhY2tsaWdodCA9IHN0bTMy
X2x2ZHNfc2V0X2JhY2tsaWdodCwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgdWRldmljZV9p
ZCBzdG0zMl9sdmRzX2lkc1tdID0geworCXsuY29tcGF0aWJsZSA9ICJzdCxzdG0zMm1wMjUtbHZk
cyJ9LAorCXt9Cit9OworCitVX0JPT1RfRFJJVkVSKHN0bTMyX2x2ZHMpID0geworCS5uYW1lCQk9
ICJzdG0zMi1kaXNwbGF5LWx2ZHMiLAorCS5pZAkJPSBVQ0xBU1NfVklERU9fQlJJREdFLAorCS5v
Zl9tYXRjaAk9IHN0bTMyX2x2ZHNfaWRzLAorCS5vcHMJCT0gJnN0bTMyX2x2ZHNfb3BzLAorCS5w
cm9iZQkJPSBzdG0zMl9sdmRzX3Byb2JlLAorCS5wcml2X2F1dG8JPSBzaXplb2Yoc3RydWN0IHN0
bTMyX2x2ZHMpLAorfTsKCi0tIAoyLjI1LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fClVib290LXN0bTMyIG1haWxpbmcgbGlzdApVYm9vdC1zdG0zMkBz
dC1tZC1tYWlsbWFuLnN0b3JtcmVwbHkuY29tCmh0dHBzOi8vc3QtbWQtbWFpbG1hbi5zdG9ybXJl
cGx5LmNvbS9tYWlsbWFuL2xpc3RpbmZvL3Vib290LXN0bTMyCg==
